@import './styles-sessions.css';
@import './styles-mentions.css';
@import './styles-claude-skills.css';
@import './styles-skills-panel.css';
@import './styles-session-log.css';
@import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

:root {
  color-scheme: dark;
  --bg: #0a0e16;
  --panel: #10151e;
  --panel-2: #111820;
  --border: rgba(255, 255, 255, 0.08);
  --border-subtle: rgba(255, 255, 255, 0.04);
  --text: #f0f4f8;
  --muted: rgba(240, 244, 248, 0.7);
  --accent: #6b8afd;
  --accent-2: #22d3ee;
  --accent-3: #818cf8;
  --accent-persistent: #f472b6;
  --radius-control: 6px;
  --app-zoom-scale: 1.0;

  /* Color theme vars — set programmatically by JS, defaults for fallback */
  --theme-primary: #00ff41;
  --theme-primary-dim: #00cc33;
  --theme-primary-rgb: 0, 255, 65;
  --theme-border: #003300;
  --theme-text: #00ff41;
  --theme-text-dim: #00aa2b;
}

/* ================================================================== */
/*  STYLE PERSONALITY TOKENS                                           */
/*  These define the "feel" of each style — fonts, radii, shadows.     */
/*  Color tokens (--theme-*) are set by JS. Style tokens by CSS.       */
/* ================================================================== */

/* ---- Terminal (default) ---- */
html, html[data-style="terminal"] {
  --style-font-ui:         'JetBrains Mono', monospace;
  --style-font-code:       'JetBrains Mono', monospace;
  --style-radius-sm:       4px;
  --style-radius-md:       6px;
  --style-radius-lg:       8px;
  --style-radius-xl:       10px;
  --style-shadow-glow:     0 0 8px rgba(var(--theme-primary-rgb), 0.3);
  --style-shadow-hover:    0 0 12px rgba(var(--theme-primary-rgb), 0.4);
  --style-shadow-card:     0 0 6px rgba(var(--theme-primary-rgb), 0.15);
  --style-shadow-modal:    0 0 30px rgba(var(--theme-primary-rgb), 0.3), inset 0 0 60px rgba(var(--theme-primary-rgb), 0.03);
  --style-border-accent:   1px solid var(--theme-border);
  --style-surface-1:       #0a0e16;
  --style-surface-2:       #10151e;
  --style-surface-3:       #111820;
  --style-surface-hover:   rgba(var(--theme-primary-rgb), 0.06);
  --style-surface-active:  rgba(var(--theme-primary-rgb), 0.1);
  --style-letter-spacing:  0.5px;
  --style-text-transform:  uppercase;
  --style-transition:      0.15s ease;
  --style-backdrop:        none;
  --style-input-bg:        rgba(0, 0, 0, 0.3);
}

/* ---- Material ---- */
html[data-style="material"] {
  --style-font-ui:         'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
  --style-font-code:       'JetBrains Mono', monospace;
  --style-radius-sm:       8px;
  --style-radius-md:       12px;
  --style-radius-lg:       16px;
  --style-radius-xl:       20px;
  --style-shadow-glow:     0 2px 8px rgba(0, 0, 0, 0.2);
  --style-shadow-hover:    0 4px 16px rgba(0, 0, 0, 0.25);
  --style-shadow-card:     0 1px 4px rgba(0, 0, 0, 0.15);
  --style-shadow-modal:    0 8px 32px rgba(0, 0, 0, 0.4);
  --style-border-accent:   1px solid rgba(255, 255, 255, 0.06);
  --style-surface-1:       #121218;
  --style-surface-2:       #1a1a24;
  --style-surface-3:       #22222e;
  --style-surface-hover:   rgba(255, 255, 255, 0.04);
  --style-surface-active:  rgba(255, 255, 255, 0.08);
  --style-letter-spacing:  0;
  --style-text-transform:  none;
  --style-transition:      0.2s cubic-bezier(0.4, 0, 0.2, 1);
  --style-backdrop:        none;
  --style-input-bg:        rgba(255, 255, 255, 0.04);

  --bg: #121218;
  --panel: #1a1a24;
  --panel-2: #22222e;
  --border: rgba(255, 255, 255, 0.06);
  --border-subtle: rgba(255, 255, 255, 0.03);
  --radius-control: 12px;
}

/* ---- Glass ---- */
html[data-style="glass"] {
  --style-font-ui:         'Inter', ui-sans-serif, system-ui, -apple-system, sans-serif;
  --style-font-code:       'JetBrains Mono', monospace;
  --style-radius-sm:       10px;
  --style-radius-md:       14px;
  --style-radius-lg:       18px;
  --style-radius-xl:       24px;
  --style-shadow-glow:     0 4px 16px rgba(0, 0, 0, 0.15);
  --style-shadow-hover:    0 8px 24px rgba(0, 0, 0, 0.2);
  --style-shadow-card:     0 2px 12px rgba(0, 0, 0, 0.1);
  --style-shadow-modal:    0 12px 40px rgba(0, 0, 0, 0.35);
  --style-border-accent:   1px solid rgba(255, 255, 255, 0.1);
  --style-surface-1:       rgba(15, 15, 25, 0.85);
  --style-surface-2:       rgba(25, 25, 40, 0.7);
  --style-surface-3:       rgba(35, 35, 55, 0.6);
  --style-surface-hover:   rgba(255, 255, 255, 0.06);
  --style-surface-active:  rgba(255, 255, 255, 0.1);
  --style-letter-spacing:  0.2px;
  --style-text-transform:  none;
  --style-transition:      0.25s cubic-bezier(0.4, 0, 0.2, 1);
  --style-backdrop:        blur(16px) saturate(180%);
  --style-input-bg:        rgba(255, 255, 255, 0.06);

  --bg: rgba(10, 10, 20, 0.9);
  --panel: rgba(20, 20, 35, 0.75);
  --panel-2: rgba(25, 25, 45, 0.65);
  --border: rgba(255, 255, 255, 0.1);
  --border-subtle: rgba(255, 255, 255, 0.05);
  --radius-control: 14px;
}

/* ---- Minimal ---- */
html[data-style="minimal"] {
  --style-font-ui:         ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --style-font-code:       'JetBrains Mono', monospace;
  --style-radius-sm:       4px;
  --style-radius-md:       6px;
  --style-radius-lg:       8px;
  --style-radius-xl:       10px;
  --style-shadow-glow:     none;
  --style-shadow-hover:    none;
  --style-shadow-card:     none;
  --style-shadow-modal:    0 4px 20px rgba(0, 0, 0, 0.3);
  --style-border-accent:   1px solid rgba(255, 255, 255, 0.08);
  --style-surface-1:       #111111;
  --style-surface-2:       #181818;
  --style-surface-3:       #1f1f1f;
  --style-surface-hover:   rgba(255, 255, 255, 0.04);
  --style-surface-active:  rgba(255, 255, 255, 0.07);
  --style-letter-spacing:  0;
  --style-text-transform:  none;
  --style-transition:      0.12s ease;
  --style-backdrop:        none;
  --style-input-bg:        rgba(255, 255, 255, 0.04);

  --bg: #111111;
  --panel: #181818;
  --panel-2: #1f1f1f;
  --border: rgba(255, 255, 255, 0.08);
  --border-subtle: rgba(255, 255, 255, 0.04);
  --radius-control: 6px;
}

* {
  box-sizing: border-box;
}

html {
  font-size: calc(16px * var(--app-zoom-scale));
}

html,
body {
  height: 100%;
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    "Helvetica Neue",
    Arial,
    "Apple Color Emoji",
    "Segoe UI Emoji";
}

#root {
  height: 100%;
}

.app {
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
}

.appContent {
  display: flex;
  flex: 1 1 0;
  min-height: 0;
  width: 100%;
  overflow: hidden;
  /* Three-column layout: sidebar | main | rightPanel */
  /* Main area takes remaining space via flex: 1 1 0 */
}

/* ------------------------------------------------------------------ */
/*  Project Tab Bar                                                    */
/* ------------------------------------------------------------------ */

.projectTabBar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  flex-shrink: 0;
  background: #000000;
  border-bottom: 1px solid var(--theme-border);
  position: relative;
  z-index: 100;
}

.projectTabs {
  display: flex;
  align-items: stretch;
  gap: 4px;
  flex: 1;
  min-width: 0;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.projectTabs::-webkit-scrollbar {
  display: none;
}

.projectTab {
  display: flex;
  align-items: center;
  flex: 1 1 0;
  min-width: 0;
  border: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.03);
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-family: var(--style-font-ui);
  font-size: 12px;
  font-weight: 500;
  white-space: nowrap;
  transition: all 0.2s ease;
  position: relative;
}

.projectTab::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  background: rgba(var(--theme-primary-rgb), 0.3);
  transition: all 0.2s ease;
}

.projectTab:hover {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.2);
}

.projectTab:hover::before {
  background: var(--theme-primary);
  box-shadow: 0 0 8px var(--theme-primary);
}

.projectTabActive {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.15);
}

.projectTabActive::before {
  background: var(--theme-primary);
  box-shadow: 0 0 8px var(--theme-primary);
}

.projectTabActive:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
}

.projectTabNeedsInput {
  animation: projectTabNeedsInputGlow 2s ease-in-out infinite;
  border-color: rgba(255, 255, 255, 0.5);
}

@keyframes projectTabNeedsInputGlow {
  0%, 100% { box-shadow: 0 0 4px rgba(255, 255, 255, 0.3); border-color: rgba(255, 255, 255, 0.4); }
  50% { box-shadow: 0 0 12px rgba(255, 255, 255, 0.7); border-color: rgba(255, 255, 255, 0.9); }
}

.projectTabMain {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  flex: 1;
  min-width: 0;
  padding: 8px 14px;
  border: none;
  background: transparent;
  color: inherit;
  font-family: inherit;
  font-size: inherit;
  font-weight: inherit;
  cursor: pointer;
}

.projectTabName {
  overflow: hidden;
  text-overflow: ellipsis;
}

.projectTabCount {
  font-family: var(--style-font-ui);
  font-size: 10px;
  color: rgba(var(--theme-primary-rgb), 0.5);
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.2);
  padding: 2px 6px;
  min-width: 18px;
  text-align: center;
}

.projectTabActive .projectTabCount {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: rgba(var(--theme-primary-rgb), 0.4);
  color: var(--theme-primary);
}

.projectTabWorking {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-family: var(--style-font-ui);
  font-size: 10px;
  color: #00ffff;
  background: rgba(0, 255, 255, 0.1);
  border: 1px solid rgba(0, 255, 255, 0.3);
  padding: 2px 6px;
}

.projectTabWorkingDot {
  width: 5px;
  height: 5px;
  border-radius: 999px;
  background: #00ffff;
  box-shadow: 0 0 6px #00ffff;
  animation: terminalPulse 1s ease-in-out infinite;
}

@keyframes terminalPulse {
  0%, 100% { opacity: 1; box-shadow: 0 0 6px #00ffff; }
  50% { opacity: 0.5; box-shadow: 0 0 2px #00ffff; }
}

.projectTabBarActions {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}

.projectTabBarBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 30px;
  height: 30px;
  border: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.03);
  color: rgba(var(--theme-primary-rgb), 0.6);
  cursor: pointer;
  transition: all 0.2s ease;
}

.projectTabBarBtn:hover {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.2);
}

.projectTabBarBtn.projectTabBarBtnActive {
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.12);
  border-color: var(--theme-primary);
}

/* VS Code Panel */
.vsCodePanel { flex: 1; display: flex; align-items: center; justify-content: center; background: #1e1e1e; min-height: 0; }
.vsCodeIframe { width: 100%; height: 100%; border: none; }
.vsCodePanelLoading, .vsCodePanelError {
  color: var(--muted);
  font-family: var(--style-font-ui);
  font-size: 13px;
  text-align: center;
  padding: 24px;
}

/* Add Project Menu */
.projectAddMenuWrapper {
  position: relative;
}

.projectAddMenu {
  position: absolute;
  top: 100%;
  right: 0;
  margin-top: 4px;
  min-width: 200px;
  background: #000000;
  border: 1px solid var(--theme-border);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  z-index: 10000;
  display: flex;
  flex-direction: column;
}

.projectAddMenuItem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  border: none;
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.projectAddMenuItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
}

.projectAddMenuItem + .projectAddMenuItem {
  border-top: 1px solid var(--theme-border);
}

/* Saved Project List Items */
.savedProjectItem {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 12px 16px;
  border: none;
  background: transparent;
  cursor: pointer;
  transition: all 0.2s ease;
  text-align: left;
}

.savedProjectItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.savedProjectItem + .savedProjectItem {
  border-top: 1px solid var(--theme-border);
}

.savedProjectName {
  font-family: var(--style-font-ui);
  font-size: 12px;
  font-weight: 600;
  color: var(--theme-primary);
}

.savedProjectPath {
  font-family: var(--style-font-ui);
  font-size: 10px;
  color: rgba(var(--theme-primary-rgb), 0.5);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Project Tab Settings Button */
.projectTabSettingsBtn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  border: 1px solid transparent;
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.5);
  cursor: pointer;
  transition: all 0.2s ease;
  margin-right: 4px;
  margin-left: -4px;
  flex-shrink: 0;
}

.projectTabSettingsBtn:hover {
  color: var(--theme-primary);
  border-color: rgba(var(--theme-primary-rgb), 0.4);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

/* Project Settings Dialog */
.projectSettingsBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.projectSettingsDialog {
  background: #000000;
  border: 2px solid var(--theme-primary);
  min-width: 360px;
  max-width: 500px;
  box-shadow: 0 0 30px rgba(var(--theme-primary-rgb), 0.3), inset 0 0 60px rgba(var(--theme-primary-rgb), 0.03);
  font-family: var(--style-font-ui);
}

.projectSettingsHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.projectSettingsTitle {
  font-size: 13px;
  font-weight: 600;
  color: var(--theme-primary);
  letter-spacing: 1px;
}

.projectSettingsClose {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--theme-border);
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.projectSettingsClose:hover {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.projectSettingsContent {
  padding: 16px;
}

.projectSettingsRow {
  display: flex;
  gap: 12px;
  margin-bottom: 10px;
  font-size: 12px;
}

.projectSettingsRow:last-child {
  margin-bottom: 0;
}

.projectSettingsLabel {
  color: rgba(var(--theme-primary-rgb), 0.6);
  min-width: 80px;
  flex-shrink: 0;
}

.projectSettingsValue {
  color: var(--theme-primary);
  word-break: break-all;
}

.projectSettingsPath {
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.8);
}

.projectSettingsDivider {
  height: 1px;
  background: var(--theme-border);
  margin: 0;
}

.projectSettingsCloseBtn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 16px;
  border: none;
  background: rgba(var(--theme-primary-rgb), 0.05);
  color: rgba(var(--theme-primary-rgb), 0.8);
  font-family: var(--style-font-ui);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.projectSettingsCloseBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  color: var(--theme-primary);
  text-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.5);
}

.projectSettingsDeleteBtn {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 14px 16px;
  border: none;
  background: rgba(255, 50, 50, 0.05);
  color: rgba(255, 100, 100, 0.8);
  font-family: var(--style-font-ui);
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.projectSettingsDeleteBtn:hover {
  background: rgba(255, 50, 50, 0.15);
  color: #ff6464;
  text-shadow: 0 0 8px rgba(255, 100, 100, 0.5);
}

.projectSettingsConfirm {
  padding: 16px;
}

.projectSettingsWarning {
  padding: 12px;
  background: rgba(255, 50, 50, 0.1);
  border: 1px solid rgba(255, 100, 100, 0.3);
  color: #ff6464;
  font-size: 12px;
  margin-bottom: 16px;
  text-align: center;
}

.projectSettingsConfirmActions {
  display: flex;
  gap: 10px;
}

.projectSettingsCancelBtn {
  flex: 1;
  padding: 10px 16px;
  border: 1px solid var(--theme-border);
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.projectSettingsCancelBtn:hover {
  border-color: var(--theme-primary);
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.projectSettingsConfirmDeleteBtn {
  flex: 1;
  padding: 10px 16px;
  border: 1px solid rgba(255, 100, 100, 0.5);
  background: rgba(255, 50, 50, 0.15);
  color: #ff6464;
  font-family: var(--style-font-ui);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.projectSettingsConfirmDeleteBtn:hover {
  border-color: #ff6464;
  background: rgba(255, 50, 50, 0.25);
  box-shadow: 0 0 12px rgba(255, 100, 100, 0.3);
}

/* App Settings Dialog */
.appSettingsDialog {
  background: #000000;
  border: 2px solid var(--theme-primary);
  min-width: 520px;
  max-width: 600px;
  box-shadow: 0 0 30px rgba(var(--theme-primary-rgb), 0.3), inset 0 0 60px rgba(var(--theme-primary-rgb), 0.03);
  font-family: var(--style-font-ui);
}

.appSettingsBody {
  display: flex;
  flex-direction: row;
  min-height: 320px;
}

.appSettingsSidebar {
  display: flex;
  flex-direction: column;
  width: 120px;
  flex-shrink: 0;
  border-right: 1px solid var(--theme-border);
  padding: 8px 0;
}

.appSettingsTabBtn {
  background: none;
  border: none;
  border-left: 2px solid transparent;
  color: rgba(var(--theme-primary-rgb), 0.5);
  font-family: var(--style-font-ui);
  font-size: 11px;
  letter-spacing: 1px;
  text-align: left;
  padding: 10px 16px;
  cursor: pointer;
  transition: color 0.15s, border-color 0.15s, background 0.15s;
}

.appSettingsTabBtn:hover {
  color: rgba(var(--theme-primary-rgb), 0.8);
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.appSettingsTabBtnActive {
  color: var(--theme-primary);
  border-left-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.appSettingsTabContent {
  flex: 1;
  overflow-y: auto;
  max-height: 480px;
}

.appSettingsContent {
  padding: 16px;
}

.appSettingsContent .themeSwitcher {
  background: transparent;
  border: none;
  padding: 0;
}

.appSettingsContent .themeSwitcherLabel {
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-bottom: 14px;
}

.appSettingsContent .themeSwitcherGrid {
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
}

.appSettingsContent .themeSwitcherOption {
  border-color: var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.03);
  padding: 12px 14px;
}

.appSettingsContent .themeSwitcherOption:hover {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-color: rgba(var(--theme-primary-rgb), 0.4);
}

.appSettingsContent .themeSwitcherOptionActive {
  border-color: var(--swatch-color);
  background: rgba(var(--theme-primary-rgb), 0.1);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.2);
}

.appSettingsContent .themeSwitcherName {
  font-size: 11px;
}

/* ---- Display Settings ---- */

.displaySettings {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.displaySettingsSection {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.displaySettingsLabel {
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.displaySettingsHint {
  color: rgba(var(--theme-primary-rgb), 0.4);
  font-family: var(--style-font-ui);
  font-size: 10px;
  margin-bottom: 4px;
}

.displaySettingsOptions {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
}

.displaySettingsOption {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 10px 8px;
  border: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.03);
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-family: var(--style-font-ui);
  cursor: pointer;
  transition: all 0.2s ease;
}

.displaySettingsOption:hover {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-color: rgba(var(--theme-primary-rgb), 0.4);
  color: var(--theme-primary);
}

.displaySettingsOptionActive {
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.2);
}

.displaySettingsOptionLabel {
  font-size: 11px;
  font-weight: 600;
}

.displaySettingsOptionScale {
  font-size: 10px;
  opacity: 0.5;
}

.displaySettingsPreview {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.displaySettingsPreviewLabel {
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.displaySettingsPreviewBox {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 12px;
  border: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.02);
  font-family: var(--style-font-ui);
  color: var(--theme-primary);
}

.displaySettingsReset {
  align-self: flex-start;
  padding: 6px 14px;
  border: 1px solid var(--theme-border);
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-family: var(--style-font-ui);
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.displaySettingsReset:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.4);
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.appShortcutsHeader {
  color: rgba(var(--theme-primary-rgb), 0.72);
  font-size: 11px;
  letter-spacing: 0.8px;
  text-transform: uppercase;
  margin-bottom: 12px;
}

.appShortcutsTable {
  display: flex;
  flex-direction: column;
  border: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.03);
}

.appShortcutsRow {
  display: grid;
  grid-template-columns: 1.6fr 1fr 1.1fr;
  gap: 10px;
  align-items: center;
  padding: 9px 10px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.85);
}

.appShortcutsRow:last-child {
  border-bottom: none;
}

.appShortcutsRow span {
  overflow-wrap: anywhere;
}

.appShortcutsRowHeader {
  background: rgba(var(--theme-primary-rgb), 0.08);
  color: var(--theme-primary);
  text-transform: uppercase;
  letter-spacing: 0.8px;
  font-size: 10px;
}

/* Sound Settings (inside app settings tab) */
.soundSettingsContent {
  padding: 16px;
}

.soundSettingSection {
  margin-bottom: 16px;
}

.soundSettingRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 0;
}

.soundSettingLabel {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  cursor: pointer;
  flex: 1;
  min-width: 0;
}

.soundSettingLabel input[type="checkbox"] {
  margin-top: 2px;
  accent-color: var(--theme-primary);
  flex-shrink: 0;
}

.soundSettingInfo {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
}

.soundSettingTitle {
  color: var(--theme-primary);
  font-size: 12px;
  font-family: var(--style-font-ui);
}

.soundSettingDescription {
  color: rgba(var(--theme-primary-rgb), 0.45);
  font-size: 10px;
  font-family: var(--style-font-ui);
  line-height: 1.3;
}

.soundSettingGroupTitle {
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin: 0 0 8px 0;
  padding-bottom: 4px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  font-weight: normal;
}

.soundSettingVolume {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 4px;
}

.soundVolumeSlider {
  width: 140px;
  accent-color: var(--theme-primary);
}

.soundVolumeValue {
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-size: 11px;
  font-family: var(--style-font-ui);
  min-width: 36px;
}

.soundMasterToggle .soundSettingTitle {
  font-size: 13px;
}

.soundBulkActions {
  display: flex;
  gap: 8px;
}

.soundBulkBtn {
  background: none;
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 10px;
  padding: 4px 10px;
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
}

.soundBulkBtn:hover:not(:disabled) {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
}

.soundBulkBtn:disabled {
  opacity: 0.35;
  cursor: default;
}

.soundTestBtn {
  background: none;
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-size: 10px;
  padding: 3px 8px;
  cursor: pointer;
  flex-shrink: 0;
  transition: background 0.15s, color 0.15s;
}

.soundTestBtn:hover:not(:disabled) {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
}

.soundTestBtn:disabled {
  opacity: 0.3;
  cursor: default;
}

/* Global Sound Toggle */
.globalSoundToggle {
  opacity: 0.7;
  transition: opacity 0.15s;
}

.globalSoundToggle:hover {
  opacity: 1;
}

/* Project Sound Settings */
.projectSoundSettings {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding: 16px;
}

.projectSoundRow {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.projectSoundLabel {
  font-size: 11px;
  font-weight: normal;
  text-transform: uppercase;
  letter-spacing: 1px;
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
}

.projectSoundSettings select {
  background: #000;
  border: 1px solid var(--theme-border);
  color: var(--theme-primary);
  font-family: var(--style-font-ui);
  font-size: 11px;
  padding: 5px 8px;
  cursor: pointer;
}

.projectSoundSettings select:focus {
  outline: none;
  border-color: var(--theme-primary);
  box-shadow: 0 0 6px rgba(var(--theme-primary-rgb), 0.2);
}

.projectSoundInstruments {
  display: flex;
  gap: 14px;
  flex-wrap: wrap;
}

.projectSoundInstrumentOption {
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  transition: color 0.15s;
}

.projectSoundInstrumentOption:hover {
  color: var(--theme-primary);
}

.projectSoundInstrumentOption input[type="radio"] {
  width: 14px;
  height: 14px;
  accent-color: var(--theme-primary);
  cursor: pointer;
}

.projectSoundOverrides {
  display: flex;
  flex-direction: column;
  gap: 4px;
  max-height: 300px;
  overflow-y: auto;
  padding: 4px 0;
}

.projectSoundGroup {
  display: flex;
  flex-direction: column;
  gap: 2px;
  margin-bottom: 8px;
}

.projectSoundGroupTitle {
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin: 0 0 6px 0;
  padding-bottom: 4px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  font-weight: normal;
  font-family: var(--style-font-ui);
}

.projectSoundCategoryRow {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 0;
}

.projectSoundCategoryToggle {
  display: flex;
  align-items: center;
  gap: 6px;
  flex: 1;
  font-size: 12px;
  cursor: pointer;
  min-width: 0;
  color: var(--theme-primary);
  font-family: var(--style-font-ui);
}

.projectSoundCategoryToggle input[type="checkbox"] {
  width: 14px;
  height: 14px;
  accent-color: var(--theme-primary);
  flex-shrink: 0;
  cursor: pointer;
}

.projectSoundCategoryToggle span {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.projectSoundCategoryInstrument {
  font-size: 10px;
  padding: 3px 6px;
  border: 1px solid var(--theme-border);
  background: #000;
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  max-width: 130px;
  cursor: pointer;
}

.projectSoundCategoryInstrument:focus {
  outline: none;
  border-color: var(--theme-primary);
}

.projectSoundActions {
  display: flex;
  gap: 8px;
  padding-top: 8px;
}

.projectSoundActions .themedBtn {
  font-size: 10px;
}

.projectSoundSaveTemplate {
  display: flex;
  gap: 8px;
  align-items: center;
  padding: 8px 0;
}

.projectSoundSaveTemplate .themedFormInput {
  flex: 1;
}

.projectSoundCustomTemplates {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-top: 8px;
  border-top: 1px solid rgba(var(--theme-primary-rgb), 0.15);
}

.projectSoundCustomTemplateRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 11px;
  font-family: var(--style-font-ui);
  color: rgba(var(--theme-primary-rgb), 0.7);
  padding: 3px 0;
}

.projectSoundDeleteBtn {
  background: none;
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.5);
  font-family: var(--style-font-ui);
  font-size: 10px;
  padding: 2px 8px;
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
}

.projectSoundDeleteBtn:hover {
  background: rgba(255, 60, 60, 0.1);
  color: #ff4444;
  border-color: #ff4444;
}

/* ------------------------------------------------------------------ */
/*  Panel resize performance optimizations                             */
/* ------------------------------------------------------------------ */

/* During sidebar resize: use live CSS variable, optimize for performance */
:root.sidebar-resizing .sidebar {
  width: var(--sidebar-width-live) !important;
  will-change: width;
  transition: none !important;
}

:root.sidebar-resizing .terminalPane {
  pointer-events: none;
}

:root.sidebar-resizing .main {
  /* Hint browser that main area will change size */
  will-change: width;
}

/* During maestro sidebar resize */
:root.maestro-sidebar-resizing .appLeftPanel {
  width: calc(48px + var(--maestro-sidebar-width-live)) !important;
  will-change: width;
  transition: none !important;
}

:root.maestro-sidebar-resizing .appLeftPanelContent {
  width: var(--maestro-sidebar-width-live) !important;
  will-change: width;
  transition: none !important;
}

:root.maestro-sidebar-resizing .terminalPane {
  pointer-events: none;
}

:root.maestro-sidebar-resizing .main {
  will-change: width;
}

/* During right panel resize: use live CSS variable, optimize for performance */
:root.right-panel-resizing .rightPanel,
:root.right-panel-resizing .spacesPanel {
  width: var(--right-panel-width-live) !important;
  max-width: var(--right-panel-width-live) !important;
  will-change: width;
  transition: none !important;
}

:root.right-panel-resizing .spacesPanelContent {
  width: var(--right-panel-width-live) !important;
  will-change: width;
  transition: none !important;
}

:root.right-panel-resizing .terminalPane {
  pointer-events: none;
}

:root.right-panel-resizing .main {
  /* Hint browser that main area will change size */
  will-change: width;
}

/* GPU acceleration during any resize */
:root.sidebar-resizing,
:root.maestro-sidebar-resizing,
:root.right-panel-resizing {
  /* Prevent text selection during drag */
  user-select: none;
}

/* ------------------------------------------------------------------ */
/*  Icon Rail                                                          */
/* ------------------------------------------------------------------ */

.iconRail {
  width: 48px;
  min-width: 48px;
  height: 100%;
  background: #080a0f;
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 0;
  gap: 2px;
  flex-shrink: 0;
  z-index: 5;
}

.iconRailButton {
  position: relative;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  color: rgba(240, 244, 248, 0.45);
  cursor: pointer;
  border-radius: 6px;
  transition: background 0.15s ease, color 0.15s ease;
}

.iconRailButton:hover {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(240, 244, 248, 0.8);
}

.iconRailButton--active {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
}

.iconRailButton--active:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
}

.iconRailActiveIndicator {
  position: absolute;
  left: 0;
  top: 8px;
  bottom: 8px;
  width: 3px;
  background: var(--theme-primary);
  border-radius: 0 2px 2px 0;
  box-shadow: 0 0 6px rgba(var(--theme-primary-rgb), 0.5);
}

.iconRailBadge {
  position: absolute;
  top: 4px;
  right: 4px;
  min-width: 16px;
  height: 16px;
  padding: 0 4px;
  background: var(--theme-primary);
  color: #000;
  font-size: 9px;
  font-weight: 700;
  line-height: 16px;
  text-align: center;
  border-radius: 8px;
  font-family: var(--style-font-ui);
}

.iconRailSpacer {
  flex: 1 1 0;
}

/* ------------------------------------------------------------------ */
/*  App Left Panel                                                     */
/* ------------------------------------------------------------------ */

.appLeftPanel {
  display: flex;
  flex-direction: row;
  height: 100%;
  flex-shrink: 0;
  overflow: hidden;
  /* Performance: strict containment isolates layout from main content */
  contain: strict;
  /* No width transition — instant toggle avoids layout thrashing */
}

.appLeftPanel--expanded {
  /* expanded state — width is set inline */
}

.appLeftPanelContent {
  height: 100%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  border-right: 1px solid var(--border);
  background: #000;
  contain: strict;
}

/* ------------------------------------------------------------------ */
/*  Spaces Panel (right)                                               */
/* ------------------------------------------------------------------ */

.spacesPanel {
  display: flex;
  flex-direction: row;
  height: 100%;
  overflow: hidden;
  flex-shrink: 0;
  flex-grow: 0;
  /* Performance: strict containment isolates layout from main content */
  contain: strict;
  /* No width transition — instant toggle avoids layout thrashing */
}

.spacesPanelContent {
  height: 100%;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  background:
    radial-gradient(900px 520px at 90% 0%, rgba(var(--theme-primary-rgb), 0.06), transparent 55%),
    linear-gradient(180deg, var(--panel), var(--panel-2));
  border-left: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  contain: strict;
}

.spacesRail {
  width: 48px;
  min-width: 48px;
  height: 100%;
  background: #080a0f;
  border-left: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 8px 0;
  gap: 2px;
  flex-shrink: 0;
  z-index: 5;
}

.iconRailActiveIndicator--right {
  left: auto;
  right: 0;
  border-radius: 2px 0 0 2px;
}

.spacesRailDivider {
  width: 24px;
  height: 1px;
  background: var(--border);
  margin: 4px 0;
  flex-shrink: 0;
}

/* Per-session icons in the spaces rail */
.spacesRailSessions {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  overflow-y: auto;
  overflow-x: hidden;
  flex: 1 1 0;
  min-height: 0;
  padding: 0 4px;
  scrollbar-width: none;
}

.spacesRailSessions::-webkit-scrollbar {
  display: none;
}

/* Dropdown menu from plus button (rendered via portal with fixed positioning) */
.spacesRailDropdown {
  min-width: 160px;
  background: var(--bg-elevated, #1a1b26);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 4px;
  z-index: 100;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
  display: flex;
  flex-direction: column;
  gap: 1px;
}

.spacesRailDropdownItem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  background: transparent;
  border: none;
  color: var(--fg, #c0caf5);
  font-family: var(--style-font-ui);
  font-size: 12px;
  cursor: pointer;
  border-radius: 6px;
  white-space: nowrap;
  transition: background 0.1s ease;
}

.spacesRailDropdownItem:hover {
  background: rgba(255, 255, 255, 0.08);
}

.spacesRailDropdownItem:disabled {
  opacity: 0.35;
  cursor: default;
}

.spacesRailDropdownItem:disabled:hover {
  background: transparent;
}

.spacesRailDropdownItem svg {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
}

.spacesRailDropdownIcon {
  width: 16px;
  height: 16px;
  border-radius: 3px;
  object-fit: contain;
  flex-shrink: 0;
}

/* In SpacesRail, no spacer should compete with sessions */
.spacesRail > .iconRailSpacer {
  display: none;
}

/* Team group box in collapsed rail */
.spacesRailTeamGroup {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  padding: 3px;
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  background: rgba(255, 255, 255, 0.02);
}

.spacesRailSession {
  position: relative;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid transparent;
  color: rgba(240, 244, 248, 0.5);
  cursor: pointer;
  border-radius: 8px;
  transition: background 0.15s ease, border-color 0.15s ease, color 0.15s ease;
  flex-shrink: 0;
}

.spacesRailSession:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.1);
  color: rgba(240, 244, 248, 0.8);
}

.spacesRailSession--active {
  background: rgba(var(--theme-primary-rgb), 0.12);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  color: var(--theme-primary);
}

.spacesRailSession--active:hover {
  background: rgba(var(--theme-primary-rgb), 0.18);
}

.spacesRailSession--exited {
  opacity: 0.4;
}

.spacesRailSessionIcon {
  width: 20px;
  height: 20px;
  border-radius: 4px;
  object-fit: contain;
}

.spacesRailSessionInitial {
  font-family: var(--style-font-ui);
  font-size: 13px;
  font-weight: 600;
  line-height: 1;
  color: inherit;
}

.spacesRailSessionInitial--maestro {
  color: var(--theme-primary);
}

.spacesRailSessionPulse {
  position: absolute;
  bottom: 2px;
  right: 2px;
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: var(--theme-primary);
  box-shadow: 0 0 4px rgba(var(--theme-primary-rgb), 0.6);
  animation: spacesRailPulse 1.5s ease-in-out infinite;
}

@keyframes spacesRailPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* Needs Input indicator — pulsing orange dot, top-right */
.spacesRailSession--needsInput {
  border-color: rgba(255, 170, 0, 0.4);
  animation: spacesRailNeedsInputGlow 1.5s ease-in-out infinite;
}

.spacesRailSessionNeedsInput {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: #ffaa00;
  box-shadow: 0 0 4px rgba(255, 170, 0, 0.7);
  animation: spacesRailPulse 1.2s ease-in-out infinite;
}

@keyframes spacesRailNeedsInputGlow {
  0%, 100% { box-shadow: 0 0 0 0 rgba(255, 170, 0, 0); }
  50% { box-shadow: 0 0 6px 2px rgba(255, 170, 0, 0.3); }
}

/* Completed indicator — green checkmark dot, bottom-right */
.spacesRailSession--completed {
  border-color: rgba(0, 200, 80, 0.3);
}

.spacesRailSessionCompleted {
  position: absolute;
  bottom: 2px;
  right: 2px;
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: #00c850;
  box-shadow: 0 0 4px rgba(0, 200, 80, 0.5);
}

.spacesPanelToolbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.1);
  flex-shrink: 0;
}

.spacesPanelTitle {
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  color: var(--theme-primary);
  text-transform: var(--style-text-transform);
  letter-spacing: var(--style-letter-spacing);
  text-shadow: 0 0 4px rgba(var(--theme-primary-rgb), 0.3);
}

.spacesPanelActions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.spacesPanelAction {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  color: rgba(240, 244, 248, 0.5);
  cursor: pointer;
  border-radius: var(--style-radius-sm, 4px);
  transition: all 0.15s ease;
}

.spacesPanelAction:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  background: rgba(var(--theme-primary-rgb), 0.12);
  color: var(--theme-primary);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.15);
}

/* ------------------------------------------------------------------ */
/*  Spaces Panel Content — scoped overrides for right panel context    */
/* ------------------------------------------------------------------ */

.spacesPanelContent .sidebarHeader {
  padding: 12px 16px 10px 16px;
  margin-bottom: 0;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.08);
}

.spacesPanelContent .sidebarHeader .title {
  font-size: 10px;
  letter-spacing: 0.12em;
}

.spacesPanelContent .sidebarHeaderActions {
  gap: 4px;
}

.spacesPanelContent .agentShortcutRow {
  padding: 10px 16px 10px 16px;
  gap: 8px;
  margin-bottom: 0;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.06);
}

.spacesPanelContent .sessionList {
  padding: 8px 14px;
  gap: 4px;
}

.spacesPanelContent .sessionItem {
  padding: 10px 14px;
  border-radius: var(--style-radius-sm, 4px);
}

.spacesPanelContent .sessionItem.sessionItemCompact {
  padding: 6px 14px;
}

.spacesPanelContent .sessionItemStatusRow {
  padding-left: 38px;
}

.spacesPanelContent .sessionItemTaskChips {
  padding-left: 38px;
}

.spacesPanelContent .sessionItemBottomActions {
  margin-left: 38px;
  margin-right: 2px;
}

.spacesPanelContent .empty {
  padding: 16px;
  text-align: center;
}

/* ------------------------------------------------------------------ */

.sidebar {
  /* width is set via inline style */
  flex-shrink: 0;
  background:
    radial-gradient(900px 520px at 10% 0%, rgba(107, 138, 253, 0.12), transparent 55%),
    linear-gradient(180deg, var(--panel), var(--panel-2));
  border-right: 1px solid var(--border);
  display: flex;
  flex-direction: column;
  padding: 12px;
  gap: 12px;
  overflow: hidden;
  container-type: inline-size;
  container-name: sidebar;
  /* Performance: isolate layout calculations */
  contain: layout style;
}

.sidebarHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.sidebarHeaderActions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.sidebarActionMenu {
  position: relative;
  display: flex;
}

.btnSmall.btnIcon.btnIconActive {
  border-color: rgba(107, 138, 253, 0.4);
  background: rgba(107, 138, 253, 0.12);
}

.sidebarActionMenuDropdown {
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  min-width: 200px;
  padding: 6px;
  border: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(17, 24, 34, 0.98), rgba(10, 14, 20, 0.98));
  border-radius: 12px;
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.55);
  z-index: 300;
}

.sidebarActionMenuItem {
  width: 100%;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  padding: 8px 10px;
  border-radius: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  text-align: left;
}

.sidebarActionMenuItem:hover {
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
}

.sidebarActionMenuItem:active {
  transform: translateY(1px);
}

.sidebarActionMenuItem svg {
  opacity: 0.9;
}

.projectList {
  display: flex;
  flex-direction: column;
  gap: 6px;
  height: var(--projectsListMaxHeight, 290px);
  overflow: auto;
  padding-right: 2px;
}

.projectItem {
  position: relative;
  border: 1px solid transparent;
  background: rgba(255, 255, 255, 0.02);
  color: var(--text);
  border-radius: var(--radius-control);
  display: flex;
  align-items: center;
  gap: 6px;
  transition: background 0.15s ease, border-color 0.15s ease, opacity 0.15s ease;
}

.projectItemMain {
  flex: 1;
  min-width: 0;
  border: none;
  background: transparent;
  color: inherit;
  padding: 10px 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  text-align: left;
}

.projectDragHandle {
  width: 32px;
  height: 32px;
  flex: 0 0 auto;
  margin-right: 6px;
  border: 1px solid transparent;
  border-radius: var(--radius-control);
  background: transparent;
  color: var(--muted);
  cursor: grab;
  opacity: 0.35;
  touch-action: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.projectItem:hover .projectDragHandle {
  opacity: 0.75;
  border-color: rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.03);
}

.projectDragHandle:active {
  cursor: grabbing;
}

.projectDragHandle:disabled {
  opacity: 0.15;
  cursor: default;
}

.projectItemDragging {
  opacity: 0.6;
}

.projectItemDropBefore::before {
  content: "";
  position: absolute;
  left: 10px;
  right: 10px;
  top: -1px;
  height: 2px;
  border-radius: 999px;
  background: rgba(34, 211, 238, 0.75);
}

.projectItemDropAfter::after {
  content: "";
  position: absolute;
  left: 10px;
  right: 10px;
  bottom: -1px;
  height: 2px;
  border-radius: 999px;
  background: rgba(34, 211, 238, 0.75);
}

.projectItem:hover {
  border-color: rgba(255, 255, 255, 0.08);
}

.projectItemActive {
  border-color: rgba(107, 138, 253, 0.5);
  background: rgba(107, 138, 253, 0.09);
}

.projectTitle {
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 13px;
}

.projectBadges {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.projectAgentsBadge {
  font-size: 11px;
  color: rgba(255, 255, 255, 0.88);
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: linear-gradient(180deg, rgba(107, 138, 253, 0.22), rgba(34, 211, 238, 0.14));
  border-radius: 999px;
  padding: 2px 8px;
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.projectAgentsDot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: linear-gradient(180deg, var(--accent), var(--accent-2));
  animation: chipPulse 1.1s ease-in-out infinite;
}

.projectCount {
  font-size: 11px;
  color: var(--muted);
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  border-radius: 999px;
  padding: 2px 8px;
  white-space: nowrap;
}

.agentShortcutRow {
  display: flex;
  gap: 6px;
  overflow-x: auto;
  padding-bottom: 2px;
  scrollbar-width: none;
}

.agentShortcutRow::-webkit-scrollbar {
  display: none;
}

.agentShortcutBtn {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 6px 8px;
  border-radius: var(--radius-control);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  justify-content: flex-start;
  white-space: nowrap;
  font-size: 12px;
}

.agentShortcutBtn:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.14);
}

.agentShortcutIcon {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  display: block;
}

.agentShortcutIconFallback {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  font-size: 11px;
}

.agentShortcutLabel {
  line-height: 1;
  font-size: 12px;
}

.sidebarResizeHandle {
  height: 14px;
  margin: -4px 0;
  position: relative;
  cursor: row-resize;
  border-radius: 6px;
  touch-action: none;
}

.sidebarResizeHandle::before {
  content: "";
  position: absolute;
  left: 0;
  right: 0;
  top: 50%;
  height: 1px;
  background: var(--border);
  transform: translateY(-0.5px);
}

.sidebarResizeHandle:hover::before,
.sidebarResizeHandle:focus-visible::before {
  background: rgba(107, 138, 253, 0.35);
}

.sidebarResizeHandle:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: -2px;
}

/* Resize handle for right edge of sidebar (between sidebar and main) */
.sidebarRightResizeHandle {
  width: 8px;
  cursor: col-resize;
  background: transparent;
  transition: background 0.15s ease;
  z-index: 100;
  flex-shrink: 0;
  position: relative;
}

.sidebarRightResizeHandle::before {
  content: '';
  position: absolute;
  left: 3px;
  top: 0;
  bottom: 0;
  width: 2px;
  background: var(--border);
  transition: background 0.15s ease, box-shadow 0.15s ease;
}

.sidebarRightResizeHandle:hover::before,
.sidebarRightResizeHandle:focus-visible::before {
  background: rgba(var(--theme-primary-rgb), 0.8);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.5);
}

.sidebarRightResizeHandle:hover,
.sidebarRightResizeHandle:focus-visible {
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.sidebarRightResizeHandle:focus-visible {
  outline: none;
}

/* Resize handle for left edge of right panel (between main and right panel) */
.sidebarLeftResizeHandle {
  width: 0;
  cursor: col-resize;
  z-index: 100;
  flex-shrink: 0;
  position: relative;
  margin: 0;
  padding: 0;
}

/* Invisible hit target for drag interaction */
.sidebarLeftResizeHandle::before {
  content: '';
  position: absolute;
  left: -4px;
  top: 0;
  bottom: 0;
  width: 8px;
  background: transparent;
  cursor: col-resize;
  transition: background 0.15s ease;
}

.sidebarLeftResizeHandle:hover::before,
.sidebarLeftResizeHandle:focus-visible::before {
  background: rgba(var(--theme-primary-rgb), 0.5);
}

.sidebarLeftResizeHandle:focus-visible {
  outline: none;
}

.rightPanel {
  background: var(--panel);
  border-left: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  min-width: 0;
  flex-shrink: 0;
  flex-grow: 0;
  /* Performance: isolate layout calculations */
  contain: layout style;
}


.divider {
  height: 1px;
  background: var(--border);
  margin: 2px 0;
}

.title {
  font-size: 13px;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted);
}

.btn {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 8px 10px;
  border-radius: var(--radius-control);
  cursor: pointer;
  transition: background 0.15s ease, border-color 0.15s ease, transform 0.05s ease;
}

.btn svg,
.btnSmall svg,
.iconBtn svg {
  display: block;
}

.btn:hover {
  background: rgba(255, 255, 255, 0.06);
}

.btn:active {
  transform: translateY(1px);
}

.btn:disabled {
  cursor: not-allowed;
  opacity: 0.55;
}

.btn.btnDanger {
  border-color: rgba(255, 80, 80, 0.35);
  background: rgba(255, 80, 80, 0.1);
  color: rgba(255, 255, 255, 0.92);
}

.btn.btnDanger:hover {
  background: rgba(255, 80, 80, 0.14);
}

.btn.btnDanger:disabled {
  opacity: 0.55;
}

.sessionList {
  display: flex;
  flex-direction: column;
  gap: 6px;
  overflow: auto;
  padding-right: 2px;
}

.sessionLegend {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 18px;
  align-items: center;
  margin: 6px 2px 2px 2px;
  font-size: 10px;
  color: rgba(255, 255, 255, 0.5);
  user-select: none;
}

.sessionLegendItem {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  white-space: nowrap;
}

.sessionLegendSwatch {
  width: 9px;
  height: 9px;
  border-radius: 999px;
  box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.22);
}

.sessionLegendItemDefault {
  color: rgba(107, 138, 253, 0.75);
}

.sessionLegendItemSsh {
  color: rgba(34, 211, 238, 0.78);
}

.sessionLegendItemPersistent {
  color: rgba(244, 114, 182, 0.82);
}

.sessionLegendSwatchDefault {
  background: var(--accent);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.22),
    0 0 0 3px rgba(107, 138, 253, 0.14);
}

.sessionLegendSwatchSsh {
  background: var(--accent-2);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.22),
    0 0 0 3px rgba(34, 211, 238, 0.14);
}

.sessionLegendSwatchPersistent {
  background: var(--accent-persistent);
  box-shadow:
    0 0 0 1px rgba(255, 255, 255, 0.22),
    0 0 0 3px rgba(244, 114, 182, 0.14);
}

.empty {
  font-size: 12px;
  color: var(--muted);
  padding: 8px 2px;
}

.btn:focus-visible,
.btnSmall:focus-visible,
.sidebarActionMenuItem:focus-visible,
.agentShortcutBtn:focus-visible,
.projectItemMain:focus-visible,
.projectDragHandle:focus-visible,
.sessionItem:focus-visible,
.pathPickerItem:focus-visible,
.iconBtn:focus-visible {
  outline: 2px solid rgba(34, 211, 238, 0.55);
  outline-offset: 2px;
}

.sessionItem {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: var(--radius-control);
  border: 1px solid transparent;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.02);
  transition: background 0.15s ease, border-color 0.15s ease, opacity 0.15s ease;
}

.sessionItem:hover {
  border-color: rgba(255, 255, 255, 0.08);
}

.sessionItemActive {
  border-color: rgba(107, 138, 253, 0.5);
  background: rgba(107, 138, 253, 0.09);
}

.sessionItemActive.sessionItemSsh {
  border-color: rgba(34, 211, 238, 0.55);
  background: rgba(34, 211, 238, 0.085);
}

.sessionItemActive.sessionItemPersistent {
  border-color: rgba(244, 114, 182, 0.55);
  background: rgba(244, 114, 182, 0.085);
}

.sessionItemActive.sessionItemSsh .dotActive {
  background: var(--accent-2);
}

.sessionItemActive.sessionItemPersistent .dotActive {
  background: var(--accent-persistent);
}

.sessionItemExited {
  opacity: 0.75;
}

.sessionItemClosing {
  opacity: 0.7;
}

@keyframes needsInputGlow {
  0%, 100% {
    box-shadow: 0 0 4px rgba(255, 255, 255, 0.3);
    border-color: rgba(255, 255, 255, 0.4);
  }
  50% {
    box-shadow: 0 0 12px rgba(255, 255, 255, 0.7);
    border-color: rgba(255, 255, 255, 0.9);
  }
}

.sessionItemNeedsInput {
  animation: needsInputGlow 2s ease-in-out infinite;
}

.sessionItemDragging {
  opacity: 0.5;
  cursor: grabbing !important;
}

.sessionItemDragOver {
  border-color: rgba(34, 211, 238, 0.6) !important;
  background: rgba(34, 211, 238, 0.12) !important;
  box-shadow: 0 0 0 2px rgba(34, 211, 238, 0.25);
}

.sessionItemSsh {
  /* Type color only (no left border bar). */
}

.sessionItem:not(.sessionItemActive).sessionItemDefault {
  background: rgba(107, 138, 253, 0.035);
}

.sessionItem:not(.sessionItemActive).sessionItemDefault:hover {
  border-color: rgba(107, 138, 253, 0.22);
  background: rgba(107, 138, 253, 0.055);
}

.sessionItem:not(.sessionItemActive).sessionItemSsh {
  background: rgba(34, 211, 238, 0.035);
}

.sessionItem:not(.sessionItemActive).sessionItemSsh:hover {
  border-color: rgba(34, 211, 238, 0.24);
  background: rgba(34, 211, 238, 0.055);
}

.sessionItemPersistent {
  /* Type color only (no left border bar). */
}

.sessionItemSsh .dot:not(.dotActive) {
  background: rgba(34, 211, 238, 0.78);
}

.sessionItemPersistent .dot:not(.dotActive) {
  background: rgba(244, 114, 182, 0.82);
}

.sessionItem:not(.sessionItemActive).sessionItemPersistent {
  background: rgba(244, 114, 182, 0.04);
}

.sessionItem:not(.sessionItemActive).sessionItemPersistent:hover {
  border-color: rgba(244, 114, 182, 0.24);
  background: rgba(244, 114, 182, 0.06);
}

.sessionItemDefault .dot:not(.dotActive) {
  background: rgba(107, 138, 253, 0.78);
}

.sessionDragHandle {
  width: 20px;
  height: 20px;
  flex: 0 0 auto;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  cursor: grab;
  opacity: 0.35;
  touch-action: none;
  transition: opacity 0.15s ease;
}

.sessionItem:hover .sessionDragHandle {
  opacity: 0.75;
}

.sessionItemDragging .sessionDragHandle {
  cursor: grabbing;
  opacity: 0.5;
}

.dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.22);
}

.dotActive {
  background: var(--accent);
}

.sessionMeta {
  flex: 1;
  min-width: 0;
}

.sessionName {
  display: flex;
  align-items: center;
  gap: 7px;
  font-size: 13px;
  font-weight: 500;
  min-width: 0;
}

.sessionNameText {
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sessionStatus {
  font-size: 11px;
  color: var(--muted);
  white-space: nowrap;
}

.recordingDot {
  width: 8px;
  height: 8px;
  border-radius: 999px;
  background: rgba(255, 80, 80, 0.95);
  box-shadow: 0 0 0 2px rgba(255, 80, 80, 0.14);
  animation: recordingPulse 1.2s ease-in-out infinite;
}

@keyframes recordingPulse {
  0% {
    transform: scale(0.85);
    opacity: 0.7;
  }

  50% {
    transform: scale(1.15);
    opacity: 1;
  }

  100% {
    transform: scale(0.85);
    opacity: 0.7;
  }
}

.chip {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 10px;
  line-height: 1.6;
  padding: 2px 8px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.04);
  color: rgba(255, 255, 255, 0.8);
  white-space: nowrap;
}

.agentBadge {
  position: relative;
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.agentBadge.chip-codex,
.agentBadge.chip-claude {
  border: none;
  background: transparent;
  padding: 0;
}

.agentIcon {
  width: 18px;
  height: 18px;
  display: block;
}

.agentBadgeDot {
  position: absolute;
  right: -1px;
  bottom: -1px;
  box-shadow: 0 0 0 2px rgba(11, 15, 20, 0.9);
  pointer-events: none;
}

.chipActivity {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: rgba(255, 255, 255, 0.75);
  animation: chipPulse 1.1s ease-in-out infinite;
}

.chip-codex .chipActivity {
  background: var(--accent);
}

.chip-claude .chipActivity {
  background: var(--accent-2);
}

@keyframes chipPulse {
  0% {
    transform: scale(0.75);
    opacity: 0.55;
  }

  50% {
    transform: scale(1.15);
    opacity: 1;
  }

  100% {
    transform: scale(0.75);
    opacity: 0.55;
  }
}

.chip-codex {
  border-color: rgba(107, 138, 253, 0.45);
  background: rgba(107, 138, 253, 0.12);
  color: rgba(255, 255, 255, 0.88);
}

.chip-claude {
  border-color: rgba(34, 211, 238, 0.45);
  background: rgba(34, 211, 238, 0.12);
  color: rgba(255, 255, 255, 0.88);
}

.chip-ssh {
  border-color: rgba(34, 211, 238, 0.42);
  background: linear-gradient(180deg, rgba(34, 211, 238, 0.14), rgba(34, 211, 238, 0.06));
  color: rgba(255, 255, 255, 0.88);
  border-radius: 8px;
}

.sessionCmd {
  font-size: 11px;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 2px;
}

.closeBtn {
  border: 1px solid var(--border);
  background: transparent;
  color: var(--muted);
  padding: 6px 8px;
  border-radius: var(--radius-control);
  cursor: pointer;
}

.closeBtn:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.closeBtn:hover {
  color: var(--text);
  background: rgba(255, 255, 255, 0.05);
}

.main {
  flex: 1 1 0;
  display: flex;
  flex-direction: column;
  min-width: 200px;
  overflow: hidden;
  /* Performance: isolate layout calculations */
  contain: layout style;
}

.topbar {
  height: 46px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 12px;
  border-bottom: 1px solid var(--border-subtle);
  background: rgba(6, 9, 15, 0.75);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
}

.topbarRight {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 0;
}

.topbarExternalActions {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-right: 8px;
}

.activeTitle {
  font-size: 13px;
  color: var(--muted);
}

.errorBanner {
  display: flex;
  align-items: center;
  gap: 10px;
  border: 1px solid rgba(255, 80, 80, 0.35);
  background: rgba(255, 80, 80, 0.08);
  padding: 8px 10px;
  border-radius: 12px;
  min-width: 0;
  max-width: min(720px, 70vw);
}

.noticeBanner {
  display: flex;
  align-items: center;
  gap: 10px;
  border: 1px solid rgba(107, 138, 253, 0.35);
  background: rgba(107, 138, 253, 0.12);
  padding: 8px 10px;
  border-radius: 12px;
  min-width: 0;
  max-width: min(720px, 70vw);
}

.errorText {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.35;
  white-space: normal;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-width: 0;
}

.noticeText {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.35;
  white-space: normal;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  min-width: 0;
}

.errorClose {
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: transparent;
  color: rgba(255, 255, 255, 0.75);
  padding: 4px 8px;
  border-radius: var(--radius-control);
  cursor: pointer;
}

.errorClose:hover {
  color: var(--text);
  background: rgba(255, 255, 255, 0.06);
}

/* ---- Update Banner ---- */
.updateBanner {
  display: flex;
  align-items: center;
  gap: 10px;
  border: 1px solid rgba(34, 197, 94, 0.35);
  background: rgba(34, 197, 94, 0.10);
  padding: 6px 12px;
  margin: 0 8px;
  border-radius: 8px;
  flex-shrink: 0;
}

.updateBannerText {
  font-size: 13px;
  color: rgba(255, 255, 255, 0.9);
  line-height: 1.35;
  flex: 1;
  min-width: 0;
}

.updateBannerBtn {
  border: 1px solid rgba(34, 197, 94, 0.5);
  background: rgba(34, 197, 94, 0.15);
  color: #4ade80;
  padding: 3px 10px;
  border-radius: var(--radius-control);
  cursor: pointer;
  font-size: 12px;
  white-space: nowrap;
}

.updateBannerBtn:hover {
  background: rgba(34, 197, 94, 0.25);
  color: #86efac;
}

.updateBannerClose {
  border: none;
  background: transparent;
  color: rgba(255, 255, 255, 0.5);
  padding: 2px 6px;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
}

.updateBannerClose:hover {
  color: rgba(255, 255, 255, 0.85);
}

.terminalArea {
  position: relative;
  flex: 1 1 0;
  min-height: 0;
  min-width: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.workspaceRow {
  flex: 1 1 0;
  min-height: 0;
  min-width: 0;
  display: flex;
  overflow: hidden;
}

.workspaceResizing {
  user-select: none;
}

.workspaceResize {
  flex: 0 0 6px;
  width: 6px;
  cursor: ew-resize;
  position: relative;
  z-index: 5;
}

.workspaceResize::before {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  left: 2px;
  width: 2px;
  border-radius: 2px;
  background: rgba(255, 255, 255, 0.08);
}

.workspaceResize:hover::before,
.workspaceResizing .workspaceResize::before {
  background: rgba(107, 138, 253, 0.35);
}

.terminalPane {
  position: relative;
  flex: 1 1 0;
  min-width: 0;
  min-height: 0;
  overflow: hidden;
  /* Performance: strictest containment for terminal */
  contain: strict;
  /* GPU layer for smooth compositing */
  transform: translateZ(0);
  backface-visibility: hidden;
  transition: box-shadow 0.15s ease;
}

.terminalPane--dragOver {
  box-shadow: inset 0 0 0 2px rgba(0, 187, 255, 0.5);
}

/* When TeamView is open, remove all containment and transform so
   position:fixed children escape to the viewport correctly. */
.terminalPane--teamView {
  contain: none;
  transform: none;
  overflow: visible;
}

.terminalContainer {
  position: absolute;
  inset: 0;
  padding: 10px 0 10px 10px;
  /* Neutralize body CSS zoom so xterm.js mouse coordinates match correctly.
     Without this, selection/highlight is offset from the actual cursor position. */
  zoom: calc(1 / var(--app-zoom-scale));
}

.terminalHidden {
  visibility: hidden;
  pointer-events: none;
}

/* ---- Terminal Empty State ---- */
.terminalEmptyState {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 20px;
  font-family: var(--style-font-ui);
  user-select: none;
}

.terminalEmptyAscii {
  white-space: pre;
  font-size: 11px;
  line-height: 1.35;
  color: rgba(var(--theme-primary-rgb), 0.18);
  text-align: center;
  letter-spacing: 1px;
}

.terminalEmptyPrompt {
  font-size: 14px;
  color: var(--theme-primary);
}

.terminalEmptyCaretLine {
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.terminalEmptyCaret {
  color: var(--theme-primary);
  font-weight: 700;
  animation: caretPulse 1.2s step-end infinite;
}

.terminalEmptyTyping {
  color: rgba(var(--theme-primary-rgb), 0.7);
  animation: blinkUnderscore 1s step-end infinite;
}

.terminalEmptyHint {
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.35);
  letter-spacing: 0.5px;
}

@keyframes caretPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.3; }
}

@keyframes blinkUnderscore {
  0%, 100% { border-right: 2px solid var(--theme-primary); }
  50% { border-right: 2px solid transparent; }
}

.rightPanel .fileExplorerPanel {
  width: 100%;
  flex: 1;
  border-left: none;
  /* rightPanel has the border */
  background: transparent;
  /* match panel bg */
}

/* File Explorer + Editor */
.fileExplorerPanel {
  width: var(--workspaceFileTreeWidthPx, 320px);
  flex: 0 1 var(--workspaceFileTreeWidthPx, 320px);
  min-width: 200px;
  min-height: 0;
  display: flex;
  flex-direction: column;
  border-left: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(15, 22, 32, 0.92), rgba(10, 14, 20, 0.98));
}

.fileExplorerHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.fileExplorerTitle {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
  font-size: 12px;
}

.fileExplorerPath {
  color: var(--muted);
  font-family: var(--style-font-code);
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
}

.fileExplorerActions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.fileExplorerList {
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding: 6px 0;
}

.fileExplorerListDropTarget {
  outline: 1px dashed rgba(34, 211, 238, 0.55);
  outline-offset: -2px;
  background: rgba(34, 211, 238, 0.06);
}

.fileExplorerRow {
  width: 100%;
  border: 0;
  background: transparent;
  color: var(--text);
  padding: 6px 10px;
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  cursor: pointer;
  text-align: left;
}

.fileExplorerRow:hover {
  background: rgba(255, 255, 255, 0.04);
}

.fileExplorerRowActive {
  background: rgba(107, 138, 253, 0.12);
}

.fileExplorerRowContext {
  background: rgba(255, 255, 255, 0.06);
}

.fileContextMenu {
  position: fixed;
  min-width: 220px;
  max-width: 280px;
  padding: 6px;
  border: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(17, 24, 34, 0.98), rgba(10, 14, 20, 0.98));
  border-radius: 12px;
  box-shadow: 0 18px 50px rgba(0, 0, 0, 0.55);
  z-index: 640;
}

.fileContextMenuSep {
  height: 1px;
  background: var(--border-subtle);
  margin: 6px 4px;
}

.fileContextMenuItemDanger {
  color: rgba(255, 130, 130, 0.95);
}

.fileContextMenuItemDanger:hover {
  border-color: rgba(255, 80, 80, 0.35);
  background: rgba(255, 80, 80, 0.12);
}

.fileExplorerDisclosure {
  width: 12px;
  flex-shrink: 0;
  color: var(--muted);
}

.fileExplorerIcon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  opacity: 0.85;
}

.fileExplorerName {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.fileExplorerMeta {
  color: var(--muted);
}

.fileExplorerError {
  color: rgba(255, 120, 120, 0.95);
}

.fileExplorerRowDropTarget {
  background: rgba(34, 211, 238, 0.18);
  border-color: rgba(34, 211, 238, 0.45);
  outline: 1px dashed rgba(34, 211, 238, 0.6);
  outline-offset: -1px;
}

.fileExplorerRowDragging {
  opacity: 0.5;
}

.fileExplorerRowPreparing {
  opacity: 0.7;
  cursor: progress;
}

.codeEditorPanel {
  width: var(--workspaceEditorWidthPx, 520px);
  flex: 0 1 var(--workspaceEditorWidthPx, 520px);
  min-width: 260px;
  min-height: 0;
  display: flex;
  flex-direction: column;
  border-left: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(12, 18, 26, 0.9), rgba(10, 14, 20, 0.96));
}

.codeEditorHeader {
  position: relative;
  z-index: 1;
  display: grid;
  grid-template-columns: minmax(0, 1fr) auto;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.02);
}

.codeEditorTabsWrapper {
  position: relative;
  display: flex;
  align-items: stretch;
  min-width: 0;
  flex: 1;
}

.codeEditorTabs {
  display: flex;
  align-items: stretch;
  gap: 0;
  min-width: 0;
  overflow-x: auto;
  scroll-behavior: smooth;
  scrollbar-width: none;
}

.codeEditorTabs::-webkit-scrollbar {
  display: none;
}

.codeEditorTabsScrollBtn {
  position: absolute;
  top: 0;
  bottom: 0;
  width: 28px;
  border: 0;
  background: linear-gradient(90deg, rgba(16, 21, 30, 0.95), rgba(16, 21, 30, 0.4));
  color: rgba(255, 255, 255, 0.75);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  transition: color 0.1s ease, opacity 0.15s ease;
}

.codeEditorTabsScrollBtn:hover {
  color: rgba(255, 255, 255, 0.95);
}

.codeEditorTabsScrollBtn:active {
  color: var(--accent);
}

.codeEditorTabsScrollBtnLeft {
  left: 0;
  background: linear-gradient(90deg, rgba(16, 21, 30, 0.95), transparent);
}

.codeEditorTabsScrollBtnRight {
  right: 0;
  background: linear-gradient(270deg, rgba(16, 21, 30, 0.95), transparent);
}

.codeEditorTab {
  display: flex;
  align-items: center;
  border: 0;
  border-right: 1px solid rgba(255, 255, 255, 0.06);
  border-bottom: 2px solid transparent;
  background: rgba(255, 255, 255, 0.01);
  border-radius: 0;
  overflow: hidden;
  flex-shrink: 0;
  min-width: 100px;
  max-width: 260px;
}

.codeEditorTab:last-child {
  border-right: 0;
}

.codeEditorTabActive {
  background: rgba(255, 255, 255, 0.04);
  border-bottom-color: rgba(107, 138, 253, 0.6);
}

.codeEditorTabMain {
  border: 0;
  background: transparent;
  color: var(--text);
  padding: 7px 10px;
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  min-width: 0;
}

.codeEditorTabTitle {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.codeEditorTabTitleSuffix {
  opacity: 0.6;
  font-size: 11px;
}

.codeEditorTabDirty {
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: rgba(255, 100, 100, 0.95);
  flex-shrink: 0;
}

.codeEditorTabClose {
  border: 0;
  background: transparent;
  color: rgba(255, 255, 255, 0.65);
  min-width: 24px;
  min-height: 24px;
  width: 28px;
  height: 28px;
  padding: 0;
  margin-right: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  border-radius: 4px;
  transition: background 0.1s ease, color 0.1s ease;
}

.codeEditorTabClose:hover {
  color: rgba(255, 255, 255, 0.95);
  background: rgba(255, 80, 80, 0.18);
}

.codeEditorTabClose:active {
  background: rgba(255, 80, 80, 0.25);
}

.codeEditorTabsMenuRow {
  display: flex;
  align-items: center;
  gap: 6px;
}

.codeEditorTabsMenuDropdown {
  max-height: 340px;
  overflow: auto;
}

.codeEditorTabsMenuItem {
  flex: 1;
  min-width: 0;
}

.codeEditorTabsMenuItemText {
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  flex: 1;
}

.codeEditorTabsMenuItemActive {
  border-color: rgba(107, 138, 253, 0.35);
  background: rgba(107, 138, 253, 0.12);
}

.codeEditorTabsMenuClose {
  width: 30px;
  height: 30px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.codeEditorTabsMenuEmpty {
  padding: 10px 10px;
  color: var(--muted);
  font-size: 12px;
}

.codeEditorActions {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}

.codeEditorPathBar {
  padding: 3px 10px;
  font-size: 10px;
  color: var(--muted);
  font-family: var(--style-font-code);
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  background: rgba(0, 0, 0, 0.15);
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
}

.codeEditorBody {
  position: relative;
  z-index: 0;
  flex: 1;
  min-height: 0;
}

.codeEditorMonaco {
  position: absolute;
  inset: 0;
}

.codeEditorOverlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.38);
  color: rgba(255, 255, 255, 0.92);
  font-size: 13px;
  backdrop-filter: blur(2px);
}

.codeEditorSaveError {
  position: absolute;
  bottom: 10px;
  right: 10px;
  border: 1px solid rgba(255, 80, 80, 0.35);
  background: rgba(255, 80, 80, 0.12);
  color: rgba(255, 255, 255, 0.9);
  padding: 6px 10px;
  border-radius: 12px;
  font-size: 12px;
  z-index: 4;
}

.modalBackdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 500;
}

.modalBackdropTop {
  z-index: 650;
}

.modal {
  width: min(520px, calc(100% - 24px));
  border: 1px solid var(--border);
  background: linear-gradient(180deg, rgba(17, 24, 34, 0.98), rgba(10, 14, 20, 0.98));
  border-radius: 16px;
  padding: 14px;
}

.modalTitle {
  font-size: 14px;
  margin: 0 0 10px 0;
}

.agentShortcutEditorSection {
  margin-top: 12px;
}

.agentShortcutEditorTitle {
  font-size: 11px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.08em;
  margin-bottom: 6px;
}

.agentShortcutEditorList {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.agentShortcutEditorItem {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 12px;
  padding: 8px 8px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.agentShortcutEditorMain {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.agentShortcutEditorIcon {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  display: block;
}

.agentShortcutEditorIconFallback {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  font-size: 12px;
}

.agentShortcutEditorName {
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.agentShortcutEditorActions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.agentShortcutAddRow {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.agentShortcutAddBtn {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 6px 8px;
  border-radius: var(--radius-control);
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
}

.agentShortcutAddBtn:hover {
  background: rgba(255, 255, 255, 0.06);
  border-color: rgba(255, 255, 255, 0.14);
}

.agentShortcutAddIcon {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  display: block;
}

.agentShortcutAddIconFallback {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  font-size: 11px;
}

.agentShortcutAddLabel {
  line-height: 1;
}

.formRow {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 10px;
}

.checkRow {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: var(--text);
  user-select: none;
}

.checkRow input[type="checkbox"] {
  width: 14px;
  height: 14px;
  accent-color: var(--accent);
}

.checkRow input[type="radio"] {
  width: 14px;
  height: 14px;
  accent-color: var(--accent);
}

.pathRow {
  display: flex;
  gap: 8px;
  align-items: stretch;
}

.pathRow .input {
  flex: 1;
  min-width: 0;
}

.pathRow .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 12px;
  border-radius: 12px;
}

.pathActions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 6px;
}

.btnSmall {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  color: var(--text);
  padding: 6px 8px;
  border-radius: var(--radius-control);
  cursor: pointer;
  font-size: 12px;
  transition: background 0.15s ease, border-color 0.15s ease, transform 0.05s ease;
}

.btnSmall.btnIcon {
  width: 32px;
  height: 32px;
  padding: 0;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  line-height: 1;
}

.btnSmall.btnRecording {
  border-color: rgba(255, 80, 80, 0.35);
  background: rgba(255, 80, 80, 0.12);
  color: rgba(255, 255, 255, 0.92);
}

.btnSmall.btnDanger {
  border-color: rgba(255, 80, 80, 0.35);
  background: rgba(255, 80, 80, 0.1);
  color: rgba(255, 255, 255, 0.92);
}

.btnSmall.btnDanger:hover {
  background: rgba(255, 80, 80, 0.14);
}

.btnSmall:hover {
  background: rgba(255, 255, 255, 0.06);
}

.btnSmall:active {
  transform: translateY(1px);
}

.btnSmall:disabled {
  cursor: not-allowed;
  opacity: 0.5;
}

.pathPickerHeader {
  display: flex;
  gap: 8px;
  align-items: stretch;
  margin-bottom: 10px;
}

.pathPickerHeader .input {
  flex: 1;
  min-width: 0;
}

.pathPickerHeader .btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 10px 12px;
  border-radius: 12px;
}

.pathPickerError {
  font-size: 12px;
  color: rgba(255, 130, 130, 0.9);
  margin-bottom: 8px;
}

.pathPickerList {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 14px;
  padding: 10px;
  max-height: 260px;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.replayPreview {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 14px;
  padding: 10px;
  max-height: 180px;
  overflow: auto;
  white-space: pre-wrap;
  font-family:
    ui-monospace,
    SFMono-Regular,
    Menlo,
    Monaco,
    Consolas,
    "Liberation Mono",
    "Courier New",
    monospace;
  font-size: 12px;
  line-height: 1.35;
}

.replayPreviewFlow {
  max-height: 320px;
  white-space: normal;
  padding: 8px;
}

.replayFlow {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.replayFlowGroup {
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 12px;
  overflow: hidden;
}

.replayFlowGroupNext {
  border-color: rgba(107, 138, 253, 0.22);
  background: rgba(107, 138, 253, 0.08);
}

.replayFlowGroupNext .replayFlowGroupHeader:hover {
  background: rgba(107, 138, 253, 0.12);
}

.replayFlowGroupHeader {
  width: 100%;
  display: flex;
  align-items: baseline;
  gap: 8px;
  padding: 8px 10px;
  cursor: pointer;
  border: none;
  background: transparent;
  color: inherit;
  font: inherit;
  text-align: left;
}

.replayFlowGroupHeader:hover {
  background: rgba(255, 255, 255, 0.04);
}

.replayFlowCaret {
  width: 16px;
  flex: 0 0 16px;
  color: rgba(255, 255, 255, 0.6);
}

.replayFlowTime {
  flex: 0 0 auto;
  font-size: 11px;
  color: rgba(255, 255, 255, 0.6);
}

.replayFlowRange {
  flex: 0 0 auto;
  font-size: 11px;
  color: rgba(255, 255, 255, 0.6);
}

.replayFlowCount {
  flex: 0 0 auto;
  font-size: 11px;
  padding: 1px 7px;
  border-radius: 999px;
  border: 1px solid rgba(107, 138, 253, 0.25);
  background: rgba(107, 138, 253, 0.12);
  color: rgba(107, 138, 253, 0.95);
}

.replayFlowCountNext {
  border-color: rgba(107, 138, 253, 0.45);
  background: rgba(107, 138, 253, 0.22);
  color: rgba(255, 255, 255, 0.95);
}

.replayFlowPreview {
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.replayFlowItems {
  padding: 0 10px 10px 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.replayFlowItem {
  display: flex;
  gap: 8px;
  align-items: flex-start;
}

.replayFlowItemNext {
  border-radius: 10px;
  padding: 6px 8px;
  border: 1px solid rgba(107, 138, 253, 0.35);
  background: rgba(107, 138, 253, 0.12);
}

.replayFlowItemSent {
  opacity: 0.55;
}

.replayFlowItemMarker {
  width: 20px;
  flex: 0 0 20px;
  color: rgba(255, 255, 255, 0.25);
}

.replayFlowItemIndex {
  width: 42px;
  flex: 0 0 42px;
  text-align: right;
  color: rgba(255, 255, 255, 0.55);
}

.replayFlowNextBadge {
  display: inline-block;
  margin-left: 6px;
  padding: 1px 6px;
  border-radius: 999px;
  border: 1px solid rgba(107, 138, 253, 0.35);
  background: rgba(107, 138, 253, 0.16);
  color: rgba(255, 255, 255, 0.92);
  font-size: 10px;
  line-height: 1.4;
  vertical-align: middle;
}

.replayFlowItemText {
  margin: 0;
  flex: 1;
  min-width: 0;
  white-space: pre-wrap;
  font: inherit;
}

.recordingsModal {
  width: min(760px, calc(100% - 24px));
}

.recordingsList {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 14px;
  padding: 10px;
  max-height: 320px;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.recordingItem {
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.03);
  border-radius: 14px;
  padding: 10px 12px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.recordingMain {
  flex: 1;
  min-width: 0;
}

.recordingName {
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.recordingMeta {
  font-size: 11px;
  color: var(--muted);
  margin-top: 3px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.recordingActions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
}

.pathPickerItem {
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  border-radius: 14px;
  padding: 0 12px;
  min-height: 40px;
  display: flex;
  align-items: center;
  font: inherit;
  cursor: pointer;
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-size: 13px;
  line-height: 1.1;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

.pathPickerItem:hover {
  border-color: rgba(107, 138, 253, 0.35);
  background: rgba(107, 138, 253, 0.08);
}

.pathPickerItem:active {
  transform: translateY(1px);
}

.label {
  font-size: 12px;
  color: var(--muted);
}

.input {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  outline: none;
}

.input:focus {
  border-color: rgba(107, 138, 253, 0.5);
}

select.input {
  -webkit-appearance: none;
  appearance: none;
  cursor: pointer;
  padding-right: 38px;
  background-image:
    linear-gradient(45deg, transparent 50%, rgba(255, 255, 255, 0.55) 50%),
    linear-gradient(135deg, rgba(255, 255, 255, 0.55) 50%, transparent 50%);
  background-position:
    calc(100% - 18px) 50%,
    calc(100% - 12px) 50%;
  background-size: 6px 6px;
  background-repeat: no-repeat;
}

.textarea {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  outline: none;
  resize: vertical;
  min-height: 180px;
  font-family:
    ui-monospace,
    SFMono-Regular,
    Menlo,
    Monaco,
    Consolas,
    "Liberation Mono",
    "Courier New",
    monospace;
  font-size: 12px;
  line-height: 1.35;
}

.textarea:focus {
  border-color: rgba(107, 138, 253, 0.5);
}

.modalActions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 12px;
}

.hint {
  font-size: 12px;
  color: var(--muted);
  margin-top: 6px;
}

/* Slide Panel */
.slidePanel {
  position: absolute;
  top: 10px;
  right: 10px;
  bottom: 10px;
  background: linear-gradient(180deg, rgba(15, 22, 32, 0.92), rgba(18, 27, 38, 0.92));
  border: 1px solid rgba(255, 255, 255, 0.09);
  border-radius: 16px;
  box-shadow: -18px 0 44px rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(14px) saturate(1.15);
  display: flex;
  flex-direction: column;
  z-index: 100;
  animation: slidePanelIn 0.2s ease-out;
}

@keyframes slidePanelIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.slidePanelResizing {
  user-select: none;
}

.slidePanelResize {
  position: absolute;
  left: -4px;
  top: 0;
  bottom: 0;
  width: 8px;
  cursor: ew-resize;
  z-index: 10;
}

.slidePanelResize:hover,
.slidePanelResizing .slidePanelResize {
  background: linear-gradient(90deg, transparent, rgba(107, 138, 253, 0.2), transparent);
}

.slidePanelHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(0, 0, 0, 0.12);
  gap: 10px;
}

.slidePanelTabs {
  display: flex;
  gap: 4px;
  background: rgba(255, 255, 255, 0.03);
  padding: 4px;
  border-radius: var(--radius-control);
}

.slidePanelTab {
  border: none;
  background: transparent;
  color: var(--muted);
  padding: 6px 12px;
  border-radius: var(--radius-control);
  cursor: pointer;
  font-size: 12px;
  transition: all 0.15s ease;
}

.slidePanelTab:hover {
  color: var(--text);
  background: rgba(255, 255, 255, 0.04);
}

.slidePanelTabActive {
  color: var(--text);
  background: rgba(107, 138, 253, 0.15);
}

.slidePanelClose {
  border: 1px solid var(--border);
  background: transparent;
  color: var(--muted);
  padding: 4px 10px;
  border-radius: var(--radius-control);
  cursor: pointer;
  font-size: 14px;
}

.slidePanelClose:hover {
  color: var(--text);
  background: rgba(255, 255, 255, 0.05);
}

.slidePanelContent {
  flex: 1;
  overflow: auto;
  padding: 12px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Panel Search */
.panelSearch {
  position: relative;
}

.panelSearchInput {
  width: 100%;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 10px 12px 10px 36px;
  border-radius: 10px;
  outline: none;
  font-size: 13px;
}

.panelSearchInput:focus {
  border-color: rgba(107, 138, 253, 0.5);
}

.panelSearchInput::placeholder {
  color: var(--muted);
}

.panelSearchIcon {
  position: absolute;
  left: 12px;
  top: 50%;
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--muted);
  pointer-events: none;
}

/* Panel List */
.panelList {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.panelSection {
  margin-top: 8px;
}

.panelSectionTitle {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
  padding: 0 4px;
  margin-bottom: 8px;
}

/* Panel Cards */
.panelCard {
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 12px;
  padding: 10px 12px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.panelCard:hover {
  border-color: rgba(107, 138, 253, 0.3);
  background: rgba(107, 138, 253, 0.06);
}

.panelCardHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.panelCardPin {
  color: rgba(255, 200, 50, 0.8);
  font-size: 12px;
}

.panelCardTitle {
  font-size: 13px;
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.panelCardMeta {
  font-size: 11px;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.panelCardPreview {
  font-size: 11px;
  color: var(--muted);
  margin-top: 6px;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  line-height: 1.4;
}

.panelCardActions {
  display: flex;
  gap: 6px;
  margin-top: 8px;
  opacity: 0;
  transform: translateY(2px);
  transition: opacity 0.15s ease, transform 0.15s ease;
}

.panelCard:hover .panelCardActions,
.panelCard:focus-within .panelCardActions {
  opacity: 1;
  transform: translateY(0);
}

.panelCardBtn {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 4px 8px;
  border-radius: var(--radius-control);
  cursor: pointer;
  font-size: 11px;
  transition: background 0.15s ease, border-color 0.15s ease, transform 0.05s ease;
}

.panelCardBtn:hover {
  background: rgba(255, 255, 255, 0.08);
}

.panelCardBtn:active {
  transform: translateY(1px);
}

.panelCardBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.panelCardBtn.panelCardBtnDanger {
  border-color: rgba(255, 80, 80, 0.35);
  background: rgba(255, 80, 80, 0.1);
  color: rgba(255, 255, 255, 0.92);
}

.panelCardBtn.panelCardBtnDanger:hover {
  background: rgba(255, 80, 80, 0.14);
}

/* Panel Footer */
.panelFooter {
  padding-top: 12px;
  border-top: 1px solid var(--border);
  margin-top: auto;
}

.panelFooterBtn {
  width: 100%;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 10px 12px;
  border-radius: var(--radius-control);
  cursor: pointer;
  font-size: 13px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.panelFooterBtn:hover {
  background: rgba(255, 255, 255, 0.06);
}

/* Date Group Headers */
.dateGroupHeader {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--muted);
  padding: 8px 4px 6px;
  border-bottom: 1px solid var(--border);
  margin-bottom: 8px;
}

/* ------------------------------------------------------------------ */
/*  Theme Switcher                                                     */
/* ------------------------------------------------------------------ */

.themeSwitcher {
  padding: 12px;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid var(--border);
  border-radius: var(--radius-control);
}

.themeSwitcherLabel {
  font-size: 12px;
  color: var(--muted);
  margin-bottom: 12px;
  font-weight: 500;
}

.themeSwitcherGrid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
}

.themeSwitcherOption {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  border-radius: var(--radius-control);
  cursor: pointer;
  transition: all 0.15s ease;
}

.themeSwitcherOption:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.15);
}

.themeSwitcherOptionActive {
  border-color: var(--swatch-color);
  background: rgba(255, 255, 255, 0.04);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.15);
}

.themeSwitcherSwatch {
  width: 20px;
  height: 20px;
  border-radius: 50%;
  background: var(--swatch-color);
  box-shadow: 0 0 8px var(--swatch-color);
  flex-shrink: 0;
}

.themeSwitcherName {
  font-size: 12px;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.themeSwitcherOptionActive .themeSwitcherName {
  color: var(--swatch-color);
}

/* ---- Style Switcher (App Style Picker) ---- */

.styleSwitcherGrid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  margin-bottom: 4px;
}

.styleSwitcherOption {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 14px;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  border-radius: var(--radius-control);
  cursor: pointer;
  transition: all var(--style-transition, 0.15s ease);
  font-family: var(--style-font-ui);
}

.styleSwitcherOption:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.15);
}

.styleSwitcherOptionActive {
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
  box-shadow: var(--style-shadow-glow);
}

.styleSwitcherIcon {
  font-size: 14px;
  font-weight: 700;
  color: var(--muted);
  min-width: 22px;
  text-align: center;
  font-family: var(--style-font-code);
}

.styleSwitcherOptionActive .styleSwitcherIcon {
  color: var(--theme-primary);
}

.styleSwitcherName {
  font-size: 12px;
  color: var(--text);
  font-weight: 500;
}

.styleSwitcherOptionActive .styleSwitcherName {
  color: var(--theme-primary);
}

/* ---- Style-specific overrides for theme switcher ---- */

html[data-style="material"] .themeSwitcherSwatch {
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.3);
}

html[data-style="material"] .themeSwitcherOptionActive {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

html[data-style="glass"] .themeSwitcher {
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: var(--style-backdrop);
  -webkit-backdrop-filter: var(--style-backdrop);
}

html[data-style="glass"] .themeSwitcherSwatch {
  box-shadow: 0 0 12px var(--swatch-color), inset 0 0 4px rgba(255, 255, 255, 0.2);
}

html[data-style="minimal"] .themeSwitcherSwatch {
  box-shadow: none;
  border: 2px solid var(--swatch-color);
}

html[data-style="minimal"] .themeSwitcherOptionActive {
  box-shadow: none;
}

/* Command Palette */
.commandPaletteBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 15vh;
  z-index: 1000;
  animation: fadeIn 0.1s ease-out;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

.commandPalette {
  width: min(560px, calc(100% - 32px));
  background: linear-gradient(180deg, rgba(20, 28, 40, 0.98), rgba(12, 18, 26, 0.98));
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 14px;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
  overflow: hidden;
  animation: commandPaletteIn 0.15s ease-out;
}

@keyframes commandPaletteIn {
  from {
    transform: translateY(-10px) scale(0.98);
    opacity: 0;
  }

  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.commandPaletteSearch {
  display: flex;
  align-items: center;
  padding: 14px 16px;
  border-bottom: 1px solid var(--border);
  gap: 10px;
}

.commandPaletteSearchIcon {
  color: var(--accent);
  font-size: 14px;
  font-family: var(--style-font-code);
}

.commandPaletteInput {
  flex: 1;
  border: none;
  background: transparent;
  color: var(--text);
  font-size: 15px;
  outline: none;
}

.commandPaletteInput::placeholder {
  color: var(--muted);
}

.commandPaletteList {
  max-height: 380px;
  overflow: auto;
  padding: 8px;
}

.commandPaletteEmpty {
  text-align: center;
  color: var(--muted);
  padding: 24px 16px;
  font-size: 13px;
}

.commandPaletteGroup {
  margin-bottom: 8px;
}

.commandPaletteGroupLabel {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
  padding: 8px 10px 6px;
}

.commandPaletteItem {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.1s ease;
}

.commandPaletteItem:hover {
  background: rgba(255, 255, 255, 0.04);
}

.commandPaletteItemSelected {
  background: rgba(107, 138, 253, 0.12);
}

.commandPaletteItemIcon {
  width: 20px;
  text-align: center;
  color: var(--muted);
  font-size: 12px;
}

.commandPaletteItemIconImg {
  width: 16px;
  height: 16px;
  display: block;
  margin: 0 auto;
}

.commandPaletteItemIcon.iconPinned {
  color: rgba(255, 200, 50, 0.85);
}

.commandPaletteItemIcon.iconRecording {
  color: rgba(255, 80, 80, 0.85);
}

.commandPaletteItemIcon.iconActive {
  color: var(--accent);
}

.commandPaletteItemContent {
  flex: 1;
  min-width: 0;
}

.commandPaletteItemTitle {
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.commandPaletteItemSubtitle {
  font-size: 11px;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 2px;
}

.commandPaletteItemShortcut {
  font-size: 11px;
  color: var(--muted);
  background: rgba(255, 255, 255, 0.06);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: var(--style-font-code);
}

.commandPaletteFooter {
  padding: 10px 16px;
  border-top: 1px solid var(--border);
  background: rgba(0, 0, 0, 0.15);
}

.commandPaletteHint {
  font-size: 11px;
  color: var(--muted);
  display: flex;
  gap: 12px;
  align-items: center;
}

.commandPaletteHint kbd {
  background: rgba(255, 255, 255, 0.08);
  padding: 2px 5px;
  border-radius: 3px;
  font-family: var(--style-font-code);
  font-size: 10px;
  margin-right: 4px;
}

/* Quick Prompts Sidebar */
.quickPromptsSection {
  margin-bottom: 8px;
}

.quickPromptItem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: var(--radius-control);
  border: 1px solid transparent;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.02);
  font-size: 12px;
  transition: all 0.15s ease;
}

.quickPromptItem:hover {
  border-color: rgba(107, 138, 253, 0.35);
  background: rgba(107, 138, 253, 0.08);
}

.quickPromptIcon {
  color: rgba(255, 200, 50, 0.7);
  font-size: 10px;
}

.quickPromptTitle {
  flex: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.quickPromptShortcut {
  font-size: 10px;
  color: var(--muted);
  font-family: var(--style-font-code);
}

/* Icon Buttons for Topbar */
.iconBtn {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.02);
  color: var(--text);
  padding: 6px 8px;
  border-radius: var(--radius-control);
  cursor: pointer;
  font-size: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
  white-space: nowrap;
  transition: all 0.15s ease;
}

.iconBtn.iconBtnText {
  font-size: 12px;
  padding: 6px 10px;
}

.iconBtn:hover {
  background: rgba(255, 255, 255, 0.06);
}

.iconBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.iconBtn.iconBtnRecording {
  border-color: rgba(255, 80, 80, 0.4);
  background: rgba(255, 80, 80, 0.12);
  color: rgba(255, 100, 100, 0.95);
}

.iconBtn.iconBtnActive {
  border-color: rgba(107, 138, 253, 0.4);
  background: rgba(107, 138, 253, 0.12);
}

/* Recording Timer */
.recordingTimer {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 12px;
  color: rgba(255, 100, 100, 0.9);
  padding: 4px 10px;
  background: rgba(255, 80, 80, 0.1);
  border: 1px solid rgba(255, 80, 80, 0.25);
  border-radius: 8px;
}

.recordingTimerDot {
  width: 6px;
  height: 6px;
  background: rgba(255, 80, 80, 0.9);
  border-radius: 50%;
  animation: recordingPulse 1.2s ease-in-out infinite;
}

/* Keyboard Shortcut Hint */
.shortcutHint {
  font-size: 11px;
  color: var(--muted);
  display: flex;
  align-items: center;
  gap: 4px;
}

.shortcutHint kbd {
  background: rgba(255, 255, 255, 0.06);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: var(--style-font-code);
}

/* SSH Modal */
.sshModal {
  width: min(720px, calc(100% - 24px));
}

.sshHeader {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 12px;
}

.sshHeaderIcon {
  width: 38px;
  height: 38px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  border: 1px solid rgba(34, 211, 238, 0.22);
  background: linear-gradient(180deg, rgba(34, 211, 238, 0.14), rgba(107, 138, 253, 0.08));
  box-shadow: 0 12px 26px rgba(0, 0, 0, 0.35);
  color: rgba(255, 255, 255, 0.92);
  flex: 0 0 auto;
}

.sshHeaderIcon svg {
  filter: none;
}

.sshHeaderText {
  min-width: 0;
}

.sshHostRow {
  display: flex;
  gap: 8px;
  align-items: center;
}

.sshHostRow .input {
  flex: 1;
  min-width: 0;
}

.sshHostList {
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 12px;
  padding: 10px;
  margin-top: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.sshHostListHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.sshHostListHeaderTitle {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: var(--muted);
}

.sshHostListHeaderMeta {
  font-size: 10px;
  color: rgba(255, 255, 255, 0.75);
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(0, 0, 0, 0.15);
  padding: 2px 6px;
  border-radius: 8px;
  white-space: nowrap;
}

.sshHostListEmpty {
  font-size: 12px;
  color: var(--muted);
  padding: 6px 2px;
}

.sshHostListItems {
  max-height: 190px;
  overflow: auto;
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding-right: 2px;
}

.sshHostItem {
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.02);
  color: var(--text);
  padding: 10px 10px;
  border-radius: var(--radius-control);
  cursor: pointer;
  text-align: left;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  transition: background 0.15s ease, border-color 0.15s ease;
}

.sshHostItem:hover {
  border-color: rgba(34, 211, 238, 0.28);
  background: rgba(34, 211, 238, 0.06);
}

.sshHostItemActive {
  border-color: rgba(34, 211, 238, 0.45);
  background: rgba(34, 211, 238, 0.08);
}

.sshHostItemMain {
  min-width: 0;
}

.sshHostAlias {
  font-size: 13px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.sshHostMeta {
  font-size: 11px;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 2px;
}

.sshHostPick {
  width: 18px;
  height: 18px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border-radius: 8px;
  color: rgba(255, 255, 255, 0.85);
  background: rgba(34, 211, 238, 0.12);
  border: 1px solid rgba(34, 211, 238, 0.2);
}

.sshHostItem:not(.sshHostItemActive) .sshHostPick {
  background: transparent;
  border-color: transparent;
  color: transparent;
}

.sshOptionGrid {
  display: flex;
  flex-direction: column;
  gap: 8px;
  padding: 10px 10px;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.02);
  border-radius: 12px;
}

.sshForwardList {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
}

.sshForwardRow {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-wrap: wrap;
  border: 1px solid rgba(255, 255, 255, 0.06);
  background: rgba(255, 255, 255, 0.02);
  padding: 10px 10px;
  border-radius: 12px;
}

.sshForwardType {
  width: 120px;
  flex: 0 0 auto;
}

.sshForwardBind {
  width: 140px;
  flex: 0 0 auto;
}

.sshForwardPort {
  width: 90px;
  flex: 0 0 auto;
}

.sshForwardDestHost {
  flex: 1 1 180px;
  min-width: 180px;
}

.sshForwardSpacer {
  flex: 1 1 280px;
  min-width: 180px;
}

.sshForwardRemove {
  flex: 0 0 auto;
}

.sshForwardActions {
  margin-top: 10px;
  display: flex;
  justify-content: flex-end;
}

.sshCommandPreview {
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(0, 0, 0, 0.18);
  border-radius: 12px;
  padding: 10px 10px;
  display: flex;
  gap: 10px;
  align-items: flex-start;
  justify-content: space-between;
}

.sshCommandPreviewText {
  margin: 0;
  flex: 1;
  min-width: 0;
  white-space: pre-wrap;
  word-break: break-word;
  font-family:
    ui-monospace,
    SFMono-Regular,
    Menlo,
    Monaco,
    Consolas,
    "Liberation Mono",
    "Courier New",
    monospace;
  font-size: 12px;
  line-height: 1.35;
  color: rgba(255, 255, 255, 0.88);
}

.sshCommandPreviewActions {
  flex: 0 0 auto;
  display: flex;
  gap: 8px;
  align-items: center;
}

.btn.btnPrimary {
  border-color: rgba(107, 138, 253, 0.45);
  background: linear-gradient(180deg, rgba(107, 138, 253, 0.18), rgba(34, 211, 238, 0.1));
}

.btn.btnPrimary:hover {
  background: linear-gradient(180deg, rgba(107, 138, 253, 0.22), rgba(34, 211, 238, 0.12));
}

/* ===================================
   MAESTRO PANEL STYLES - REDESIGNED
   =================================== */

/* Main Maestro Panel */
.maestroPanel {
  /* Previously fixed position, now filling parent */
  width: 100%;
  height: 100%;
  background:
    radial-gradient(ellipse 120% 80% at 100% 0%, rgba(107, 138, 253, 0.04), transparent 50%),
    radial-gradient(ellipse 80% 60% at 0% 100%, rgba(34, 211, 238, 0.02), transparent 40%),
    linear-gradient(180deg,
      var(--style-surface-1, rgba(16, 21, 30, 0.98)),
      var(--style-surface-1, rgba(10, 14, 22, 0.98)));
  display: flex;
  flex-direction: column;
  overflow: hidden;
  /* Performance: isolate layout and contain paint */
  contain: layout style paint;
}

@keyframes slideInFromRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }

  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.maestroPanelHeader {
  flex: 0 0 auto;
  padding: 20px 20px 16px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  align-items: center;
  justify-content: space-between;
  background:
    radial-gradient(600px 300px at 90% 0%, rgba(107, 138, 253, 0.06), transparent 60%);
  position: relative;
}

.maestroPanelTitle {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.maestroPanelTitle svg {
  font-size: 20px;
  color: var(--accent);
  filter: drop-shadow(0 2px 8px rgba(107, 138, 253, 0.3));
}

.maestroPanelTitle h2 {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, var(--text), rgba(240, 244, 248, 0.85));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.maestroPanelProjectName {
  font-size: 11px;
  color: rgba(240, 244, 248, 0.6);
  padding: 3px 10px;
  border-radius: 999px;
  border: 1px solid rgba(107, 138, 253, 0.2);
  background: linear-gradient(135deg, rgba(107, 138, 253, 0.08), rgba(34, 211, 238, 0.05));
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-weight: 500;
  letter-spacing: 0.01em;
}

.maestroPanelClose {
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  font-size: 26px;
  line-height: 1;
  width: 36px;
  height: 36px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.maestroPanelClose:hover {
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.08);
  color: var(--text);
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}

/* Actions Section */
.maestroPanelActions {
  flex: 0 0 auto;
  padding: 16px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
  background: rgba(0, 0, 0, 0.1);
}

.maestroPanelStats {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-left: auto;
  font-size: 11px;
  color: rgba(240, 244, 248, 0.5);
  font-weight: 500;
}

.maestroStat {
  white-space: nowrap;
  padding: 4px 8px;
  border-radius: var(--style-radius-sm, 6px);
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.04);
  letter-spacing: 0.01em;
}

/* Filters */
.maestroFilters {
  flex: 0 0 auto;
  padding: 14px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  display: flex;
  flex-direction: column;
  gap: 12px;
  background: rgba(255, 255, 255, 0.01);
}

.maestroFiltersSection {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.maestroFiltersLabel {
  font-size: 11px;
  color: rgba(240, 244, 248, 0.5);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  min-width: 65px;
  font-weight: 600;
}

.maestroFilterButtons {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
  background: rgba(0, 0, 0, 0.12);
  padding: 4px;
  border-radius: var(--style-radius-md, 10px);
  border: 1px solid rgba(255, 255, 255, 0.03);
}

.maestroFilterButton {
  border: 1px solid transparent;
  background: transparent;
  color: rgba(240, 244, 248, 0.6);
  padding: 5px 11px;
  border-radius: 7px;
  cursor: pointer;
  font-size: 11px;
  font-weight: 500;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  white-space: nowrap;
  letter-spacing: 0.01em;
}

.maestroFilterButton:hover {
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
}

.maestroFilterButtonActive {
  background: linear-gradient(135deg, rgba(107, 138, 253, 0.12), rgba(34, 211, 238, 0.06));
  border-color: rgba(107, 138, 253, 0.2);
  color: var(--text);
  box-shadow:
    0 1px 4px rgba(107, 138, 253, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

.maestroFilterSelect {
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(0, 0, 0, 0.2);
  color: var(--text);
  padding: 6px 10px;
  border-radius: 7px;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.maestroFilterSelect:hover {
  border-color: rgba(107, 138, 253, 0.3);
  background: rgba(0, 0, 0, 0.3);
}

.maestroFilterSelect:focus {
  outline: none;
  border-color: rgba(107, 138, 253, 0.5);
  box-shadow: 0 0 0 3px rgba(107, 138, 253, 0.1);
}

/* Content Area */
.maestroPanelContent {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 16px 20px;
  min-width: 0;
}

/* Custom scrollbar for maestro panel */
.maestroPanelContent::-webkit-scrollbar {
  width: 6px;
}

.maestroPanelContent::-webkit-scrollbar-track {
  background: transparent;
}

.maestroPanelContent::-webkit-scrollbar-thumb {
  background: rgba(255, 255, 255, 0.08);
  border-radius: 3px;
}

.maestroPanelContent::-webkit-scrollbar-thumb:hover {
  background: rgba(255, 255, 255, 0.14);
}

/* Task List */
.maestroTaskList {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* Task Card - Redesigned */
.maestroTaskCard {
  border: 1px solid rgba(255, 255, 255, 0.06);
  background:
    linear-gradient(145deg,
      var(--style-surface-2, rgba(22, 27, 38, 0.95)),
      var(--style-surface-1, rgba(14, 18, 28, 0.95)));
  border-radius: var(--style-radius-lg, 14px);
  padding: 16px;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
  position: relative;
  overflow: hidden;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.12),
    0 4px 12px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(8px);
}

.maestroTaskCard::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 3px;
  height: 100%;
  opacity: 0.85;
  transition: all 0.25s ease;
  border-radius: 0 2px 2px 0;
}

.maestroTaskCard:hover {
  border-color: rgba(107, 138, 253, 0.18);
  background:
    linear-gradient(145deg,
      var(--style-surface-3, rgba(28, 33, 45, 0.95)),
      var(--style-surface-2, rgba(20, 25, 36, 0.95)));
  transform: translateY(-1px);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.2),
    0 8px 24px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.maestroTaskCardActive {
  border-color: rgba(107, 138, 253, 0.3);
  background:
    linear-gradient(145deg,
      rgba(107, 138, 253, 0.08),
      rgba(34, 211, 238, 0.03)),
    linear-gradient(145deg,
      var(--style-surface-2, rgba(22, 27, 38, 0.95)),
      var(--style-surface-1, rgba(14, 18, 28, 0.95)));
  box-shadow:
    0 4px 16px rgba(107, 138, 253, 0.12),
    0 8px 32px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.06);
}

.maestroTaskCard--in_progress::before {
  background: linear-gradient(180deg, #6b8afd, #22d3ee);
  box-shadow: 0 0 8px rgba(107, 138, 253, 0.35);
}

.maestroTaskCard--completed::before {
  background: linear-gradient(180deg, #10b981, #059669);
  box-shadow: 0 0 8px rgba(16, 185, 129, 0.25);
}

.maestroTaskCard--completed {
  opacity: 0.7;
}

.maestroTaskCard--in_review::before {
  background: linear-gradient(180deg, #a855f7, #8b5cf6);
  box-shadow: 0 0 8px rgba(168, 85, 247, 0.3);
}

.maestroTaskCard--blocked::before {
  background: linear-gradient(180deg, #ef4444, #dc2626);
  box-shadow: 0 0 8px rgba(239, 68, 68, 0.25);
}

.maestroTaskCard--todo::before {
  background: linear-gradient(180deg, rgba(148, 163, 184, 0.5), rgba(100, 116, 139, 0.4));
}

.maestroTaskCardHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 10px;
}

.maestroTaskCardStatus {
  display: flex;
  align-items: center;
  gap: 7px;
}

.maestroTaskCardStatusBadge {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 4px 9px;
  border-radius: var(--style-radius-sm, 6px);
  border: 1px solid;
  line-height: 1;
}

.maestroTaskCardStatusBadge--todo {
  background: rgba(148, 163, 184, 0.08);
  border-color: rgba(148, 163, 184, 0.15);
  color: rgba(203, 213, 225, 0.8);
}

.maestroTaskCardStatusBadge--in_progress {
  background: rgba(107, 138, 253, 0.1);
  border-color: rgba(107, 138, 253, 0.22);
  color: rgba(139, 174, 255, 0.95);
}

.maestroTaskCardStatusBadge--in_review {
  background: rgba(168, 85, 247, 0.08);
  border-color: rgba(168, 85, 247, 0.2);
  color: rgba(192, 132, 252, 0.9);
}

.maestroTaskCardStatusBadge--completed {
  background: rgba(16, 185, 129, 0.08);
  border-color: rgba(16, 185, 129, 0.2);
  color: rgba(52, 211, 153, 0.9);
}

.maestroTaskCardStatusBadge--blocked {
  background: rgba(239, 68, 68, 0.08);
  border-color: rgba(239, 68, 68, 0.2);
  color: rgba(252, 129, 129, 0.9);
}

.maestroTaskCardPriorityBadge {
  font-size: 10px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 4px 9px;
  border-radius: var(--style-radius-sm, 6px);
  border: 1px solid;
  line-height: 1;
}

.maestroTaskCardPriorityBadge--low {
  background: rgba(100, 116, 139, 0.06);
  border-color: rgba(148, 163, 184, 0.12);
  color: rgba(203, 213, 225, 0.7);
}

.maestroTaskCardPriorityBadge--medium {
  background: rgba(245, 158, 11, 0.08);
  border-color: rgba(245, 158, 11, 0.2);
  color: rgba(251, 191, 36, 0.9);
}

.maestroTaskCardPriorityBadge--high {
  background: rgba(239, 68, 68, 0.08);
  border-color: rgba(239, 68, 68, 0.2);
  color: rgba(252, 129, 129, 0.9);
}

.maestroTaskCardMenu {
  position: relative;
}

.maestroTaskCardMenuButton {
  border: 1px solid rgba(255, 255, 255, 0.04);
  background: rgba(255, 255, 255, 0.03);
  color: rgba(240, 244, 248, 0.4);
  width: 28px;
  height: 28px;
  border-radius: var(--style-radius-sm, 7px);
  cursor: pointer;
  font-size: 18px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.maestroTaskCardMenuButton:hover {
  border-color: rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
}

.maestroTaskCardMenuDropdown {
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  min-width: 170px;
  padding: 8px;
  border: 1px solid rgba(255, 255, 255, 0.08);
  background: linear-gradient(180deg,
    var(--style-surface-3, rgba(17, 24, 34, 0.98)),
    var(--style-surface-2, rgba(10, 14, 20, 0.98)));
  border-radius: var(--style-radius-lg, 12px);
  box-shadow:
    0 12px 40px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(255, 255, 255, 0.03);
  z-index: 200;
  backdrop-filter: blur(16px);
  animation: dropdownSlideIn 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes dropdownSlideIn {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.maestroTaskCardMenuDropdown button {
  width: 100%;
  border: 1px solid transparent;
  background: transparent;
  color: var(--text);
  padding: 9px 12px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 12px;
  font-weight: 500;
  text-align: left;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.maestroTaskCardMenuDropdown button:hover {
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.08);
  transform: translateX(2px);
}

.maestroTaskCardMenuDelete {
  color: rgba(255, 100, 100, 0.95) !important;
}

.maestroTaskCardMenuDelete:hover {
  border-color: rgba(255, 80, 80, 0.4) !important;
  background: rgba(255, 80, 80, 0.15) !important;
}

.maestroTaskCardTitle {
  margin: 0 0 8px 0;
  font-size: 14px;
  font-weight: 600;
  line-height: 1.5;
  letter-spacing: -0.01em;
  color: var(--text);
}

.maestroTaskCardDescription {
  margin: 0 0 12px 0;
  font-size: 12px;
  line-height: 1.6;
  color: rgba(240, 244, 248, 0.65);
}

.maestroTaskCardMeta {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 10px;
}

.maestroTaskCardMetaItem {
  display: flex;
  align-items: center;
  gap: 5px;
  font-size: 11px;
  color: rgba(240, 244, 248, 0.45);
  font-weight: 500;
  padding: 3px 8px;
  background: rgba(0, 0, 0, 0.15);
  border-radius: var(--style-radius-sm, 6px);
  border: 1px solid rgba(255, 255, 255, 0.04);
}

.maestroTaskCardMetaItem svg {
  font-size: 12px;
  opacity: 0.7;
}

.maestroTaskCardLastUpdate {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 10px 12px;
  border-radius: var(--style-radius-md, 10px);
  background:
    linear-gradient(135deg,
      rgba(107, 138, 253, 0.05),
      rgba(34, 211, 238, 0.02));
  border: 1px solid rgba(107, 138, 253, 0.12);
  margin-bottom: 12px;
  font-size: 11px;
  line-height: 1.6;
  color: rgba(255, 255, 255, 0.85);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

.maestroTaskCardLastUpdate svg {
  font-size: 13px;
  margin-top: 1px;
  color: rgba(107, 138, 253, 0.8);
  flex-shrink: 0;
}

.maestroTaskCardActions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.maestroTaskCardActionPrimary {
  flex: 1;
  border: 1px solid rgba(107, 138, 253, 0.25);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.12),
      rgba(34, 211, 238, 0.06));
  color: var(--text);
  padding: 10px 14px;
  border-radius: var(--style-radius-md, 9px);
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 7px;
  transition: all 0.25s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow:
    0 1px 4px rgba(0, 0, 0, 0.12),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  letter-spacing: 0.01em;
}

.maestroTaskCardActionPrimary:hover {
  border-color: rgba(107, 138, 253, 0.4);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.18),
      rgba(34, 211, 238, 0.1));
  transform: translateY(-1px);
  box-shadow:
    0 4px 12px rgba(107, 138, 253, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.maestroTaskCardActionPrimary:active {
  transform: translateY(0);
}

/* Empty State */
.maestroEmptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 80px 24px;
  text-align: center;
  color: rgba(240, 244, 248, 0.5);
}

.maestroEmptyState svg {
  font-size: 48px;
  opacity: 0.3;
  margin-bottom: 20px;
  filter: drop-shadow(0 4px 16px rgba(107, 138, 253, 0.2));
}

.maestroEmptyState h3 {
  margin: 0 0 8px 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--text);
  letter-spacing: -0.01em;
}

.maestroEmptyState p {
  margin: 0 0 24px 0;
  font-size: 13px;
  color: rgba(240, 244, 248, 0.5);
  line-height: 1.5;
}

/* Timeline */
.maestroTimeline {
  padding: 20px 0;
}

.maestroTimelineTitle {
  margin: 0 0 20px 0;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: rgba(240, 244, 248, 0.5);
}

.maestroTimelineEvents {
  display: flex;
  flex-direction: column;
  gap: 0;
}

.maestroTimelineEvent {
  display: grid;
  grid-template-columns: 12px 2px 1fr;
  gap: 16px;
  padding-bottom: 20px;
}

.maestroTimelineEventDot {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  box-shadow:
    0 0 0 3px rgba(107, 138, 253, 0.15),
    0 2px 8px rgba(0, 0, 0, 0.3);
  margin-top: 4px;
}

.maestroTimelineEventLine {
  position: relative;
  display: flex;
  justify-content: center;
}

.maestroTimelineEventLineBar {
  width: 2px;
  background: linear-gradient(180deg,
      rgba(107, 138, 253, 0.2),
      rgba(107, 138, 253, 0.05));
  position: absolute;
  top: 6px;
  bottom: -20px;
  border-radius: 1px;
}

.maestroTimelineEventContent {
  padding-top: 2px;
}

.maestroTimelineEventHeader {
  display: flex;
  align-items: baseline;
  justify-content: space-between;
  gap: 10px;
  margin-bottom: 6px;
}

.maestroTimelineEventLabel {
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
  letter-spacing: -0.01em;
}

.maestroTimelineEventTime {
  font-size: 11px;
  color: rgba(240, 244, 248, 0.45);
  white-space: nowrap;
  font-weight: 500;
}

.maestroTimelineEventMessage {
  margin: 6px 0 0 0;
  font-size: 12px;
  line-height: 1.6;
  color: rgba(240, 244, 248, 0.7);
  padding: 8px 12px;
  background: rgba(107, 138, 253, 0.05);
  border-left: 2px solid rgba(107, 138, 253, 0.3);
  border-radius: 6px;
}

.maestroTimelineEventSession {
  display: inline-block;
  margin-top: 6px;
  font-size: 10px;
  padding: 3px 8px;
  border-radius: 6px;
  background: rgba(0, 0, 0, 0.25);
  border: 1px solid rgba(255, 255, 255, 0.08);
  color: rgba(240, 244, 248, 0.6);
  font-family: var(--style-font-code);
  font-weight: 500;
  letter-spacing: 0.02em;
}

.maestroTimelineEmpty {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  padding: 60px 20px;
  color: rgba(240, 244, 248, 0.4);
  text-align: center;
}

.maestroTimelineEmpty svg {
  font-size: 32px;
  opacity: 0.3;
}

.maestroTimelineEmpty p {
  margin: 0;
  font-size: 12px;
  color: rgba(240, 244, 248, 0.5);
}

/* Buttons */
.maestroButton {
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.04);
  color: var(--text);
  padding: 9px 14px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 7px;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  white-space: nowrap;
  letter-spacing: 0.01em;
}

.maestroButton:hover {
  border-color: rgba(255, 255, 255, 0.16);
  background: rgba(255, 255, 255, 0.08);
  transform: translateY(-1px);
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
}

.maestroButton:active {
  transform: translateY(0);
}

.maestroButton:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none !important;
}

.maestroButtonPrimary {
  border-color: rgba(107, 138, 253, 0.35);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.18),
      rgba(34, 211, 238, 0.1));
  box-shadow:
    0 2px 8px rgba(107, 138, 253, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.maestroButtonPrimary:hover {
  border-color: rgba(107, 138, 253, 0.5);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.25),
      rgba(34, 211, 238, 0.15));
  box-shadow:
    0 4px 14px rgba(107, 138, 253, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.maestroButtonSecondary {
  background: rgba(255, 255, 255, 0.04);
}

.maestroButtonSecondary:hover {
  background: rgba(255, 255, 255, 0.08);
}

.maestroButtonSuccess {
  border-color: rgba(16, 185, 129, 0.35);
  background: linear-gradient(135deg,
      rgba(16, 185, 129, 0.18),
      rgba(5, 150, 105, 0.1));
  box-shadow:
    0 2px 8px rgba(16, 185, 129, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.maestroButtonSuccess:hover {
  border-color: rgba(16, 185, 129, 0.5);
  background: linear-gradient(135deg,
      rgba(16, 185, 129, 0.25),
      rgba(5, 150, 105, 0.15));
  box-shadow:
    0 4px 14px rgba(16, 185, 129, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

/* Modals */
.maestroModalOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  animation: fadeIn 0.2s ease;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

.maestroModal {
  width: 90%;
  max-width: 540px;
  max-height: 90vh;
  background: linear-gradient(180deg, var(--panel), var(--panel-2));
  border: 1px solid var(--border);
  border-radius: 16px;
  box-shadow: 0 24px 80px rgba(0, 0, 0, 0.65);
  display: flex;
  flex-direction: column;
  animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.maestroModalHeader {
  flex: 0 0 auto;
  padding: 20px 24px 16px 24px;
  border-bottom: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.maestroModalTitle {
  margin: 0;
  font-size: 18px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 10px;
}

.maestroModalClose {
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  font-size: 28px;
  line-height: 1;
  width: 36px;
  height: 36px;
  border-radius: var(--radius-control);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.maestroModalClose:hover {
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
}

.maestroModalContent {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
}

.maestroModalActions {
  flex: 0 0 auto;
  padding: 16px 24px 20px 24px;
  border-top: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
}

/* Form Elements */
.maestroFormGroup {
  margin-bottom: 20px;
}

.maestroFormLabel {
  display: block;
  margin-bottom: 6px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text);
}

.maestroFormRequired {
  color: rgba(239, 68, 68, 0.9);
}

.maestroFormInput,
.maestroFormTextarea {
  width: 100%;
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 10px 12px;
  border-radius: var(--radius-control);
  font-size: 13px;
  font-family: inherit;
  transition: all 0.15s ease;
}

.maestroFormInput:hover,
.maestroFormTextarea:hover {
  border-color: rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.05);
}

.maestroFormInput:focus,
.maestroFormTextarea:focus {
  outline: none;
  border-color: rgba(107, 138, 253, 0.5);
  background: rgba(255, 255, 255, 0.04);
  box-shadow: 0 0 0 3px rgba(107, 138, 253, 0.12);
}

.maestroFormTextarea {
  resize: vertical;
  min-height: 80px;
}

.maestroFormRadioGroup {
  display: flex;
  gap: 16px;
}

.maestroFormRadio {
  display: flex;
  align-items: center;
  gap: 6px;
  cursor: pointer;
  font-size: 13px;
}

.maestroFormRadio input[type="radio"] {
  cursor: pointer;
}

/* Detail Panel */
.maestroDetailPanel {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(180deg,
      rgba(16, 21, 30, 0.98),
      rgba(10, 14, 22, 0.98));
  z-index: 150;
  display: flex;
  flex-direction: column;
  animation: slideInFromRight 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow: -4px 0 24px rgba(0, 0, 0, 0.3);
}

.maestroDetailHeader {
  flex: 0 0 auto;
  padding: 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  align-items: center;
  gap: 14px;
  background: radial-gradient(600px 300px at 50% 0%, rgba(107, 138, 253, 0.08), transparent 60%);
}

.maestroDetailBack {
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.04);
  color: rgba(240, 244, 248, 0.6);
  width: 36px;
  height: 36px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  font-weight: 600;
}

.maestroDetailBack:hover {
  border-color: rgba(107, 138, 253, 0.3);
  background: rgba(107, 138, 253, 0.1);
  color: var(--text);
  transform: translateX(-2px);
}

.maestroDetailHeader h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  letter-spacing: -0.01em;
  flex: 1;
  min-width: 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--text);
}

.maestroDetailContent {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.maestroDetailContent::-webkit-scrollbar {
  width: 8px;
}

.maestroDetailContent::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.maestroDetailContent::-webkit-scrollbar-thumb {
  background: rgba(107, 138, 253, 0.2);
  border-radius: 4px;
}

.maestroDetailContent::-webkit-scrollbar-thumb:hover {
  background: rgba(107, 138, 253, 0.3);
}

/* ===================================
   CREATE TASK MODAL - REDESIGNED
   =================================== */

.createTaskModal {
  width: 92%;
  max-width: 680px;
  max-height: 90vh;
  background: linear-gradient(180deg,
      rgba(16, 21, 30, 0.98),
      rgba(10, 14, 22, 0.98));
  border: 1px solid rgba(107, 138, 253, 0.2);
  border-radius: 20px;
  box-shadow:
    0 24px 80px rgba(0, 0, 0, 0.7),
    0 0 0 1px rgba(107, 138, 253, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  display: flex;
  flex-direction: column;
  animation: slideUpScale 0.35s cubic-bezier(0.16, 1, 0.3, 1);
  overflow: hidden;
}

@keyframes slideUpScale {
  from {
    transform: translateY(30px) scale(0.96);
    opacity: 0;
  }

  to {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.createTaskModalHeader {
  flex: 0 0 auto;
  padding: 28px 28px 24px 28px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  background:
    radial-gradient(800px 400px at 50% 0%, rgba(107, 138, 253, 0.08), transparent 60%);
}

.createTaskModalHeaderContent {
  display: flex;
  align-items: center;
  gap: 16px;
  flex: 1;
}

.createTaskModalIcon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  background: linear-gradient(135deg, rgba(107, 138, 253, 0.15), rgba(34, 211, 238, 0.1));
  border: 1px solid rgba(107, 138, 253, 0.25);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
  color: var(--accent);
  box-shadow:
    0 4px 16px rgba(107, 138, 253, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.createTaskModalTitle {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, var(--text), rgba(240, 244, 248, 0.8));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.createTaskModalSubtitle {
  margin: 4px 0 0 0;
  font-size: 13px;
  color: var(--muted);
  font-weight: 400;
}

.createTaskModalClose {
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  width: 36px;
  height: 36px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  font-size: 18px;
}

.createTaskModalClose:hover {
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
  transform: scale(1.05);
}

.createTaskModalBody {
  flex: 1;
  overflow-y: auto;
  padding: 28px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

/* Form Label */
.createTaskLabel {
  display: block;
  margin-bottom: 10px;
  font-size: 13px;
  font-weight: 600;
  color: var(--text);
  letter-spacing: -0.01em;
}

/* Title Input Container */
.createTaskTitleContainer {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.createTaskTitleInput {
  width: 100%;
  border: 2px solid rgba(255, 255, 255, 0.08);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 12px 16px;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 500;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    sans-serif;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

.createTaskTitleInput::placeholder {
  color: rgba(240, 244, 248, 0.35);
}

.createTaskTitleInput:hover {
  border-color: rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.05);
}

.createTaskTitleInput:focus {
  outline: none;
  border-color: rgba(107, 138, 253, 0.5);
  background: rgba(255, 255, 255, 0.04);
  box-shadow:
    0 4px 16px rgba(107, 138, 253, 0.2),
    0 0 0 4px rgba(107, 138, 253, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  transform: translateY(-1px);
}

/* Prompt Container - Hero Element */
.createTaskPromptContainer {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.createTaskPromptWrapper {
  position: relative;
}

.createTaskPromptArea {
  width: 100%;
  min-height: 200px;
  border: 2px solid transparent;
  background:
    linear-gradient(var(--panel-2), var(--panel-2)) padding-box,
    linear-gradient(135deg,
      rgba(107, 138, 253, 0.3),
      rgba(34, 211, 238, 0.2),
      rgba(107, 138, 253, 0.3)) border-box;
  color: var(--text);
  padding: 18px 20px;
  border-radius: 14px;
  font-size: 15px;
  line-height: 1.6;
  font-family:
    ui-sans-serif,
    system-ui,
    -apple-system,
    BlinkMacSystemFont,
    "Segoe UI",
    Roboto,
    sans-serif;
  resize: vertical;
  transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  position: relative;
  z-index: 1;
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
}

.createTaskPromptArea::placeholder {
  color: rgba(240, 244, 248, 0.35);
}

.createTaskPromptArea:hover {
  background:
    linear-gradient(rgba(16, 21, 30, 0.98), rgba(16, 21, 30, 0.98)) padding-box,
    linear-gradient(135deg,
      rgba(107, 138, 253, 0.4),
      rgba(34, 211, 238, 0.3),
      rgba(107, 138, 253, 0.4)) border-box;
}

.createTaskPromptArea:focus {
  outline: none;
  background:
    linear-gradient(rgba(10, 14, 22, 0.98), rgba(10, 14, 22, 0.98)) padding-box,
    linear-gradient(135deg,
      rgba(107, 138, 253, 0.6),
      rgba(34, 211, 238, 0.4),
      rgba(107, 138, 253, 0.6)) border-box;
  box-shadow:
    0 12px 32px rgba(107, 138, 253, 0.25),
    0 0 0 4px rgba(107, 138, 253, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
  transform: translateY(-1px);
}

.createTaskPromptGlow {
  position: absolute;
  inset: -20px;
  background: radial-gradient(circle at 50% 0%,
      rgba(107, 138, 253, 0.15),
      transparent 70%);
  opacity: 0;
  transition: opacity 0.4s ease;
  pointer-events: none;
  z-index: 0;
}

.createTaskPromptArea:focus+.createTaskPromptGlow {
  opacity: 1;
}

.createTaskPromptHint {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: rgba(240, 244, 248, 0.5);
  padding: 0 4px;
}

.createTaskPromptHint svg {
  font-size: 14px;
  color: rgba(107, 138, 253, 0.6);
}

/* Options Section */
.createTaskOptions {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 20px;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.04);
  border-radius: 12px;
}

.createTaskOptionRow {
  display: flex;
  align-items: center;
  gap: 16px;
}

.createTaskOptionLabel {
  font-size: 13px;
  font-weight: 500;
  color: var(--muted);
  min-width: 70px;
}

.createTaskPrioritySelector {
  display: flex;
  gap: 8px;
  background: rgba(0, 0, 0, 0.2);
  padding: 4px;
  border-radius: 10px;
  border: 1px solid rgba(255, 255, 255, 0.04);
}

.createTaskPriorityBtn {
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  padding: 7px 16px;
  border-radius: 7px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  position: relative;
}

.createTaskPriorityBtn:hover {
  color: var(--text);
  background: rgba(255, 255, 255, 0.04);
}

.createTaskPriorityBtn.active {
  background: linear-gradient(135deg, rgba(107, 138, 253, 0.2), rgba(34, 211, 238, 0.12));
  border-color: rgba(107, 138, 253, 0.3);
  color: var(--text);
  box-shadow:
    0 2px 8px rgba(107, 138, 253, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  transform: translateY(-1px);
}

.createTaskAdvancedToggle {
  border: none;
  background: transparent;
  color: rgba(107, 138, 253, 0.8);
  padding: 8px 0;
  cursor: pointer;
  font-size: 12px;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: all 0.2s ease;
  align-self: flex-start;
}

.createTaskAdvancedToggle:hover {
  color: var(--accent);
}

.createTaskAdvancedChevron {
  font-size: 16px;
  transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  display: inline-block;
}

.createTaskAdvancedChevron.open {
  transform: rotate(90deg);
}

.createTaskAdvancedOptions {
  padding: 16px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 8px;
  border: 1px dashed rgba(255, 255, 255, 0.1);
  animation: expandDown 0.3s ease-out;
}

@keyframes expandDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.createTaskAdvancedPlaceholder {
  margin: 0;
  font-size: 12px;
  color: var(--muted);
  font-style: italic;
}

/* Footer */
.createTaskModalFooter {
  flex: 0 0 auto;
  padding: 20px 28px 24px 28px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: rgba(0, 0, 0, 0.15);
}

.createTaskModalFooterLeft {
  display: flex;
  align-items: center;
}

.createTaskModalKeyboardHint {
  font-size: 11px;
  color: rgba(240, 244, 248, 0.4);
  padding: 4px 10px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 6px;
  font-family: var(--style-font-code);
  letter-spacing: 0.02em;
}

.createTaskModalFooterRight {
  display: flex;
  align-items: center;
  gap: 10px;
}

.createTaskBtn {
  border: 1px solid var(--border);
  background: rgba(255, 255, 255, 0.03);
  color: var(--text);
  padding: 10px 18px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 13px;
  font-weight: 500;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 7px;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  white-space: nowrap;
}

.createTaskBtn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
}

.createTaskBtn:active {
  transform: translateY(0);
}

.createTaskBtn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none !important;
}

.createTaskBtnSecondary {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(255, 255, 255, 0.1);
}

.createTaskBtnSecondary:hover:not(:disabled) {
  border-color: rgba(255, 255, 255, 0.16);
  background: rgba(255, 255, 255, 0.08);
}

.createTaskBtnPrimary {
  border-color: rgba(107, 138, 253, 0.4);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.2),
      rgba(34, 211, 238, 0.12));
  box-shadow:
    0 2px 12px rgba(107, 138, 253, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.createTaskBtnPrimary:hover:not(:disabled) {
  border-color: rgba(107, 138, 253, 0.6);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.28),
      rgba(34, 211, 238, 0.18));
  box-shadow:
    0 6px 20px rgba(107, 138, 253, 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

.createTaskBtnSuccess {
  border-color: rgba(16, 185, 129, 0.4);
  background: linear-gradient(135deg,
      rgba(16, 185, 129, 0.2),
      rgba(5, 150, 105, 0.12));
  box-shadow:
    0 2px 12px rgba(16, 185, 129, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.createTaskBtnSuccess:hover:not(:disabled) {
  border-color: rgba(16, 185, 129, 0.6);
  background: linear-gradient(135deg,
      rgba(16, 185, 129, 0.28),
      rgba(5, 150, 105, 0.18));
  box-shadow:
    0 6px 20px rgba(16, 185, 129, 0.35),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
}

/* ===================================
   TASK LIST VIEW STYLES
   =================================== */

.taskList {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

/* Task List Item */
.taskListItem {
  background:
    linear-gradient(145deg,
      var(--style-surface-2, rgba(22, 27, 38, 0.9)),
      var(--style-surface-1, rgba(14, 18, 28, 0.9)));
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: var(--style-radius-md, 10px);
  overflow: hidden;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.02);
}

.taskListItem:hover {
  background:
    linear-gradient(145deg,
      var(--style-surface-3, rgba(28, 33, 45, 0.9)),
      var(--style-surface-2, rgba(20, 25, 36, 0.9)));
  border-color: rgba(107, 138, 253, 0.15);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
}

.taskListItemMain {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  cursor: pointer;
  gap: 16px;
  position: relative;
}

.taskListItemLeft {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
  min-width: 0;
}

.taskListItemExpand {
  border: none;
  background: rgba(255, 255, 255, 0.03);
  color: rgba(240, 244, 248, 0.5);
  width: 24px;
  height: 24px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  flex-shrink: 0;
}

.taskListItemExpand svg {
  font-size: 14px;
  transition: transform 0.25s cubic-bezier(0.16, 1, 0.3, 1);
  transform: rotate(-90deg);
}

.taskListItemExpand.expanded svg {
  transform: rotate(0deg);
}

.taskListItemExpand:hover {
  background: rgba(107, 138, 253, 0.15);
  color: var(--accent);
}

.taskListItemExpandSpacer {
  width: 24px;
  flex-shrink: 0;
}

.taskListItemContent {
  flex: 1;
  min-width: 0;
}

.taskListItemHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 8px;
}

.taskListItemTitle {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  letter-spacing: -0.01em;
  line-height: 1.4;
  flex: 1;
  min-width: 0;
}

.taskListItemBadges {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}

.taskListItemStatusBadge {
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 3px 8px;
  border-radius: var(--style-radius-sm, 5px);
  border: 1px solid;
  line-height: 1;
}

.taskListItemStatusBadge--todo {
  background: rgba(148, 163, 184, 0.07);
  border-color: rgba(148, 163, 184, 0.14);
  color: rgba(203, 213, 225, 0.75);
}

.taskListItemStatusBadge--in_progress {
  background: rgba(107, 138, 253, 0.08);
  border-color: rgba(107, 138, 253, 0.18);
  color: rgba(139, 174, 255, 0.9);
}

.taskListItemStatusBadge--in_review {
  background: rgba(168, 85, 247, 0.07);
  border-color: rgba(168, 85, 247, 0.18);
  color: rgba(192, 132, 252, 0.85);
}

.taskListItemStatusBadge--completed {
  background: rgba(16, 185, 129, 0.07);
  border-color: rgba(16, 185, 129, 0.18);
  color: rgba(52, 211, 153, 0.85);
}

.taskListItemStatusBadge--cancelled {
  background: rgba(128, 128, 128, 0.06);
  border-color: rgba(128, 128, 128, 0.12);
  color: rgba(160, 160, 160, 0.8);
}

.taskListItemStatusBadge--blocked {
  background: rgba(239, 68, 68, 0.07);
  border-color: rgba(239, 68, 68, 0.18);
  color: rgba(252, 129, 129, 0.85);
}

.taskListItemPriorityBadge {
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 3px 8px;
  border-radius: var(--style-radius-sm, 5px);
  border: 1px solid;
  line-height: 1;
}

.taskListItemPriorityBadge--low {
  background: rgba(100, 116, 139, 0.05);
  border-color: rgba(148, 163, 184, 0.1);
  color: rgba(203, 213, 225, 0.65);
}

.taskListItemPriorityBadge--medium {
  background: rgba(245, 158, 11, 0.07);
  border-color: rgba(245, 158, 11, 0.18);
  color: rgba(251, 191, 36, 0.85);
}

.taskListItemPriorityBadge--high {
  background: rgba(239, 68, 68, 0.07);
  border-color: rgba(239, 68, 68, 0.18);
  color: rgba(252, 129, 129, 0.85);
}

.taskListItemMeta {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.taskListItemMetaItem {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  color: rgba(240, 244, 248, 0.5);
  font-weight: 500;
}

.taskListItemMetaItem svg {
  font-size: 12px;
  opacity: 0.6;
}

.taskListItemRight {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
}

.taskListItemActionBtn {
  border: 1px solid rgba(107, 138, 253, 0.2);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.1),
      rgba(34, 211, 238, 0.05));
  color: var(--text);
  padding: 7px 12px;
  border-radius: 7px;
  cursor: pointer;
  font-size: 11px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 5px;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  white-space: nowrap;
  letter-spacing: 0.01em;
}

.taskListItemActionBtn:hover {
  border-color: rgba(107, 138, 253, 0.35);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.16),
      rgba(34, 211, 238, 0.08));
  transform: translateY(-1px);
  box-shadow: 0 2px 8px rgba(107, 138, 253, 0.12);
}

.taskListItemActionBtn svg {
  font-size: 12px;
}

.taskListItemMenu {
  position: relative;
}

.taskListItemMenuBtn {
  border: none;
  background: rgba(255, 255, 255, 0.03);
  color: rgba(240, 244, 248, 0.4);
  width: 28px;
  height: 28px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.taskListItemMenuBtn:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text);
}

.taskListItemMenuDropdown {
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  min-width: 150px;
  padding: 8px;
  border: 1px solid rgba(107, 138, 253, 0.2);
  background: linear-gradient(180deg, rgba(17, 24, 34, 0.98), rgba(10, 14, 20, 0.98));
  border-radius: 10px;
  box-shadow:
    0 16px 48px rgba(0, 0, 0, 0.6),
    0 0 0 1px rgba(255, 255, 255, 0.05);
  z-index: 200;
  backdrop-filter: blur(12px);
  animation: dropdownSlideIn 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

.taskListItemMenuDropdown button {
  width: 100%;
  border: none;
  background: transparent;
  color: var(--text);
  padding: 8px 10px;
  border-radius: 7px;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  font-weight: 500;
  text-align: left;
  transition: all 0.2s ease;
}

.taskListItemMenuDropdown button:hover {
  background: rgba(255, 255, 255, 0.08);
}

.taskListItemMenuDelete {
  color: rgba(255, 100, 100, 0.95) !important;
}

.taskListItemMenuDelete:hover {
  background: rgba(255, 80, 80, 0.12) !important;
}

/* Agent Selector & Work Area */
.maestroAgentSelector {
  border: 1px solid rgba(107, 138, 253, 0.25);
  background: rgba(0, 0, 0, 0.3);
  color: var(--text);
  padding: 6px 10px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 90px;
}

.maestroAgentSelector:hover {
  border-color: rgba(107, 138, 253, 0.4);
  background: rgba(0, 0, 0, 0.4);
}

.maestroAgentSelector:focus {
  outline: none;
  border-color: rgba(107, 138, 253, 0.6);
  box-shadow: 0 0 0 2px rgba(107, 138, 253, 0.1);
}

.taskListItemWorkArea {
  display: flex;
  align-items: center;
  gap: 8px;
}

.taskDetailWorkArea {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-left: auto;
}

.taskDetailAgentLabel {
  font-size: 13px;
  font-weight: 500;
  color: rgba(240, 244, 248, 0.7);
  white-space: nowrap;
}

/* Subtasks */
.taskListItemSubtasks {
  border-top: 1px solid rgba(255, 255, 255, 0.03);
  background: rgba(0, 0, 0, 0.1);
  padding: 8px 16px 8px 52px;
  animation: expandDown 0.25s cubic-bezier(0.16, 1, 0.3, 1);
}

.taskSubtaskItem {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 10px;
  border-radius: 7px;
  cursor: pointer;
  transition: all 0.2s ease;
  margin-bottom: 4px;
}

.taskSubtaskItem:last-child {
  margin-bottom: 0;
}

.taskSubtaskItem:hover {
  background: rgba(255, 255, 255, 0.04);
}

.taskSubtaskItem.completed {
  opacity: 0.6;
}

.taskSubtaskItem.completed .taskSubtaskTitle {
  text-decoration: line-through;
}

.taskSubtaskCheckbox {
  color: rgba(107, 138, 253, 0.8);
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.taskSubtaskCheckboxEmpty {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(148, 163, 184, 0.4);
  border-radius: 4px;
  transition: all 0.2s ease;
}

.taskSubtaskItem:hover .taskSubtaskCheckboxEmpty {
  border-color: rgba(107, 138, 253, 0.6);
}

.taskSubtaskTitle {
  flex: 1;
  font-size: 12px;
  color: rgba(240, 244, 248, 0.8);
  font-weight: 500;
}

.taskSubtaskTime {
  font-size: 10px;
  color: rgba(240, 244, 248, 0.4);
  font-weight: 500;
}

/* ===================================
   TASK DETAIL MODAL STYLES
   =================================== */

.taskDetailModal {
  width: 92%;
  max-width: 720px;
  max-height: 90vh;
  background: linear-gradient(180deg,
      var(--style-surface-2, rgba(16, 21, 30, 0.98)),
      var(--style-surface-1, rgba(10, 14, 22, 0.98)));
  border: 1px solid rgba(107, 138, 253, 0.15);
  border-radius: var(--style-radius-xl, 20px);
  box-shadow:
    0 24px 80px rgba(0, 0, 0, 0.5),
    0 0 0 1px rgba(107, 138, 253, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
  display: flex;
  flex-direction: column;
  animation: slideUpScale 0.35s cubic-bezier(0.16, 1, 0.3, 1);
  overflow: hidden;
  backdrop-filter: blur(12px);
}

.taskDetailModalHeader {
  flex: 0 0 auto;
  padding: 24px 24px 20px 24px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  background:
    radial-gradient(800px 400px at 50% 0%, rgba(107, 138, 253, 0.08), transparent 60%);
}

.taskDetailModalHeaderContent {
  display: flex;
  align-items: flex-start;
  gap: 14px;
  flex: 1;
}

.taskDetailModalIcon {
  width: 40px;
  height: 40px;
  border-radius: 10px;
  background: linear-gradient(135deg, rgba(107, 138, 253, 0.15), rgba(34, 211, 238, 0.1));
  border: 1px solid rgba(107, 138, 253, 0.25);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  color: var(--accent);
  box-shadow:
    0 4px 12px rgba(107, 138, 253, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  flex-shrink: 0;
}

.taskDetailModalTitle {
  margin: 0 0 10px 0;
  font-size: 18px;
  font-weight: 600;
  letter-spacing: -0.02em;
  color: var(--text);
  line-height: 1.4;
}

.taskDetailModalMeta {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;
}

.taskDetailStatusBadge {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 4px 9px;
  border-radius: 6px;
  border: 1px solid;
  line-height: 1;
}

.taskDetailStatusBadge--todo {
  background: rgba(148, 163, 184, 0.12);
  border-color: rgba(148, 163, 184, 0.25);
  color: rgba(203, 213, 225, 0.9);
}

.taskDetailStatusBadge--in_progress {
  background: linear-gradient(135deg, rgba(107, 138, 253, 0.15), rgba(34, 211, 238, 0.1));
  border-color: rgba(107, 138, 253, 0.3);
  color: rgba(139, 174, 255, 0.95);
}

.taskDetailStatusBadge--in_review {
  background: rgba(168, 85, 247, 0.12);
  border-color: rgba(168, 85, 247, 0.3);
  color: rgba(192, 132, 252, 0.95);
}

.taskDetailStatusBadge--completed {
  background: rgba(16, 185, 129, 0.12);
  border-color: rgba(16, 185, 129, 0.3);
  color: rgba(52, 211, 153, 0.95);
}

.taskDetailStatusBadge--cancelled {
  background: rgba(128, 128, 128, 0.12);
  border-color: rgba(128, 128, 128, 0.25);
  color: rgba(160, 160, 160, 0.95);
}

.taskDetailStatusBadge--blocked {
  background: rgba(239, 68, 68, 0.12);
  border-color: rgba(239, 68, 68, 0.3);
  color: rgba(252, 129, 129, 0.95);
}

.taskDetailPriorityBadge {
  font-size: 10px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 4px 9px;
  border-radius: 6px;
  border: 1px solid;
  line-height: 1;
}

.taskDetailPriorityBadge--low {
  background: rgba(100, 116, 139, 0.1);
  border-color: rgba(148, 163, 184, 0.2);
  color: rgba(203, 213, 225, 0.8);
}

.taskDetailPriorityBadge--medium {
  background: rgba(245, 158, 11, 0.12);
  border-color: rgba(245, 158, 11, 0.3);
  color: rgba(251, 191, 36, 0.95);
}

.taskDetailPriorityBadge--high {
  background: rgba(239, 68, 68, 0.12);
  border-color: rgba(239, 68, 68, 0.3);
  color: rgba(252, 129, 129, 0.95);
}

.taskDetailMetaItem {
  font-size: 11px;
  color: rgba(240, 244, 248, 0.5);
  font-weight: 500;
}

.taskDetailModalClose {
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  width: 36px;
  height: 36px;
  border-radius: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  font-size: 18px;
  flex-shrink: 0;
}

.taskDetailModalClose:hover {
  border-color: rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  color: var(--text);
  transform: scale(1.05);
}

.taskDetailModalBody {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
  display: flex;
  flex-direction: column;
  gap: 24px;
}

.taskDetailModalBody::-webkit-scrollbar {
  width: 8px;
}

.taskDetailModalBody::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
  border-radius: 4px;
}

.taskDetailModalBody::-webkit-scrollbar-thumb {
  background: rgba(107, 138, 253, 0.2);
  border-radius: 4px;
}

.taskDetailModalBody::-webkit-scrollbar-thumb:hover {
  background: rgba(107, 138, 253, 0.3);
}

.taskDetailSection {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.taskDetailSectionHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.taskDetailSectionTitle {
  margin: 0;
  font-size: 13px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: rgba(240, 244, 248, 0.6);
  display: flex;
  align-items: center;
  gap: 8px;
}

.taskDetailSectionTitle svg {
  font-size: 14px;
  color: rgba(107, 138, 253, 0.7);
}

.taskDetailSubtaskCount {
  font-size: 11px;
  font-weight: 600;
  color: rgba(240, 244, 248, 0.4);
  margin-left: 8px;
}

.taskDetailPromptBox {
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.05),
      rgba(34, 211, 238, 0.03));
  border: 1px solid rgba(107, 138, 253, 0.2);
  border-radius: 12px;
  padding: 16px 18px;
  font-size: 13px;
  line-height: 1.7;
  color: rgba(240, 244, 248, 0.85);
  white-space: pre-wrap;
  word-wrap: break-word;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.taskDetailAddSubtaskBtn {
  border: 1px solid rgba(107, 138, 253, 0.25);
  background: rgba(107, 138, 253, 0.08);
  color: rgba(139, 174, 255, 0.95);
  padding: 6px 12px;
  border-radius: 7px;
  cursor: pointer;
  font-size: 11px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 5px;
  transition: all 0.2s ease;
  white-space: nowrap;
  letter-spacing: 0.01em;
}

.taskDetailAddSubtaskBtn:hover {
  border-color: rgba(107, 138, 253, 0.4);
  background: rgba(107, 138, 253, 0.15);
  transform: translateY(-1px);
}

.taskDetailSubtaskInput {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(107, 138, 253, 0.15);
  border-radius: 10px;
  animation: expandDown 0.25s ease-out;
}

.taskDetailSubtaskInput input {
  width: 100%;
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.04);
  color: var(--text);
  padding: 9px 12px;
  border-radius: 7px;
  font-size: 12px;
  font-family: inherit;
  transition: all 0.2s ease;
}

.taskDetailSubtaskInput input:focus {
  outline: none;
  border-color: rgba(107, 138, 253, 0.5);
  background: rgba(255, 255, 255, 0.06);
  box-shadow: 0 0 0 3px rgba(107, 138, 253, 0.1);
}

.taskDetailSubtaskInputActions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.taskDetailSubtaskList {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.taskDetailSubtaskItem {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 12px 14px;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 10px;
  transition: all 0.2s ease;
}

.taskDetailSubtaskItem:hover {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(107, 138, 253, 0.15);
}

.taskDetailSubtaskItem.completed {
  opacity: 0.65;
}

.taskDetailSubtaskItem.completed .taskDetailSubtaskTitle {
  text-decoration: line-through;
}

.taskDetailSubtaskCheckbox {
  color: rgba(107, 138, 253, 0.8);
  font-size: 18px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: all 0.2s ease;
}

.taskDetailSubtaskCheckbox:hover {
  color: rgba(107, 138, 253, 1);
  transform: scale(1.1);
}

.taskDetailSubtaskCheckboxEmpty {
  width: 18px;
  height: 18px;
  border: 2px solid rgba(148, 163, 184, 0.4);
  border-radius: 5px;
  transition: all 0.2s ease;
  cursor: pointer;
}

.taskDetailSubtaskCheckbox:hover .taskDetailSubtaskCheckboxEmpty {
  border-color: rgba(107, 138, 253, 0.7);
  background: rgba(107, 138, 253, 0.1);
}

.taskDetailSubtaskTitle {
  flex: 1;
  font-size: 13px;
  color: rgba(240, 244, 248, 0.85);
  font-weight: 500;
  line-height: 1.5;
}

.taskDetailSubtaskTime {
  font-size: 11px;
  color: rgba(240, 244, 248, 0.4);
  font-weight: 500;
}

.taskDetailSubtaskDelete {
  border: none;
  background: transparent;
  color: rgba(255, 100, 100, 0.6);
  width: 28px;
  height: 28px;
  border-radius: 6px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.taskDetailSubtaskDelete:hover {
  background: rgba(255, 80, 80, 0.15);
  color: rgba(255, 100, 100, 1);
}

.taskDetailEmptyState {
  padding: 40px 20px;
  text-align: center;
  color: rgba(240, 244, 248, 0.4);
  font-size: 12px;
  border: 1px dashed rgba(255, 255, 255, 0.08);
  border-radius: 10px;
}

.taskDetailStats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 12px;
}

.taskDetailStatItem {
  padding: 14px 16px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 10px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.taskDetailStatLabel {
  font-size: 11px;
  color: rgba(240, 244, 248, 0.5);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.taskDetailStatValue {
  font-size: 16px;
  color: var(--text);
  font-weight: 600;
  letter-spacing: -0.01em;
}

.taskDetailModalFooter {
  flex: 0 0 auto;
  padding: 16px 24px 20px 24px;
  border-top: 1px solid rgba(255, 255, 255, 0.06);
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 10px;
  background: rgba(0, 0, 0, 0.15);
}

.taskDetailBtn {
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.04);
  color: var(--text);
  padding: 9px 16px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 12px;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: all 0.2s cubic-bezier(0.16, 1, 0.3, 1);
  white-space: nowrap;
  letter-spacing: 0.01em;
}

.taskDetailBtn:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
}

.taskDetailBtn:active {
  transform: translateY(0);
}

.taskDetailBtn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none !important;
}

.taskDetailBtnSecondary {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(255, 255, 255, 0.1);
}

.taskDetailBtnSecondary:hover {
  border-color: rgba(255, 255, 255, 0.16);
  background: rgba(255, 255, 255, 0.08);
}

.taskDetailBtnPrimary {
  border-color: rgba(107, 138, 253, 0.35);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.18),
      rgba(34, 211, 238, 0.1));
  box-shadow:
    0 2px 8px rgba(107, 138, 253, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.taskDetailBtnPrimary:hover {
  border-color: rgba(107, 138, 253, 0.5);
  background: linear-gradient(135deg,
      rgba(107, 138, 253, 0.25),
      rgba(34, 211, 238, 0.15));
  box-shadow:
    0 4px 14px rgba(107, 138, 253, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.taskDetailBtnSuccess {
  border-color: rgba(16, 185, 129, 0.35);
  background: linear-gradient(135deg,
      rgba(16, 185, 129, 0.18),
      rgba(5, 150, 105, 0.1));
  box-shadow:
    0 2px 8px rgba(16, 185, 129, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.taskDetailBtnSuccess:hover {
  border-color: rgba(16, 185, 129, 0.5);
  background: linear-gradient(135deg,
      rgba(16, 185, 129, 0.25),
      rgba(5, 150, 105, 0.15));
  box-shadow:
    0 4px 14px rgba(16, 185, 129, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

/* ===================================
   TERMINAL TASK DETAIL MODAL
   =================================== */

.terminalTaskModal {
  width: 92%;
  max-width: 700px;
  max-height: 90vh;
  background: #0a0a0a;
  border: 2px solid var(--terminal-green);
  box-shadow:
    0 0 40px rgba(var(--theme-primary-rgb), 0.4),
    0 24px 80px rgba(0, 0, 0, 0.9),
    inset 0 1px 0 rgba(var(--theme-primary-rgb), 0.1);
  display: flex;
  flex-direction: column;
  animation: terminalModalSlide 0.3s cubic-bezier(0.16, 1, 0.3, 1);
  overflow: hidden;
  font-family: var(--style-font-ui);
}

@keyframes terminalModalSlide {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.terminalModalHeader {
  flex: 0 0 auto;
  padding: 16px 20px;
  border-bottom: 1px solid var(--terminal-border);
  background: rgba(var(--theme-primary-rgb), 0.03);
}

.terminalModalHeaderContent {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.terminalModalTitle {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--terminal-text);
  letter-spacing: -0.01em;
}

.terminalModalMeta {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

.terminalModalStatusBadge,
.terminalModalPriorityBadge {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 3px 7px;
  border-radius: 3px;
  border: 1px solid;
  line-height: 1;
}

.terminalModalStatusBadge--todo {
  background: rgba(128, 128, 128, 0.15);
  border-color: rgba(128, 128, 128, 0.3);
  color: var(--terminal-text-dim);
}

.terminalModalStatusBadge--in_progress {
  background: rgba(0, 217, 255, 0.15);
  border-color: var(--terminal-cyan);
  color: var(--terminal-cyan);
}

.terminalModalStatusBadge--in_review {
  background: rgba(168, 85, 247, 0.15);
  border-color: #a855f7;
  color: #a855f7;
}

.terminalModalStatusBadge--completed {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: var(--terminal-green);
  color: var(--terminal-green);
}

.terminalModalStatusBadge--cancelled {
  background: rgba(128, 128, 128, 0.15);
  border-color: rgba(128, 128, 128, 0.3);
  color: var(--terminal-gray);
}

.terminalModalStatusBadge--blocked {
  background: rgba(255, 59, 59, 0.15);
  border-color: var(--terminal-red);
  color: var(--terminal-red);
}

.terminalModalPriorityBadge--low {
  background: rgba(128, 128, 128, 0.15);
  border-color: rgba(128, 128, 128, 0.3);
  color: var(--terminal-text-dim);
}

.terminalModalPriorityBadge--medium {
  background: rgba(255, 176, 0, 0.15);
  border-color: var(--terminal-amber);
  color: var(--terminal-amber);
}

.terminalModalPriorityBadge--high {
  background: rgba(255, 59, 59, 0.15);
  border-color: var(--terminal-red);
  color: var(--terminal-red);
}

.terminalModalMetaItem {
  font-size: 10px;
  color: var(--terminal-text-dim);
  font-weight: 500;
}

.terminalModalBody {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  background: rgba(0, 0, 0, 0.5);
}

.terminalModalBody::-webkit-scrollbar {
  width: 8px;
}

.terminalModalBody::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.4);
}

.terminalModalBody::-webkit-scrollbar-thumb {
  background: rgba(var(--theme-primary-rgb), 0.3);
  border-radius: 4px;
}

.terminalModalBody::-webkit-scrollbar-thumb:hover {
  background: rgba(var(--theme-primary-rgb), 0.5);
}

.terminalModalSection {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.terminalModalSectionHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.terminalModalSectionTitle {
  margin: 0;
  font-size: 11px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--terminal-amber);
  display: flex;
  align-items: center;
  gap: 6px;
}

.terminalModalSubtaskCount {
  font-size: 10px;
  font-weight: 600;
  color: var(--terminal-text-dim);
  margin-left: 6px;
}

.terminalModalPromptBox {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid var(--terminal-border);
  border-left: 3px solid var(--terminal-green);
  padding: 14px 16px;
  font-size: 12px;
  line-height: 1.6;
  color: var(--terminal-text-dim);
  white-space: pre-wrap;
  word-wrap: break-word;
  font-family: var(--style-font-ui);
}

.terminalModalPromptBoxEditable {
  cursor: pointer;
  transition: all 0.15s ease;
}

.terminalModalPromptBoxEditable:hover {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

/* Editable title styles */
.terminalModalTitleEditable {
  cursor: pointer;
  transition: color 0.15s ease;
}

.terminalModalTitleEditable:hover {
  color: var(--terminal-green);
}

.terminalModalEditableTitle {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.terminalModalTitleInput {
  background: rgba(0, 0, 0, 0.6);
  border: 1px solid var(--terminal-green);
  padding: 8px 12px;
  font-size: 16px;
  font-weight: 600;
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  outline: none;
  width: 100%;
  box-sizing: border-box;
}

.terminalModalTitleInput:focus {
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

/* Editable prompt styles */
.terminalModalEditablePrompt {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.terminalModalPromptTextarea {
  background: rgba(0, 0, 0, 0.6);
  border: 1px solid var(--terminal-green);
  border-left: 3px solid var(--terminal-green);
  padding: 14px 16px;
  font-size: 12px;
  line-height: 1.6;
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  outline: none;
  width: 100%;
  box-sizing: border-box;
  resize: vertical;
  min-height: 100px;
}

.terminalModalPromptTextarea:focus {
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

/* Edit action buttons */
.terminalModalEditActions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.terminalModalEditBtn {
  border: 1px solid var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-green);
  padding: 4px 12px;
  font-size: 11px;
  font-weight: 600;
  font-family: var(--style-font-ui);
  cursor: pointer;
  transition: all 0.15s ease;
}

.terminalModalEditBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.2);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

.terminalModalEditBtnCancel {
  border-color: var(--terminal-border);
  background: transparent;
  color: var(--terminal-text-dim);
}

.terminalModalEditBtnCancel:hover {
  border-color: var(--terminal-text-dim);
  background: rgba(255, 255, 255, 0.05);
  box-shadow: none;
}

.terminalModalAddBtn {
  border: 1px solid var(--terminal-border);
  background: rgba(var(--theme-primary-rgb), 0.05);
  color: var(--terminal-green);
  padding: 4px 10px;
  border-radius: 3px;
  cursor: pointer;
  font-size: 10px;
  font-weight: 600;
  font-family: var(--style-font-ui);
  transition: all 0.2s ease;
  white-space: nowrap;
  letter-spacing: 0.02em;
}

.terminalModalAddBtn:hover {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.3);
}

.terminalModalSubtaskInput {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding: 12px;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--terminal-border);
  border-radius: 4px;
  animation: expandDown 0.2s ease-out;
}

.terminalModalSubtaskInput input {
  width: 100%;
  border: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.6);
  color: var(--terminal-text);
  padding: 8px 12px;
  border-radius: 3px;
  font-size: 11px;
  font-family: var(--style-font-ui);
  transition: all 0.2s ease;
}

.terminalModalSubtaskInput input:focus {
  outline: none;
  border-color: var(--terminal-green);
  background: rgba(0, 0, 0, 0.8);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.3);
}

.terminalModalSubtaskInputActions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

.terminalModalSubtaskList {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.terminalModalSubtaskItem {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: rgba(var(--theme-primary-rgb), 0.03);
  border: 1px solid var(--terminal-border);
  border-radius: 3px;
  transition: all 0.2s ease;
  font-family: var(--style-font-ui);
}

.terminalModalSubtaskItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-color: var(--terminal-green);
  transform: translateX(4px);
}

.terminalModalSubtaskItem.completed {
  opacity: 0.5;
}

.terminalModalSubtaskItem.completed .terminalModalSubtaskTitle {
  text-decoration: line-through;
}

.terminalModalSubtaskCheckbox {
  color: var(--terminal-green);
  font-size: 14px;
  cursor: pointer;
  flex-shrink: 0;
  transition: all 0.2s ease;
  font-weight: 700;
}

.terminalModalSubtaskCheckbox:hover {
  transform: scale(1.2);
  text-shadow: 0 0 8px var(--terminal-green);
}

.terminalModalSubtaskTitle {
  flex: 1;
  font-size: 12px;
  color: var(--terminal-text);
  font-weight: 500;
  line-height: 1.4;
}

.terminalModalSubtaskTime {
  font-size: 10px;
  color: var(--terminal-text-dim);
  font-weight: 500;
}

.terminalModalSubtaskDelete {
  border: none;
  background: transparent;
  color: var(--terminal-red);
  width: 24px;
  height: 24px;
  border-radius: 3px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  flex-shrink: 0;
  font-size: 16px;
  font-weight: 700;
}

.terminalModalSubtaskDelete:hover {
  background: rgba(255, 59, 59, 0.15);
  box-shadow: 0 0 8px rgba(255, 59, 59, 0.3);
}

.terminalModalEmptyState {
  padding: 32px 20px;
  text-align: center;
  color: var(--terminal-text-dim);
  font-size: 11px;
  border: 1px dashed var(--terminal-border);
  border-radius: 4px;
  background: rgba(0, 0, 0, 0.3);
}

.terminalModalStats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  gap: 10px;
}

.terminalModalStatItem {
  padding: 12px 14px;
  background: rgba(var(--theme-primary-rgb), 0.03);
  border: 1px solid var(--terminal-border);
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.terminalModalStatLabel {
  font-size: 10px;
  color: var(--terminal-amber);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.terminalModalStatValue {
  font-size: 14px;
  color: var(--terminal-text);
  font-weight: 600;
  letter-spacing: -0.01em;
}

.terminalModalFooter {
  flex: 0 0 auto;
  padding: 14px 20px;
  border-top: 1px solid var(--terminal-border);
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  background: rgba(0, 0, 0, 0.5);
}

.terminalModalFooterLeft,
.terminalModalFooterRight {
  display: flex;
  align-items: center;
  gap: 10px;
}

.terminalModalFooterLabel {
  font-size: 10px;
  color: var(--terminal-amber);
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.terminalModalBtn {
  border: 1px solid var(--terminal-border);
  background: rgba(var(--theme-primary-rgb), 0.05);
  color: var(--terminal-text);
  padding: 6px 14px;
  border-radius: 3px;
  cursor: pointer;
  font-size: 11px;
  font-weight: 600;
  font-family: var(--style-font-ui);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  transition: all 0.2s ease;
  white-space: nowrap;
  letter-spacing: 0.02em;
  text-transform: lowercase;
}

.terminalModalBtn:hover {
  transform: translateY(-1px);
  box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.3);
}

.terminalModalBtn:active {
  transform: translateY(0);
}

.terminalModalBtn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  transform: none !important;
}

.terminalModalBtnSecondary {
  background: rgba(0, 0, 0, 0.6);
  border-color: var(--terminal-border);
  color: var(--terminal-text-dim);
}

.terminalModalBtnSecondary:hover {
  border-color: var(--terminal-text-dim);
  background: rgba(0, 0, 0, 0.8);
}

.terminalModalBtnPrimary {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-green);
}

.terminalModalBtnPrimary:hover {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.2);
  box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.4);
}

.terminalModalBtnSuccess {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-green);
}

.terminalModalBtnSuccess:hover {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.2);
  box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.4);
}

/* ===================================
   TERMINAL THEME - MAESTRO PANEL
   CYBERPUNK RETRO CLI AESTHETIC
   =================================== */

/* Terminal theme root variables - aliased to dynamic theme vars */
.terminalTheme {
  --terminal-green: var(--theme-primary);
  --terminal-green-dim: var(--theme-primary-dim);
  --terminal-amber: #ffb000;
  --terminal-cyan: #00d9ff;
  --terminal-blue: #6b8afd;
  --terminal-red: #ff3b3b;
  --terminal-gray: #888888;
  --terminal-bg: #000000;
  --terminal-bg-alt: #0a0a0a;
  --terminal-border: var(--theme-border);
  --terminal-text: var(--theme-text);
  --terminal-text-dim: var(--theme-text-dim);
  font-family: var(--style-font-ui);
}

/* Main terminal panel with scanline effects */
.maestroPanel.terminalTheme {
  background:
    linear-gradient(180deg,
      var(--style-surface-1, var(--terminal-bg)),
      var(--bg, var(--terminal-bg)));
  border-left: 1px solid rgba(var(--theme-primary-rgb), 0.1);
  box-shadow:
    -4px 0 16px rgba(0, 0, 0, 0.3),
    inset 0 0 40px rgba(var(--theme-primary-rgb), 0.01);
  position: relative;
}

/* Scanline effect overlay - very subtle */
.maestroPanel.terminalTheme::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(0deg,
      rgba(0, 0, 0, 0.08) 0px,
      rgba(0, 0, 0, 0.08) 1px,
      transparent 1px,
      transparent 2px);
  pointer-events: none;
  z-index: 1000;
  opacity: 0.15;
  animation: scanlineMove 8s linear infinite;
}

@keyframes scanlineMove {
  0% {
    transform: translateY(0);
  }

  100% {
    transform: translateY(100%);
  }
}

/* Subtle ambient glow */
.maestroPanel.terminalTheme::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(ellipse at center,
      rgba(var(--theme-primary-rgb), 0.03) 0%,
      transparent 70%);
  pointer-events: none;
  z-index: 999;
}

/* Terminal window chrome (macOS style) */
.terminalWindowChrome {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
  border-bottom: 1px solid var(--terminal-border);
  gap: 12px;
  position: relative;
  z-index: 1001;
}

.terminalWindowButtons {
  display: flex;
  gap: 8px;
}

.terminalWindowBtn {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 8px;
  color: transparent;
}

.terminalWindowBtnClose {
  background: #ff5f57;
}

.terminalWindowBtnClose:hover {
  background: #ff3b30;
  color: #5a0000;
}

.terminalWindowBtnMinimize {
  background: #ffbd2e;
}

.terminalWindowBtnMinimize:hover {
  background: #ffa500;
  color: #5a3b00;
}

.terminalWindowBtnMaximize {
  background: #28ca42;
}

.terminalWindowBtnMaximize:hover {
  background: #1fa033;
  color: #004a0d;
}

.terminalWindowTitle {
  flex: 1;
  font-size: 12px;
  color: var(--terminal-text-dim);
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 8px;
  letter-spacing: 0.02em;
}

.terminalPromptSymbol {
  color: var(--terminal-green);
  font-weight: 700;
  text-shadow: 0 0 8px var(--terminal-green);
  animation: pulseGlow 2s ease-in-out infinite;
}

@keyframes pulseGlow {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.7;
  }
}

.terminalPath {
  color: var(--terminal-amber);
  font-style: italic;
}

.terminalDisconnected {
  color: var(--terminal-red);
  font-size: 10px;
  padding: 2px 6px;
  border: 1px solid var(--terminal-red);
  background: rgba(255, 59, 59, 0.1);
  border-radius: 3px;
  animation: blinkAlert 1s infinite;
}

@keyframes blinkAlert {

  0%,
  50%,
  100% {
    opacity: 1;
  }

  25%,
  75% {
    opacity: 0.3;
  }
}

.terminalWindowSpacer {
  width: 80px;
}

/* ASCII border */
.terminalBorder {
  font-size: 10px;
  line-height: 1;
  color: var(--terminal-border);
  padding: 0 16px;
  overflow: hidden;
  white-space: nowrap;
  text-shadow: 0 0 4px rgba(var(--theme-primary-rgb), 0.3);
  position: relative;
  z-index: 1001;
}

/* Error banner */
.terminalErrorBanner {
  background: rgba(255, 59, 59, 0.15);
  border: 1px solid var(--terminal-red);
  border-left: 4px solid var(--terminal-red);
  padding: 12px 16px;
  margin: 12px 16px;
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 12px;
  position: relative;
  z-index: 1001;
  animation: errorPulse 2s ease-in-out infinite;
}

@keyframes errorPulse {

  0%,
  100% {
    box-shadow: 0 0 0 rgba(255, 59, 59, 0.4);
  }

  50% {
    box-shadow: 0 0 12px rgba(255, 59, 59, 0.6);
  }
}

.terminalErrorSymbol {
  color: var(--terminal-red);
  font-weight: 700;
  text-shadow: 0 0 8px var(--terminal-red);
}

.terminalErrorText {
  flex: 1;
  color: var(--terminal-text);
}

.terminalErrorClose {
  background: transparent;
  border: 1px solid var(--terminal-red);
  color: var(--terminal-red);
  width: 24px;
  height: 24px;
  border-radius: 3px;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  transition: all 0.2s ease;
}

.terminalErrorClose:hover {
  background: rgba(255, 59, 59, 0.2);
  transform: rotate(90deg);
}

/* Command bar */
.terminalCommandBar {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  border-bottom: 1px solid var(--terminal-border);
  background: rgba(var(--theme-primary-rgb), 0.02);
  position: relative;
  z-index: 1001;
}

.terminalCommands {
  display: flex;
  gap: 8px;
  flex: 1;
}

.terminalCmd {
  background: transparent;
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  padding: 8px 14px;
  font-size: 11px;
  font-family: var(--style-font-ui);
  font-weight: 500;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  transition: all 0.2s ease;
  letter-spacing: 0.03em;
  text-transform: lowercase;
}

.terminalCmd:hover {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.3);
  transform: translateY(-1px);
}

.executionBarBtnIcon {
  font-size: 12px;
  line-height: 1;
  display: inline-flex;
  align-items: center;
}

.terminalCmdPrimary {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.08);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.2);
}

.terminalCmdPrimary:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.4);
}

.terminalPrompt {
  color: var(--terminal-amber);
  font-weight: 700;
}

.terminalStats {
  display: flex;
  gap: 16px;
  font-size: 11px;
  font-weight: 500;
}

.terminalStat {
  display: flex;
  align-items: center;
  gap: 4px;
  letter-spacing: 0.02em;
}

.terminalStatActive {
  color: var(--terminal-cyan);
  text-shadow: 0 0 6px var(--terminal-cyan);
}

.terminalStatPending {
  color: var(--terminal-text-dim);
}

.terminalStatReview {
  color: #a855f7;
  text-shadow: 0 0 6px #a855f7;
}

.terminalStatDone {
  color: var(--terminal-green);
  text-shadow: 0 0 6px var(--terminal-green);
}

/* Content area */
.terminalContent {
  flex: 1;
  overflow-y: overlay;
  overflow-x: hidden;
  padding: 6px 4px;
  position: relative;
  z-index: 1001;
  min-width: 0;
}

/* Custom scrollbar — overlaid, hidden until hover */
.terminalContent::-webkit-scrollbar {
  width: 8px;
}

.terminalContent::-webkit-scrollbar-track {
  background: transparent;
}

.terminalContent::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 0;
}

.terminalContent:hover::-webkit-scrollbar-thumb {
  background: var(--terminal-border);
}

.terminalContent:hover::-webkit-scrollbar-thumb:hover {
  background: var(--terminal-green-dim);
}

/* Custom scrollbar for xterm viewport — overlaid, hidden until hover */
.xterm-viewport::-webkit-scrollbar {
  width: 8px;
}

.xterm-viewport::-webkit-scrollbar-track {
  background: transparent;
}

.xterm-viewport::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 0;
}

/* Show scrollbar only when hovering over the terminal pane */
.terminalPane:hover .xterm-viewport::-webkit-scrollbar-thumb {
  background: rgba(var(--theme-primary-rgb), 0.3);
}

.terminalPane:hover .xterm-viewport::-webkit-scrollbar-thumb:hover {
  background: rgba(var(--theme-primary-rgb), 0.5);
}

.terminalPane:hover .xterm-viewport::-webkit-scrollbar-thumb:active {
  background: rgba(var(--theme-primary-rgb), 0.6);
}

/* Firefox scrollbar support */
.xterm-viewport {
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
}

.terminalPane:hover .xterm-viewport {
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.3) transparent;
}

/* Overlay scrollbar: don't consume layout space */
.xterm-viewport {
  overflow-y: overlay !important;
}

/* Loading state */
.terminalLoadingState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  gap: 16px;
  color: var(--terminal-text);
}

.terminalSpinner {
  display: flex;
  gap: 8px;
}

.terminalSpinnerDot {
  color: var(--terminal-green);
  font-size: 20px;
  animation: terminalDotPulse 1.4s infinite both;
}

.terminalSpinnerDot:nth-child(2) {
  animation-delay: 0.2s;
}

.terminalSpinnerDot:nth-child(3) {
  animation-delay: 0.4s;
}

@keyframes terminalDotPulse {

  0%,
  80%,
  100% {
    opacity: 0.3;
    text-shadow: 0 0 0 var(--terminal-green);
  }

  40% {
    opacity: 1;
    text-shadow: 0 0 12px var(--terminal-green);
  }
}

.terminalLoadingText {
  font-size: 13px;
  color: var(--terminal-text-dim);
  letter-spacing: 0.05em;
}

.terminalCursor {
  color: var(--terminal-green);
  animation: cursorBlink 1s infinite;
}

@keyframes cursorBlink {

  0%,
  50% {
    opacity: 1;
  }

  51%,
  100% {
    opacity: 0;
  }
}

/* Empty state */
.terminalEmptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 200px;
  gap: 20px;
  color: var(--terminal-text);
}

.terminalAsciiArt {
  color: var(--terminal-green);
  font-size: 10px;
  line-height: 1.4;
  text-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.4);
  font-family: var(--style-font-ui);
  margin: 0;
}

/* Error state */
.terminalErrorState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 300px;
  gap: 20px;
  padding: 32px;
}

.terminalErrorAscii {
  color: var(--terminal-red);
  font-size: 11px;
  line-height: 1.4;
  text-shadow: 0 0 8px rgba(255, 59, 59, 0.5);
  font-family: var(--style-font-ui);
  margin: 0;
}

.terminalErrorBox {
  width: 100%;
  background: rgba(255, 59, 59, 0.08);
  border: 1px solid var(--terminal-red);
  border-left: 4px solid var(--terminal-red);
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.terminalErrorLabel {
  color: var(--terminal-red);
  font-size: 10px;
  font-weight: 700;
  letter-spacing: 0.1em;
}

.terminalErrorMessage {
  color: var(--terminal-text);
  font-size: 11px;
  line-height: 1.6;
  margin: 0;
  font-family: var(--style-font-ui);
}

.terminalErrorHint {
  color: var(--terminal-amber);
  font-size: 12px;
  margin: 0;
}

/* Task list */
.terminalTaskList {
  display: flex;
  flex-direction: column;
  gap: 2px;
  min-width: 0;
  max-width: 100%;
  width: 100%;
  overflow: hidden;
}

.terminalTaskHeader {
  display: none; /* Hide the header as it doesn't match the responsive flex layout */
}

/* Task group - wraps parent and its children */
.terminalTaskGroup {
  border: 1px solid rgba(var(--theme-primary-rgb), 0.08);
  border-radius: var(--style-radius-md, 6px);
  margin-bottom: 6px;
  background:
    linear-gradient(135deg,
      var(--style-surface-2, rgba(16, 21, 30, 0.9)),
      var(--style-surface-1, rgba(10, 14, 22, 0.95)));
  overflow: hidden;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.2),
    0 2px 8px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
}

.terminalTaskGroup--expanded {
  border-color: rgba(var(--theme-primary-rgb), 0.18);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.25),
    0 0 1px rgba(var(--theme-primary-rgb), 0.15);
}

.terminalTaskGroup--collapsed {
  border-color: rgba(var(--theme-primary-rgb), 0.06);
}

.terminalTaskGroup > .terminalTaskRow {
  margin-bottom: 0;
  border: none;
  border-bottom: 1px solid var(--terminal-border);
  border-radius: 0;
}

.terminalTaskGroup--collapsed > .terminalTaskRow {
  border-bottom: none;
}

.terminalTaskGroupChildren {
  background: rgba(var(--theme-primary-rgb), 0.015);
  padding-left: 4px;
  border-left: 2px solid rgba(var(--theme-primary-rgb), 0.12);
  margin-left: 12px;
}

.terminalTaskGroupChildren .terminalTaskRow {
  border-radius: 0;
  margin-bottom: 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.terminalTaskGroupChildren .terminalTaskRow:last-child {
  border-bottom: none;
}

/* Task row */
.terminalTaskRow {
  border: 1px solid rgba(var(--theme-primary-rgb), 0.06);
  background:
    linear-gradient(145deg,
      var(--style-surface-2, rgba(16, 21, 30, 0.85)),
      var(--style-surface-1, rgba(10, 14, 22, 0.9)));
  margin-bottom: 2px;
  border-radius: var(--style-radius-sm, 4px);
  transition: all 0.2s ease;
  position: relative;
  overflow: hidden;
  min-width: 0;
  max-width: 100%;
  width: 100%;
  box-sizing: border-box;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.12);
}

.terminalTaskRow::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  transition: all 0.2s ease;
}

.terminalTaskRow--todo::before {
  background: var(--terminal-text-dim);
}

.terminalTaskRow--in_progress::before {
  background: var(--terminal-cyan);
}

.terminalTaskRow--in_review::before {
  background: #a855f7;
}

.terminalTaskRow--completed::before {
  background: var(--terminal-green);
}

.terminalTaskRow--cancelled::before {
  background: var(--terminal-gray);
}

.terminalTaskRow--blocked::before {
  background: var(--terminal-red);
}

.terminalTaskRow:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.2);
  background:
    linear-gradient(145deg,
      var(--style-surface-3, rgba(22, 27, 38, 0.9)),
      var(--style-surface-2, rgba(16, 21, 30, 0.95)));
  box-shadow:
    0 4px 12px rgba(0, 0, 0, 0.2),
    0 0 1px rgba(var(--theme-primary-rgb), 0.12);
}

/* Disable hover effects when dropdown is open */
.terminalTaskRow--dropdownOpen,
.terminalTaskRow--dropdownOpen:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.25);
  background:
    linear-gradient(145deg,
      var(--style-surface-3, rgba(22, 27, 38, 0.95)),
      var(--style-surface-2, rgba(16, 21, 30, 0.98)));
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.3),
    0 0 1px rgba(var(--theme-primary-rgb), 0.15);
  z-index: 1001;
  position: relative;
  overflow: visible; /* Allow dropdown to show outside row bounds */
}

/* Allow overflow on all parent elements when dropdown is open */
.terminalTaskRow--dropdownOpen .terminalTaskMain,
.terminalTaskRow--dropdownOpen .terminalTaskPrimaryContent,
.terminalTaskRow--dropdownOpen .terminalTaskMeta {
  overflow: visible;
}

/* Prevent hover on other rows when a dropdown is open */
.terminalTaskList:has(.terminalTaskRow--dropdownOpen) .terminalTaskRow:not(.terminalTaskRow--dropdownOpen):hover {
  border-color: rgba(var(--theme-primary-rgb), 0.08);
  background: var(--style-surface-2, rgba(16, 21, 30, 0.85));
  box-shadow: none;
  transform: none;
}

/* Subtask styling */
.terminalTaskRow--subtask {
  background: rgba(var(--theme-primary-rgb), 0.015);
  border-color: rgba(var(--theme-primary-rgb), 0.15);
}

.terminalTaskRow--subtask .terminalTaskTitle {
  font-size: 12px;
  color: var(--terminal-text-dim);
}

/* Highlight tasks belonging to the currently active session */
.terminalTaskRow--sessionActive {
  background:
    linear-gradient(145deg,
      rgba(var(--theme-primary-rgb), 0.06),
      rgba(var(--theme-primary-rgb), 0.02)),
    linear-gradient(145deg,
      var(--style-surface-2, rgba(16, 21, 30, 0.9)),
      var(--style-surface-1, rgba(10, 14, 22, 0.95)));
  border-color: rgba(var(--theme-primary-rgb), 0.2);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.15),
    inset 0 0 0 1px rgba(var(--theme-primary-rgb), 0.08);
  position: relative;
}

.terminalTaskRow--sessionActive::after {
  content: '\2B25';
  position: absolute;
  right: 6px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 9px;
  color: var(--terminal-cyan);
  opacity: 0.6;
  pointer-events: none;
}

.terminalTreePrefix {
  font-family: var(--terminal-font);
  color: var(--terminal-text-dim);
  margin-right: 8px;
  font-size: 12px;
  user-select: none;
}

/* Tree collapse toggle for parent tasks with children */
.terminalTreeCollapseBtn {
  background: rgba(var(--theme-primary-rgb), 0.06);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  padding: 0;
  margin-right: 10px;
  border-radius: var(--style-radius-sm, 4px);
  transition: all 0.2s ease;
  flex-shrink: 0;
  width: 22px;
  height: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}

.terminalTreeCollapseBtn.collapsed {
  color: rgba(var(--theme-primary-rgb), 0.6);
  border-color: rgba(var(--theme-primary-rgb), 0.2);
  background: rgba(var(--theme-primary-rgb), 0.06);
}

.terminalTreeCollapseBtn.expanded {
  color: var(--theme-primary);
  border-color: rgba(var(--theme-primary-rgb), 0.25);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.terminalTreeCollapseBtn:hover {
  transform: scale(1.1);
}

.terminalTreeCollapseBtn.collapsed:hover {
  background: rgba(var(--theme-primary-rgb), 0.12);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
}

.terminalTreeCollapseBtn.expanded:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: rgba(var(--theme-primary-rgb), 0.35);
}

.terminalTreeCollapseBtn:active {
  transform: scale(0.95);
}

/* Spacer for alignment when task has no children */
.terminalTreeCollapseSpacer {
  width: 24px;
  margin-right: 8px;
  flex-shrink: 0;
}

.terminalTaskMain {
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  padding: 5px 6px;
  cursor: default;
  gap: 6px;
  position: relative;
  min-width: 0;
  max-width: 100%;
  width: 100%;
  overflow: hidden;
  box-sizing: border-box;
  height: 32px;
  flex-shrink: 0;
}

.terminalTaskContent {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
  min-width: 0;
  font-size: 13px;
}

.terminalTaskPrimaryContent {
  display: flex;
  flex-direction: column;
  gap: 6px;
  flex: 1;
  min-width: 0;
  max-width: 100%;
  overflow: hidden;
}

.terminalTaskTitleRow {
  display: flex;
  align-items: center;
  width: 100%;
  min-width: 0;
}

.terminalTaskTitleBlock {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
  min-width: 0;
}

.terminalTaskMeta {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
  min-width: 0;
  max-width: 100%;
  overflow: hidden;
}

.terminalTaskStatus {
  display: flex;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
}

/* Expand button - highlighted and visible */
.terminalExpandBtn {
  background: rgba(var(--theme-primary-rgb), 0.06);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  color: rgba(var(--theme-primary-rgb), 0.7);
  width: 18px;
  height: 18px;
  cursor: pointer;
  font-size: 10px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  flex-shrink: 0;
  border-radius: var(--style-radius-sm, 3px);
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

.terminalExpandBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.12);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  transform: scale(1.05);
}

.terminalExpandBtn.expanded {
  background: rgba(var(--theme-primary-rgb), 0.1);
  border-color: rgba(var(--theme-primary-rgb), 0.25);
  color: var(--theme-primary);
}

/* Expand indicator (non-interactive, shows expand state) */
.terminalExpandIndicator {
  color: var(--terminal-text-dim);
  font-size: 10px;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: color 0.2s ease;
}

.terminalExpandIndicator.expanded {
  color: var(--terminal-green);
}

.terminalExpandSpacer {
  width: 18px;
  flex-shrink: 0;
}

/* Status indicators */
.terminalStatus {
  font-size: 14px;
  width: 20px;
  text-align: center;
  flex-shrink: 0;
}

.terminalStatus--todo {
  color: var(--terminal-text-dim);
}

.terminalStatus--in_progress {
  color: var(--terminal-cyan);
  text-shadow: 0 0 8px var(--terminal-cyan);
  animation: statusPulse 2s ease-in-out infinite;
}

.terminalStatus--in_review {
  color: #a855f7;
  text-shadow: 0 0 6px #a855f7;
}

.terminalStatus--completed {
  color: var(--terminal-green);
  text-shadow: 0 0 6px var(--terminal-green);
}

.terminalStatus--cancelled {
  color: var(--terminal-gray);
}

.terminalStatus--blocked {
  color: var(--terminal-red);
  text-shadow: 0 0 8px var(--terminal-red);
  animation: statusPulse 1s ease-in-out infinite;
}

@keyframes statusPulse {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.5;
  }
}

.terminalPriority {
  font-size: 14px;
  width: 20px;
  text-align: center;
  flex-shrink: 0;
}

.terminalPriority--low {
  color: var(--terminal-text-dim);
}

.terminalPriority--medium {
  color: var(--terminal-amber);
}

.terminalPriority--high {
  color: var(--terminal-red);
  text-shadow: 0 0 6px var(--terminal-red);
}

.terminalStatusLabel {
  font-size: 10px;
  font-weight: 600;
  padding: 2px 7px;
  border: 1px solid;
  letter-spacing: 0.04em;
  flex-shrink: 0;
  border-radius: var(--style-radius-sm, 4px);
}

.terminalStatusLabel--todo {
  color: var(--terminal-text-dim);
  border-color: rgba(var(--theme-primary-rgb), 0.1);
  background: rgba(var(--theme-primary-rgb), 0.03);
}

.terminalStatusLabel--in_progress {
  color: #38bdf8;
  border-color: rgba(56, 189, 248, 0.2);
  background: rgba(56, 189, 248, 0.08);
}

.terminalStatusLabel--in_review {
  color: #c084fc;
  border-color: rgba(192, 132, 252, 0.2);
  background: rgba(168, 85, 247, 0.08);
}

.terminalStatusLabel--completed {
  color: var(--theme-primary);
  border-color: rgba(var(--theme-primary-rgb), 0.2);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.terminalStatusLabel--cancelled {
  color: rgba(148, 163, 184, 0.6);
  border-color: rgba(148, 163, 184, 0.12);
  background: rgba(148, 163, 184, 0.05);
}

.terminalStatusLabel--blocked {
  color: #f87171;
  border-color: rgba(248, 113, 113, 0.2);
  background: rgba(239, 68, 68, 0.08);
}

.terminalTaskTitle {
  color: var(--terminal-text);
  font-weight: 600;
  font-size: 13px;
  letter-spacing: -0.01em;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.terminalDescriptionPreview {
  font-size: 11px;
  color: var(--terminal-text-dim);
  font-weight: 400;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  opacity: 0.6;
  letter-spacing: 0.01em;
  line-height: 1.4;
  max-width: 100%;
}

.terminalMetaBadge {
  font-size: 10px;
  padding: 3px 7px;
  border-radius: 3px;
  font-weight: 500;
  flex-shrink: 0;
  letter-spacing: 0.02em;
  transition: all 0.2s ease;
}

.terminalMetaBadge--subtask {
  color: var(--terminal-amber);
  background: rgba(255, 176, 0, 0.12);
  border: 1px solid rgba(255, 176, 0, 0.25);
}

.terminalMetaBadge--subtask:hover {
  background: rgba(255, 176, 0, 0.2);
}

/* Task Status Badges */
.terminalMetaBadge--status {
  font-weight: 600;
  border: 1px solid;
}

.terminalMetaBadge--status-todo {
  color: var(--terminal-gray);
  background: rgba(128, 128, 128, 0.12);
  border-color: rgba(128, 128, 128, 0.25);
}

.terminalMetaBadge--status-in_progress {
  color: var(--terminal-blue);
  background: rgba(0, 150, 255, 0.12);
  border-color: rgba(0, 150, 255, 0.25);
}

.terminalMetaBadge--status-in_review {
  color: #a855f7;
  background: rgba(168, 85, 247, 0.12);
  border-color: rgba(168, 85, 247, 0.25);
}

.terminalMetaBadge--status-completed {
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.12);
  border-color: rgba(var(--theme-primary-rgb), 0.25);
}

.terminalMetaBadge--status-cancelled {
  color: var(--terminal-gray);
  background: rgba(128, 128, 128, 0.12);
  border-color: rgba(128, 128, 128, 0.25);
}

.terminalMetaBadge--status-blocked {
  color: var(--terminal-red);
  background: rgba(255, 50, 50, 0.12);
  border-color: rgba(255, 50, 50, 0.25);
}

/* Priority Badges */
.terminalMetaBadge--priority {
  font-size: 9px;
  border: 1px solid;
}

.terminalMetaBadge--priority-low {
  color: var(--terminal-gray);
  background: rgba(128, 128, 128, 0.08);
  border-color: rgba(128, 128, 128, 0.2);
}

.terminalMetaBadge--priority-medium {
  color: var(--terminal-amber);
  background: rgba(255, 176, 0, 0.1);
  border-color: rgba(255, 176, 0, 0.25);
}

.terminalMetaBadge--priority-high {
  color: var(--terminal-red);
  background: rgba(255, 50, 50, 0.1);
  border-color: rgba(255, 50, 50, 0.25);
}

/* Model Badges */
.terminalMetaBadge--model {
  font-size: 9px;
  font-weight: 600;
  border: 1px solid;
}

.terminalMetaBadge--model-haiku {
  color: #00d4ff;
  background: rgba(0, 212, 255, 0.12);
  border-color: rgba(0, 212, 255, 0.3);
}

.terminalMetaBadge--model-sonnet {
  color: #a78bfa;
  background: rgba(167, 139, 250, 0.12);
  border-color: rgba(167, 139, 250, 0.3);
}

.terminalMetaBadge--model-opus {
  color: #fbbf24;
  background: rgba(251, 191, 36, 0.12);
  border-color: rgba(251, 191, 36, 0.3);
}

/* Session Status Badges */
.terminalMetaBadge--session {
  font-weight: 600;
  border: 1px solid;
}

.terminalMetaBadge--session-queued {
  color: #888;
  background: rgba(136, 136, 136, 0.12);
  border-color: rgba(136, 136, 136, 0.3);
}

.terminalMetaBadge--session-working {
  color: #00d4ff;
  background: rgba(0, 212, 255, 0.12);
  border-color: rgba(0, 212, 255, 0.3);
}

.terminalMetaBadge--session-blocked {
  color: #ff6b9d;
  background: rgba(255, 107, 157, 0.12);
  border-color: rgba(255, 107, 157, 0.3);
}

.terminalMetaBadge--session-needs_input {
  color: #ffaa00;
  background: rgba(255, 170, 0, 0.12);
  border-color: rgba(255, 170, 0, 0.3);
}

.terminalMetaBadge--session-completed {
  color: #00e5a0;
  background: rgba(0, 229, 160, 0.12);
  border-color: rgba(0, 229, 160, 0.3);
}

.terminalMetaBadge--session-failed {
  color: #ff4d6a;
  background: rgba(255, 77, 106, 0.12);
  border-color: rgba(255, 77, 106, 0.3);
}

.terminalMetaBadge--session-skipped {
  color: #999;
  background: rgba(153, 153, 153, 0.12);
  border-color: rgba(153, 153, 153, 0.3);
}

/* Completion Status Badge */
.terminalMetaBadge--completed {
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.12);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.25);
  font-weight: 600;
}

/* ------------------------------------------------------------------ */
/*  Inline Status Picker                                               */
/* ------------------------------------------------------------------ */

.terminalInlineStatusPicker {
  position: relative;
  display: inline-flex;
}

.terminalMetaBadge--clickable {
  cursor: pointer;
  transition: all 0.15s ease;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.terminalMetaBadge--clickable:hover {
  filter: brightness(1.2);
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.15);
}

.terminalMetaBadge--open {
  filter: brightness(1.2);
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.15);
}

.terminalMetaBadge--updating {
  opacity: 0.7;
  cursor: wait;
}

.terminalMetaBadgeCaret {
  font-size: 8px;
  margin-left: 2px;
  opacity: 0.7;
}

.terminalStatusSpinner {
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.terminalInlineStatusOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9998;
  background: rgba(0, 0, 0, 0.3); /* Semi-transparent to show it's a modal overlay */
}

.terminalInlineStatusDropdown {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 4px;
  background: #000000;
  border: 1px solid var(--theme-primary);
  border-radius: 4px;
  min-width: 140px;
  z-index: 9999;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5), 0 0 12px rgba(var(--theme-primary-rgb), 0.15);
  overflow: hidden;
  /* Prevent hover events from affecting underlying elements */
  isolation: isolate;
}

.terminalInlineStatusDropdown--fixed {
  position: fixed;
  margin-top: 0;
}

/* Backdrop to catch clicks outside dropdown */
.terminalInlineStatusPicker::before {
  content: '';
  display: none;
}

.terminalTaskRow--dropdownOpen .terminalInlineStatusPicker::before {
  display: block;
  position: fixed;
  inset: 0;
  z-index: 9998;
}

.terminalInlineStatusOption {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.1s ease;
  text-align: left;
}

.terminalInlineStatusOption:hover {
  background: rgba(128, 128, 128, 0.1);
}

.terminalInlineStatusOption--current {
  background: rgba(128, 128, 128, 0.15);
}

/* Per-status colors for dropdown options */
.terminalInlineStatusOption--todo {
  color: var(--terminal-gray);
}
.terminalInlineStatusOption--todo:hover,
.terminalInlineStatusOption--todo.terminalInlineStatusOption--current {
  color: var(--terminal-gray);
  background: rgba(128, 128, 128, 0.15);
}

.terminalInlineStatusOption--in_progress {
  color: var(--terminal-blue);
}
.terminalInlineStatusOption--in_progress:hover,
.terminalInlineStatusOption--in_progress.terminalInlineStatusOption--current {
  color: var(--terminal-blue);
  background: rgba(0, 150, 255, 0.15);
}

.terminalInlineStatusOption--in_review {
  color: #a855f7;
}
.terminalInlineStatusOption--in_review:hover,
.terminalInlineStatusOption--in_review.terminalInlineStatusOption--current {
  color: #a855f7;
  background: rgba(168, 85, 247, 0.15);
}

.terminalInlineStatusOption--completed {
  color: var(--terminal-green);
}
.terminalInlineStatusOption--completed:hover,
.terminalInlineStatusOption--completed.terminalInlineStatusOption--current {
  color: var(--terminal-green);
  background: rgba(0, 255, 102, 0.15);
}

.terminalInlineStatusOption--cancelled {
  color: var(--terminal-gray);
}
.terminalInlineStatusOption--cancelled:hover,
.terminalInlineStatusOption--cancelled.terminalInlineStatusOption--current {
  color: var(--terminal-gray);
  background: rgba(128, 128, 128, 0.15);
}

.terminalInlineStatusOption--blocked {
  color: var(--terminal-red);
}
.terminalInlineStatusOption--blocked:hover,
.terminalInlineStatusOption--blocked.terminalInlineStatusOption--current {
  color: var(--terminal-red);
  background: rgba(255, 50, 50, 0.15);
}

.terminalInlineStatusOption .terminalStatusSymbol {
  width: 14px;
  text-align: center;
}

.terminalInlineStatusOption .terminalStatusLabel {
  flex: 1;
}

.terminalInlineStatusOption .terminalStatusCheck {
  font-size: 10px;
}

/* ------------------------------------------------------------------ */
/*  Inline Priority Picker                                             */
/* ------------------------------------------------------------------ */

.terminalInlinePriorityPicker {
  position: relative;
  display: inline-flex;
}

.terminalInlinePriorityDropdown {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 4px;
  background: #000000;
  border: 1px solid var(--theme-primary);
  border-radius: 4px;
  min-width: 100px;
  z-index: 9999;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5), 0 0 12px rgba(var(--theme-primary-rgb), 0.15);
  overflow: hidden;
}

.terminalInlinePriorityDropdown--fixed {
  position: fixed;
  margin-top: 0;
}

.terminalInlinePriorityOption {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.1s ease;
  text-align: left;
}

.terminalInlinePriorityOption:hover {
  background: rgba(255, 170, 0, 0.1);
  color: var(--terminal-text);
}

.terminalInlinePriorityOption--current {
  background: rgba(255, 170, 0, 0.15);
}

.terminalInlinePriorityOption--high {
  color: #ff4d6a;
}

.terminalInlinePriorityOption--high:hover,
.terminalInlinePriorityOption--high.terminalInlinePriorityOption--current {
  color: #ff4d6a;
  background: rgba(255, 77, 106, 0.15);
}

.terminalInlinePriorityOption--medium {
  color: #ffaa00;
}

.terminalInlinePriorityOption--medium:hover,
.terminalInlinePriorityOption--medium.terminalInlinePriorityOption--current {
  color: #ffaa00;
  background: rgba(255, 170, 0, 0.15);
}

.terminalInlinePriorityOption--low {
  color: #888;
}

.terminalInlinePriorityOption--low:hover,
.terminalInlinePriorityOption--low.terminalInlinePriorityOption--current {
  color: #aaa;
  background: rgba(136, 136, 136, 0.15);
}

.terminalInlinePriorityOption .terminalPriorityLabel {
  flex: 1;
}

.terminalInlinePriorityOption .terminalStatusCheck {
  font-size: 10px;
}

/* Team Member Inline Picker */
.terminalInlineTeamMemberPicker {
  position: relative;
  display: inline-flex;
}

.terminalInlineTeamMemberDropdown {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 4px;
  background: #000000;
  border: 1px solid var(--theme-primary);
  border-radius: 4px;
  min-width: 160px;
  max-height: 240px;
  overflow-y: auto;
  z-index: 100;
  box-shadow:
    0 0 20px rgba(var(--theme-primary-rgb), 0.4),
    0 8px 32px rgba(0, 0, 0, 0.9);
  animation: statusDropdownSlide 0.15s ease;
}

.terminalInlineTeamMemberDropdown--fixed {
  position: fixed;
  margin-top: 0;
  z-index: 10001;
}

.terminalInlineTeamMemberOption {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  background: transparent;
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
  color: var(--terminal-text-dim);
  font-family: inherit;
  font-size: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.terminalInlineTeamMemberOption:last-child {
  border-bottom: none;
}

.terminalInlineTeamMemberOption:hover {
  background: rgba(var(--theme-primary-rgb), 0.12);
  color: var(--terminal-text);
}

.terminalInlineTeamMemberOption--current {
  background: rgba(var(--theme-primary-rgb), 0.08);
  color: var(--terminal-text);
}

.terminalInlineTeamMemberOption--disabled {
  opacity: 0.5;
  pointer-events: none;
  cursor: default;
}

.terminalInlineTeamMemberOption--create {
  border-top: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--terminal-text-dim);
}

.terminalInlineTeamMemberOption--create:hover {
  color: var(--terminal-green);
}

.terminalTeamMemberAvatar {
  font-size: 12px;
  flex-shrink: 0;
}

.terminalTeamMemberLabel {
  flex: 1;
  font-weight: 500;
}

.terminalInlineTeamMemberOption .terminalStatusCheck {
  font-size: 10px;
  color: var(--terminal-green);
}

/* Agent Tool / Model Inline Picker */
.terminalInlineAgentPicker {
  position: relative;
  display: inline-flex;
}

.terminalMetaBadge--agent {
  font-size: 9px;
  font-weight: 600;
  border: 1px solid;
  color: var(--terminal-gray);
  background: rgba(128, 128, 128, 0.08);
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  border-color: rgba(128, 128, 128, 0.2);
}

.terminalMetaBadge--agent-claude-code {
  color: #a78bfa;
  background: rgba(167, 139, 250, 0.1);
  border-color: rgba(167, 139, 250, 0.25);
}

.terminalMetaBadge--agent-codex {
  color: #10b981;
  background: rgba(16, 185, 129, 0.1);
  border-color: rgba(16, 185, 129, 0.25);
}

/* Model Badge (shows effective model next to team member) */
.terminalMetaBadge--model {
  font-size: 9px;
  font-weight: 600;
  border: 1px solid rgba(192, 192, 192, 0.35);
  color: #c0c0c0;
  background: #0a0a0a;
  text-transform: uppercase;
  letter-spacing: 0.04em;
}

.terminalMetaBadge--model-override {
  color: #d4d4d4;
  background: #0a0a0a;
  border-color: rgba(212, 212, 212, 0.5);
}

.terminalInlineAgentDropdown {
  position: absolute;
  top: 100%;
  left: 0;
  margin-top: 4px;
  background: #000000;
  border: 1px solid var(--theme-primary);
  border-radius: 4px;
  min-width: 160px;
  z-index: 9999;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5), 0 0 12px rgba(var(--theme-primary-rgb), 0.15);
  overflow: hidden;
}

.terminalInlineAgentDropdown--fixed {
  position: fixed;
  margin-top: 0;
}

/* Open-upward modifier for all inline dropdowns */
.terminalInlineDropdown--openUp {
  transform-origin: bottom left;
  animation: inlineDropdownAppearUp 0.12s ease-out;
}

@keyframes inlineDropdownAppearUp {
  from {
    opacity: 0;
    transform: scaleY(0.92) translateY(4px);
  }
  to {
    opacity: 1;
    transform: scaleY(1) translateY(0);
  }
}

.terminalAgentDropdownHeader {
  padding: 6px 12px 4px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  font-weight: 600;
  color: var(--terminal-text-dim);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.1);
}

.terminalAgentDropdownBack {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  padding: 6px 12px;
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: none;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
  font-size: 10px;
  cursor: pointer;
  transition: all 0.1s ease;
  text-align: left;
}

.terminalAgentDropdownBack:hover {
  background: rgba(var(--theme-primary-rgb), 0.12);
  color: var(--terminal-text);
}

.terminalInlineAgentOption {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.1s ease;
  text-align: left;
}

.terminalInlineAgentOption:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-text);
}

.terminalInlineAgentOption--current {
  background: rgba(var(--theme-primary-rgb), 0.15);
}

.terminalInlineAgentOption--claude-code {
  color: #a78bfa;
}

.terminalInlineAgentOption--claude-code:hover,
.terminalInlineAgentOption--claude-code.terminalInlineAgentOption--current {
  color: #a78bfa;
  background: rgba(167, 139, 250, 0.15);
}

.terminalInlineAgentOption--codex {
  color: #10b981;
}

.terminalInlineAgentOption--codex:hover,
.terminalInlineAgentOption--codex.terminalInlineAgentOption--current {
  color: #10b981;
  background: rgba(16, 185, 129, 0.15);
}

/* Model options within agent dropdown */
.terminalInlineAgentOption--model {
  color: var(--terminal-text-dim);
}

.terminalInlineAgentOption--model:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-text);
}

.terminalInlineAgentOption--model-haiku,
.terminalInlineAgentOption--model-haiku:hover {
  color: #00d4ff;
}

.terminalInlineAgentOption--model-sonnet,
.terminalInlineAgentOption--model-sonnet:hover {
  color: #a78bfa;
}

.terminalInlineAgentOption--model-opus,
.terminalInlineAgentOption--model-opus:hover {
  color: #fbbf24;
}

.terminalInlineAgentOption--model.terminalInlineAgentOption--current {
  background: rgba(var(--theme-primary-rgb), 0.15);
}

.terminalAgentSymbol {
  font-size: 12px;
  flex-shrink: 0;
}

.terminalAgentLabel {
  flex: 1;
}

.terminalAgentArrow {
  font-size: 10px;
  opacity: 0.4;
  flex-shrink: 0;
}

/* Session indicator with blinking dot */
.terminalSessionIndicator {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 3px 7px;
  background: rgba(var(--theme-primary-rgb), 0.08);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.25);
  border-radius: 3px;
  flex-shrink: 0;
}

.terminalSessionDot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: var(--terminal-green);
  box-shadow: 0 0 8px var(--terminal-green);
  animation: sessionBlink 2s ease-in-out infinite;
}

@keyframes sessionBlink {
  0%, 100% {
    opacity: 1;
    box-shadow: 0 0 8px var(--terminal-green);
  }
  50% {
    opacity: 0.3;
    box-shadow: 0 0 4px var(--terminal-green);
  }
}

.terminalSessionNumber {
  font-size: 10px;
  font-weight: 700;
  color: var(--terminal-green);
  letter-spacing: 0.02em;
}

/* Session statuses container - displays session status badges inline */
.terminalSessionStatuses {
  display: flex;
  align-items: center;
  gap: 3px;
  flex-shrink: 0;
  min-width: 0;
}

/* Session status chip - status icon + optional strategy tag */
.terminalSessionStatusChip {
  display: inline-flex;
  align-items: center;
  gap: 2px;
  height: 18px;
  padding: 0 4px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 3px;
  transition: all 0.15s ease;
  cursor: default;
  white-space: nowrap;
  flex-shrink: 0;
}

.terminalSessionStatusIcon {
  line-height: 1;
}

.terminalSessionStrategyTag {
  font-size: 8px;
  font-weight: 700;
  line-height: 1;
  padding: 1px 3px;
  border-radius: 2px;
  background: rgba(255, 255, 255, 0.1);
  opacity: 0.8;
}

.terminalSessionStatusChip--spawning {
  color: var(--terminal-amber);
  background: rgba(255, 176, 0, 0.12);
  border: 1px solid rgba(255, 176, 0, 0.35);
  animation: sessionBlink 1.5s ease-in-out infinite;
}

.terminalSessionStatusChip--idle {
  color: var(--terminal-text-dim);
  background: rgba(128, 128, 128, 0.12);
  border: 1px solid rgba(128, 128, 128, 0.3);
}

.terminalSessionStatusChip--working {
  color: var(--terminal-cyan);
  background: rgba(0, 217, 255, 0.12);
  border: 1px solid rgba(0, 217, 255, 0.4);
  animation: statusPulse 2s ease-in-out infinite;
}

.terminalSessionStatusChip--completed {
  color: var(--terminal-green);
  background: rgba(0, 255, 102, 0.12);
  border: 1px solid rgba(0, 255, 102, 0.35);
}

.terminalSessionStatusChip--failed {
  color: var(--terminal-red);
  background: rgba(255, 59, 59, 0.12);
  border: 1px solid rgba(255, 59, 59, 0.4);
}

.terminalSessionStatusChip--stopped {
  color: var(--terminal-text-dim);
  background: rgba(128, 128, 128, 0.08);
  border: 1px solid rgba(128, 128, 128, 0.25);
  opacity: 0.7;
}

.terminalSessionStatusChip--breathing {
  animation: statusPulse 2s ease-in-out infinite;
}

.terminalSessionStatusLabel {
  font-size: 9px;
  letter-spacing: 0.5px;
  line-height: 1;
}

/* Legacy badge aliases for TaskDetailModal */
.terminalSessionStatusBadge { display: inline-flex; align-items: center; gap: 4px; padding: 0 5px; font-size: 11px; font-weight: 600; border-radius: 3px; }
.terminalSessionStatusBadge--spawning { color: var(--terminal-amber); background: rgba(255, 176, 0, 0.12); border: 1px solid rgba(255, 176, 0, 0.35); }
.terminalSessionStatusBadge--idle { color: var(--terminal-text-dim); background: rgba(128, 128, 128, 0.12); border: 1px solid rgba(128, 128, 128, 0.3); }
.terminalSessionStatusBadge--working { color: var(--terminal-cyan); background: rgba(0, 217, 255, 0.12); border: 1px solid rgba(0, 217, 255, 0.4); }
.terminalSessionStatusBadge--completed { color: var(--terminal-green); background: rgba(0, 255, 102, 0.12); border: 1px solid rgba(0, 255, 102, 0.35); }
.terminalSessionStatusBadge--failed { color: var(--terminal-red); background: rgba(255, 59, 59, 0.12); border: 1px solid rgba(255, 59, 59, 0.4); }
.terminalSessionStatusBadge--stopped { color: var(--terminal-text-dim); background: rgba(128, 128, 128, 0.08); border: 1px solid rgba(128, 128, 128, 0.25); opacity: 0.7; }

/* Session overflow indicator */
.terminalSessionMore {
  font-size: 9px;
  font-weight: 600;
  color: var(--terminal-text-dim);
  padding: 2px 4px;
  background: rgba(128, 128, 128, 0.1);
  border-radius: 2px;
  letter-spacing: 0.02em;
}

.terminalTimeAgo {
  font-size: 10px;
  color: var(--terminal-text-dim);
  flex-shrink: 1;
  font-weight: 500;
  letter-spacing: 0.02em;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
}

/* Status Pills - compact, color-coded */
.terminalStatusPill {
  font-size: 10px;
  padding: 4px 8px;
  border-radius: 4px;
  font-weight: 700;
  flex-shrink: 0;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  transition: all 0.2s ease;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 22px;
}

/* Priority pills */
.terminalStatusPill--priority-low {
  color: var(--terminal-text-dim);
  background: rgba(128, 128, 128, 0.15);
  border: 1px solid rgba(128, 128, 128, 0.3);
}

.terminalStatusPill--priority-medium {
  color: var(--terminal-amber);
  background: rgba(255, 176, 0, 0.15);
  border: 1px solid rgba(255, 176, 0, 0.4);
}

.terminalStatusPill--priority-high {
  color: var(--terminal-red);
  background: rgba(255, 59, 59, 0.15);
  border: 1px solid rgba(255, 59, 59, 0.4);
  box-shadow: 0 0 8px rgba(255, 59, 59, 0.2);
}

/* Status pills */
.terminalStatusPill--todo {
  color: var(--terminal-text-dim);
  background: rgba(128, 128, 128, 0.15);
  border: 1px solid rgba(128, 128, 128, 0.3);
}

.terminalStatusPill--in_progress {
  color: var(--terminal-cyan);
  background: rgba(0, 217, 255, 0.15);
  border: 1px solid rgba(0, 217, 255, 0.4);
  animation: statusPulse 2s ease-in-out infinite;
}

.terminalStatusPill--in_review {
  color: #a855f7;
  background: rgba(168, 85, 247, 0.15);
  border: 1px solid rgba(168, 85, 247, 0.4);
}

.terminalStatusPill--completed {
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.15);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.4);
}

.terminalStatusPill--cancelled {
  color: var(--terminal-gray);
  background: rgba(128, 128, 128, 0.15);
  border: 1px solid rgba(128, 128, 128, 0.3);
}

.terminalStatusPill--blocked {
  color: var(--terminal-red);
  background: rgba(255, 59, 59, 0.15);
  border: 1px solid rgba(255, 59, 59, 0.4);
  animation: statusPulse 1s ease-in-out infinite;
}

/* Task actions - compact, right-aligned */
.terminalTaskActions {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
  min-width: 32px; /* Minimum space for play button */
}

.maestroAgentSelector {
  position: relative;
  font-family: var(--style-font-ui);
}

.maestroAgentSelectorTrigger {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  padding: 4px 8px;
  font-size: 10px;
  font-family: inherit;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 3px;
  display: flex;
  align-items: center;
  gap: 5px;
  min-width: 85px;
  position: relative;
}

.maestroAgentSelectorTrigger:hover {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

.maestroAgentIcon {
  font-size: 11px;
  line-height: 1;
  color: var(--terminal-green);
  flex-shrink: 0;
}

.maestroAgentLabel {
  flex: 1;
  text-align: left;
  font-size: 10px;
}

.maestroAgentCaret {
  font-size: 8px;
  color: var(--terminal-text-dim);
  flex-shrink: 0;
  transition: transform 0.2s ease;
}

.maestroAgentDropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  min-width: 180px;
  background: #0a0a0a;
  border: 1px solid var(--terminal-green);
  border-radius: 4px;
  box-shadow:
    0 0 20px rgba(var(--theme-primary-rgb), 0.4),
    0 8px 32px rgba(0, 0, 0, 0.9);
  z-index: 300;
  animation: agentDropdownSlide 0.2s ease;
  overflow: hidden;
}

@keyframes agentDropdownSlide {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.maestroAgentOption {
  width: 100%;
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  padding: 8px 10px;
  cursor: pointer;
  font-size: 10px;
  font-family: inherit;
  text-align: left;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.maestroAgentOption:last-child {
  border-bottom: none;
}

.maestroAgentOption:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  padding-left: 14px;
}

.maestroAgentOption.selected {
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.maestroAgentOptionContent {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.maestroAgentOptionLabel {
  font-weight: 600;
  color: var(--terminal-text);
  font-size: 10px;
}

.maestroAgentOptionDesc {
  font-size: 9px;
  color: var(--terminal-text-dim);
  line-height: 1.3;
}

.maestroAgentCheck {
  color: var(--terminal-green);
  font-size: 10px;
  font-weight: 700;
  flex-shrink: 0;
}

.terminalPlayBtn {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.5);
  color: var(--terminal-green);
  width: 26px;
  height: 26px;
  font-size: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  border-radius: 50%;
  box-shadow: 0 0 10px rgba(var(--theme-primary-rgb), 0.25);
  flex-shrink: 0;
}

.terminalPlayBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.3);
  box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.5);
  transform: scale(1.15);
  border-color: var(--terminal-green);
}

.terminalPlayBtn:active {
  transform: scale(0.9);
}

/* Split Play Button */
.terminalSplitPlay {
  display: flex;
  align-items: center;
  flex-shrink: 0;
  border-radius: 14px;
  overflow: hidden;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.5);
  box-shadow: 0 0 10px rgba(var(--theme-primary-rgb), 0.25);
  transition: box-shadow 0.2s ease;
}

.terminalSplitPlay:hover {
  box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.5);
}

.terminalSplitPlay__play {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border: none;
  border-right: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  color: var(--terminal-green);
  width: 26px;
  height: 26px;
  font-size: 10px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease;
}

.terminalSplitPlay__play:hover {
  background: rgba(var(--theme-primary-rgb), 0.3);
}

.terminalSplitPlay__play:active {
  background: rgba(var(--theme-primary-rgb), 0.4);
}

.terminalSplitPlay__dropdown {
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: none;
  color: var(--terminal-green);
  width: 18px;
  height: 26px;
  font-size: 8px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.15s ease;
}

.terminalSplitPlay__dropdown:hover {
  background: rgba(var(--theme-primary-rgb), 0.25);
}

.terminalSplitPlay__dropdown--open {
  background: rgba(var(--theme-primary-rgb), 0.3);
}

/* Launch Options Dropdown */
.terminalLaunchDropdown {
  position: absolute;
  background: #0a0a0a;
  border: 1px solid var(--theme-primary);
  border-radius: 4px;
  min-width: 180px;
  z-index: 100;
  box-shadow:
    0 0 20px rgba(var(--theme-primary-rgb), 0.4),
    0 8px 32px rgba(0, 0, 0, 0.9);
  animation: statusDropdownSlide 0.15s ease;
  overflow: hidden;
}

.terminalLaunchDropdown--fixed {
  position: fixed;
  z-index: 10001;
}

.terminalLaunchDropdown__header {
  padding: 6px 10px;
  font-size: 9px;
  font-weight: 600;
  color: var(--terminal-text-dim);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}

.terminalLaunchDropdown__toolGroup {
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.terminalLaunchDropdown__toolGroup:last-child {
  border-bottom: none;
}

.terminalLaunchDropdown__tool {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 7px 10px;
  background: transparent;
  border: none;
  color: var(--terminal-text);
  font-family: inherit;
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: background 0.15s ease;
  text-align: left;
}

.terminalLaunchDropdown__tool:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.terminalLaunchDropdown__tool--expanded {
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.terminalLaunchDropdown__toolSymbol {
  font-size: 12px;
  flex-shrink: 0;
  color: var(--terminal-green);
}

.terminalLaunchDropdown__toolLabel {
  flex: 1;
}

.terminalLaunchDropdown__toolCaret {
  font-size: 8px;
  color: var(--terminal-text-dim);
  flex-shrink: 0;
}

.terminalLaunchDropdown__models {
  background: rgba(0, 0, 0, 0.3);
  border-top: 1px solid rgba(255, 255, 255, 0.06);
}

.terminalLaunchDropdown__model {
  width: 100%;
  display: block;
  padding: 6px 10px 6px 30px;
  background: transparent;
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  color: var(--terminal-text-dim);
  font-family: inherit;
  font-size: 10px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
}

.terminalLaunchDropdown__model:last-child {
  border-bottom: none;
}

.terminalLaunchDropdown__model:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  color: var(--terminal-green);
  padding-left: 34px;
}

.terminalLaunchDropdown__model--selected {
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

/* Pin Button */
.terminalPinBtn {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: rgba(255, 255, 255, 0.4);
  width: 30px;
  height: 30px;
  border-radius: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.terminalPinBtn:hover {
  background: rgba(255, 200, 50, 0.15);
  border-color: rgba(255, 200, 50, 0.5);
  color: rgba(255, 200, 50, 0.9);
  transform: scale(1.1);
}

.terminalPinBtn--pinned {
  background: rgba(255, 200, 50, 0.2);
  border-color: rgba(255, 200, 50, 0.6);
  color: rgba(255, 200, 50, 1);
}

.terminalPinBtn--pinned:hover {
  background: rgba(255, 200, 50, 0.3);
}

.terminalPinBtn:active {
  transform: scale(0.9);
}

/* Subtask Button */
.terminalSubtaskBtn {
  background: transparent;
  border: 1px solid rgba(255, 255, 255, 0.1);
  color: var(--terminal-text-dim);
  width: 26px;
  height: 26px;
  font-size: 13px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2px;
  transition: all 0.2s ease;
  border-radius: 4px;
  flex-shrink: 0;
  position: relative;
}

.terminalSubtaskBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  border-color: rgba(var(--theme-primary-rgb), 0.4);
  color: var(--terminal-green);
}

.terminalSubtaskBtn--expanded {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  color: var(--terminal-green);
}

.terminalSubtaskBtn--collapsed {
  border-color: rgba(255, 255, 255, 0.15);
}

.terminalSubtaskBtn--adding {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: rgba(var(--theme-primary-rgb), 0.5);
  color: var(--terminal-green);
}

.terminalSubtaskBtn--empty:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.5);
}

.terminalSubtaskIcon {
  display: flex;
  align-items: center;
  justify-content: center;
  line-height: 0;
  color: #f59e0b;
}

.terminalSubtaskIcon svg {
  display: block;
}

.terminalSubtaskCount {
  font-size: 9px;
  font-weight: 700;
  color: var(--terminal-green);
  position: absolute;
  top: -4px;
  right: -4px;
  background: rgba(0, 0, 0, 0.8);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.4);
  border-radius: 8px;
  min-width: 14px;
  height: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 3px;
}

/* Inline Add Subtask Input */
.terminalAddSubtaskRow {
  display: flex;
  align-items: center;
  padding: 6px 12px 6px 16px;
  background: rgba(0, 0, 0, 0.15);
  border-top: 1px solid rgba(255, 255, 255, 0.04);
}

.terminalAddSubtaskMain {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.terminalAddSubtaskInput {
  display: flex;
  align-items: center;
  gap: 8px;
  position: relative;
}

.terminalAddSubtaskPrefix {
  color: var(--terminal-green);
  font-size: 14px;
  font-weight: 700;
  opacity: 0.6;
  flex-shrink: 0;
}

.terminalAddSubtaskField {
  flex: 1;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.2);
  border-radius: 4px;
  padding: 6px 10px;
  font-size: 12px;
  font-family: var(--terminal-font);
  color: var(--terminal-text);
  outline: none;
  transition: all 0.2s ease;
}

.terminalAddSubtaskField::placeholder {
  color: var(--terminal-text-dim);
  opacity: 0.5;
}

.terminalAddSubtaskField:focus {
  border-color: rgba(var(--theme-primary-rgb), 0.5);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.15);
  background: rgba(0, 0, 0, 0.4);
}

.terminalAddSubtaskSpinner {
  position: absolute;
  right: 8px;
  color: var(--terminal-green);
  font-size: 14px;
  animation: terminalSpin 1s linear infinite;
}

.terminalAddSubtaskHint {
  font-size: 10px;
  color: var(--terminal-text-dim);
  opacity: 0.6;
  padding-left: 2px;
}

.terminalAddSubtaskHint kbd {
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 3px;
  padding: 0 4px;
  font-size: 9px;
  font-family: var(--terminal-font);
}

@keyframes terminalSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Menu */
.terminalMenu {
  position: relative;
}

.terminalMenuBtn {
  background: transparent;
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text-dim);
  width: 24px;
  height: 24px;
  cursor: pointer;
  font-size: 16px;
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.terminalMenuBtn:hover {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

.terminalMenuDropdown {
  position: absolute;
  top: calc(100% + 6px);
  right: 0;
  min-width: 140px;
  background: #0a0a0a;
  border: 1px solid var(--terminal-green);
  box-shadow:
    0 0 20px rgba(var(--theme-primary-rgb), 0.4),
    0 8px 32px rgba(0, 0, 0, 0.8);
  z-index: 200;
  animation: terminalDropdownSlide 0.2s ease;
}

@keyframes terminalDropdownSlide {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.terminalMenuDropdown button {
  width: 100%;
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  padding: 10px 12px;
  cursor: pointer;
  font-size: 11px;
  font-family: var(--style-font-ui);
  font-weight: 500;
  text-align: left;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 8px;
}

.terminalMenuDropdown button:last-child {
  border-bottom: none;
}

.terminalMenuDropdown button:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-green);
  box-shadow: inset 0 0 12px rgba(var(--theme-primary-rgb), 0.2);
  padding-left: 16px;
}

.terminalMenuDelete:hover {
  background: rgba(255, 59, 59, 0.1) !important;
  color: var(--terminal-red) !important;
  box-shadow: inset 0 0 12px rgba(255, 59, 59, 0.2) !important;
}

/* Subtasks */
.terminalSubtasks {
  border-top: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.3);
  padding: 8px 12px 8px 40px;
  position: relative;
}

.terminalTreeConnector {
  color: var(--terminal-gray, #888);
  font-size: 14px;
  line-height: 1;
  margin-bottom: 4px;
  padding-left: 2px;
  font-family: var(--style-font-code);
}

.terminalSubtaskRow {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 6px 0;
  font-size: 11px;
  color: var(--terminal-text);
  cursor: pointer;
  transition: all 0.2s ease;
}

.terminalSubtaskRow:hover {
  color: var(--terminal-green);
  padding-left: 8px;
}

.terminalSubtaskRow.completed {
  opacity: 0.6;
}

.terminalSubtaskRow.completed .terminalSubtaskTitle {
  text-decoration: line-through;
}

.terminalSubtaskPrefix {
  color: var(--terminal-border);
  font-size: 10px;
}

.terminalSubtaskCheckbox {
  color: var(--terminal-green);
  font-weight: 700;
}

.terminalSubtaskTitle {
  flex: 1;
}

.terminalSubtaskTime {
  font-size: 9px;
  color: var(--terminal-text-dim);
}

/* Task Expanded Content */
.terminalTaskExpanded {
  border-top: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.2);
}

/* Task Tabs */
.terminalTaskTabs {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  border-bottom: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.15);
}

.terminalTaskTab {
  background: transparent;
  border: none;
  color: var(--terminal-text-dim);
  padding: 4px 8px;
  font-size: 11px;
  font-family: var(--style-font-ui);
  cursor: pointer;
  transition: all 0.15s ease;
}

.terminalTaskTab:hover {
  color: var(--terminal-text);
}

.terminalTaskTab--active {
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  border-radius: 3px;
}

/* Tab Content */
.terminalTaskTabContent {
  padding: 12px;
  min-height: 80px;
}

.terminalTabPane {
  animation: tabFadeIn 0.15s ease;
}

.terminalTabPane--context {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

@keyframes tabFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* Details Tab */
.terminalTabPane--details {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.terminalDetailBlock {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.terminalDetailBlockLabel {
  font-size: 10px;
  font-weight: 600;
  color: var(--terminal-text-dim);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.terminalDetailBlockContent {
  font-size: 12px;
  color: var(--terminal-text);
  line-height: 1.5;
  padding: 8px;
  background: rgba(0, 0, 0, 0.2);
  border-radius: 3px;
  border-left: 2px solid var(--terminal-border);
}

/* Empty State - reset absolute positioning from global .terminalEmptyState */
.terminalTabPane .terminalEmptyState,
.terminalTaskExpanded .terminalEmptyState {
  position: static;
  inset: auto;
  text-align: center;
  padding: 24px 12px;
  color: var(--terminal-text-dim);
  font-size: 12px;
  font-style: italic;
  min-height: auto;
}

/* Task Actions Bar */
.terminalTaskActionsBar {
  padding: 12px 12px 12px 40px;
  display: flex;
  align-items: center;
  gap: 8px;
  border-top: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.15);
}

.terminalTaskActionsBar--right {
  justify-content: flex-end;
  padding: 12px;
}

.terminalCompleteBtn {
  background: rgba(var(--theme-primary-rgb), 0.12);
  border: 1px solid var(--terminal-green);
  color: var(--terminal-green);
  padding: 6px 12px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--style-font-ui);
  display: flex;
  align-items: center;
  gap: 6px;
}

.terminalCompleteBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.25);
  box-shadow: 0 0 15px rgba(var(--theme-primary-rgb), 0.4);
  border-color: var(--terminal-green);
  transform: scale(1.05);
}

.terminalCompleteBtn:active {
  transform: scale(0.95);
}

.terminalCopyBtn {
  background: rgba(255, 255, 255, 0.06);
  border: 1px solid rgba(255, 255, 255, 0.15);
  color: var(--terminal-text-dim);
  padding: 6px 12px;
  font-size: 11px;
  font-family: var(--terminal-font);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 72px;
  justify-content: center;
}

.terminalCopyBtn:hover {
  background: rgba(255, 255, 255, 0.12);
  border-color: rgba(255, 255, 255, 0.3);
  color: var(--terminal-text);
}

.terminalCopyBtn:active {
  transform: scale(0.95);
}

.terminalViewDetailsBtn {
  background: rgba(0, 150, 255, 0.12);
  border: 1px solid var(--terminal-cyan);
  color: var(--terminal-cyan);
  padding: 6px 12px;
  font-size: 11px;
  font-family: var(--terminal-font);
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.terminalViewDetailsBtn:hover {
  background: rgba(0, 150, 255, 0.25);
  box-shadow: 0 0 15px rgba(0, 150, 255, 0.4);
  border-color: var(--terminal-cyan);
  transform: scale(1.05);
}

.terminalViewDetailsBtn:active {
  transform: scale(0.95);
}

.terminalDeleteBtn {
  background: rgba(255, 59, 59, 0.12);
  border: 1px solid var(--terminal-red);
  color: var(--terminal-red);
  padding: 6px 12px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 3px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--style-font-ui);
  display: flex;
  align-items: center;
  gap: 6px;
}

.terminalDeleteBtn:hover {
  background: rgba(255, 59, 59, 0.25);
  box-shadow: 0 0 15px rgba(255, 59, 59, 0.4);
  border-color: var(--terminal-red);
  transform: scale(1.05);
}

.terminalDeleteBtn:active {
  transform: scale(0.95);
}

.terminalArchiveBtn {
  background: rgba(255, 165, 0, 0.12);
  border: 1px solid var(--terminal-yellow, #e5c07b);
  color: var(--terminal-yellow, #e5c07b);
  padding: 6px 12px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 3px;
  cursor: pointer;
  font-family: var(--terminal-font);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  transition: all 0.2s ease;
}

.terminalArchiveBtn:hover {
  background: rgba(255, 165, 0, 0.25);
  box-shadow: 0 0 15px rgba(255, 165, 0, 0.4);
  transform: scale(1.05);
}

.terminalArchiveBtn:active {
  transform: scale(0.95);
}

.terminalArchiveBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none;
}

.terminalTaskRow--archived {
  opacity: 0.7;
}

.terminalMetaBadge--status-archived {
  color: var(--terminal-yellow, #e5c07b);
  border-color: var(--terminal-yellow, #e5c07b);
}

/* Sessions Subsection */
.terminalSessions {
  padding: 8px 12px 8px 40px;
}

.terminalSubsectionHeader {
  background: none;
  border: none;
  color: var(--terminal-amber);
  font-size: 11px;
  font-weight: 600;
  padding: 6px 0;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 6px;
  font-family: var(--style-font-ui);
  transition: all 0.2s ease;
}

.terminalSubsectionHeader:hover {
  color: var(--terminal-green);
  padding-left: 4px;
}

.terminalSubsectionContent {
  padding-top: 8px;
  padding-left: 12px;
}

.terminalSessionItem {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 6px 8px;
  margin-bottom: 4px;
  font-size: 11px;
  color: var(--terminal-text);
  background: rgba(107, 138, 253, 0.08);
  border: 1px solid rgba(107, 138, 253, 0.2);
  border-radius: 3px;
  transition: all 0.2s ease;
}

.terminalSessionItem:hover {
  background: rgba(107, 138, 253, 0.15);
  border-color: rgba(107, 138, 253, 0.4);
}

.terminalSessionName {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--terminal-blue);
  font-weight: 500;
}

.terminalSessionActions {
  display: flex;
  align-items: center;
  gap: 6px;
}

.terminalSessionBtn {
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  padding: 2px 6px;
  font-size: 10px;
  border-radius: 2px;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--style-font-ui);
}

.terminalSessionBtn:hover {
  background: rgba(0, 0, 0, 0.5);
  border-color: var(--terminal-green);
  color: var(--terminal-green);
}

.terminalSessionBtn.remove {
  color: var(--terminal-red);
}

.terminalSessionBtn.remove:hover {
  border-color: var(--terminal-red);
  background: rgba(255, 59, 59, 0.1);
}

.terminalLoading {
  font-size: 11px;
  color: var(--terminal-text-dim);
  font-style: italic;
  padding: 6px 0;
}

/* Description Section */
.terminalDescriptionSection {
  padding: 8px 12px 8px 40px;
  border-bottom: 1px solid var(--terminal-border);
}

.terminalDescriptionText {
  font-size: 11px;
  color: var(--terminal-text-dim);
  line-height: 1.5;
  white-space: pre-wrap;
  word-break: break-word;
  padding: 8px;
  background: rgba(0, 0, 0, 0.4);
  border-left: 2px solid var(--terminal-green);
  font-family: var(--style-font-ui);
}

/* Details Section */
.terminalDetailsSection {
  padding: 8px 12px 8px 40px;
  border-bottom: 1px solid var(--terminal-border);
}

.terminalDetailGrid {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding-top: 8px;
}

.terminalDetailRow {
  display: flex;
  gap: 12px;
  font-size: 11px;
  padding: 4px 0;
  align-items: flex-start;
}

.terminalDetailRowFull {
  flex-direction: column;
  gap: 4px;
}

.terminalDetailLabel {
  color: var(--terminal-amber);
  font-weight: 600;
  min-width: 100px;
  flex-shrink: 0;
}

.terminalDetailValue {
  color: var(--terminal-text);
  flex: 1;
  word-break: break-word;
}

/* Status values in details section */
.terminalStatusValue {
  font-weight: 600;
  font-family: var(--style-font-ui);
}

.terminalStatusValue--todo {
  color: var(--terminal-amber);
}

.terminalStatusValue--in_progress {
  color: var(--terminal-blue);
}

.terminalStatusValue--in_review {
  color: #a855f7;
}

.terminalStatusValue--completed {
  color: var(--terminal-green);
}

.terminalStatusValue--cancelled {
  color: var(--terminal-gray);
}

.terminalStatusValue--blocked {
  color: var(--terminal-red);
}

.terminalSessionStatusValue {
  font-weight: 600;
  font-family: var(--style-font-ui);
}

.terminalSessionStatusValue--queued {
  color: #888;
}

.terminalSessionStatusValue--working {
  color: #00d4ff;
}

.terminalSessionStatusValue--blocked {
  color: #ff6b9d;
}

.terminalSessionStatusValue--needs_input {
  color: #ffaa00;
}

.terminalSessionStatusValue--completed {
  color: #00e5a0;
}

.terminalSessionStatusValue--failed {
  color: #ff4d6a;
}

.terminalSessionStatusValue--skipped {
  color: #999;
}

/* Task Status Control Component */
.terminalStatusControl {
  display: flex;
  gap: 12px;
  align-items: center;
  flex-wrap: wrap;
}

.terminalStatusSelector {
  position: relative;
}

.terminalStatusTrigger {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: 2px;
  min-width: 120px;
}

.terminalStatusTrigger:hover:not(:disabled) {
  border-color: var(--terminal-green);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

.terminalStatusTrigger.open {
  border-color: var(--terminal-green);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.4);
}

.terminalStatusTrigger.loading {
  opacity: 0.6;
  cursor: wait;
}

.terminalStatusTrigger.success {
  animation: successPulse 0.5s ease;
}

.terminalStatusTrigger:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Status-specific border colors */
.terminalStatusTrigger--todo {
  border-color: #808080;
}

.terminalStatusTrigger--in_progress {
  border-color: var(--terminal-blue);
}

.terminalStatusTrigger--in_review {
  border-color: #a855f7;
}

.terminalStatusTrigger--completed {
  border-color: var(--terminal-green);
}

.terminalStatusTrigger--cancelled {
  border-color: #808080;
}

.terminalStatusTrigger--blocked {
  border-color: var(--terminal-red);
}

.terminalStatusSymbol {
  font-size: 12px;
  line-height: 1;
}

.terminalStatusLabel {
  flex: 1;
  letter-spacing: 0.05em;
}

.terminalStatusCaret {
  font-size: 10px;
  opacity: 0.7;
}

.terminalStatusSpinner {
  font-size: 12px;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* Dropdown menu */
.terminalStatusDropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  min-width: 140px;
  background: rgba(0, 0, 0, 0.95);
  border: 1px solid var(--terminal-green);
  box-shadow: 0 4px 16px rgba(var(--theme-primary-rgb), 0.3);
  z-index: 1000;
  animation: statusDropdownSlide 0.2s ease;
  border-radius: 2px;
  overflow: hidden;
}

@keyframes statusDropdownSlide {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Dropdown options */
.terminalStatusOption {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.15s ease;
  width: 100%;
  text-align: left;
}

.terminalStatusOption:last-child {
  border-bottom: none;
}

.terminalStatusOption:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-green);
}

.terminalStatusOption.current {
  background: rgba(var(--theme-primary-rgb), 0.15);
  box-shadow: inset 0 0 8px rgba(var(--theme-primary-rgb), 0.2);
}

.terminalStatusCheck {
  margin-left: auto;
  color: var(--terminal-green);
  font-size: 12px;
}

/* Error message */
.terminalStatusError {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  right: 0;
  padding: 6px 8px;
  background: rgba(255, 59, 59, 0.1);
  border: 1px solid var(--terminal-red);
  color: var(--terminal-red);
  font-family: var(--style-font-ui);
  font-size: 10px;
  z-index: 999;
  animation: errorShake 0.3s ease;
  border-radius: 2px;
}

@keyframes errorShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-4px); }
  75% { transform: translateX(4px); }
}

/* Success pulse animation */
@keyframes successPulse {
  0% {
    box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.4);
  }
  50% {
    box-shadow: 0 0 32px rgba(var(--theme-primary-rgb), 0.8);
    transform: scale(1.02);
  }
  100% {
    box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.4);
  }
}

/* Session Status Display (Read-only) */
.terminalSessionStatusDisplay {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: rgba(0, 0, 0, 0.5);
  border: 1px solid var(--terminal-border);
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  border-radius: 2px;
  letter-spacing: 0.05em;
}

.terminalSessionStatusPrefix {
  color: var(--terminal-text-dim);
  font-size: 10px;
}

.terminalSessionStatusLabel {
  color: var(--terminal-text);
}

/* Session status colors - distinct from user status */
.terminalSessionStatusDisplay--queued {
  border-color: #888;
}

.terminalSessionStatusDisplay--queued .terminalSessionStatusLabel {
  color: #888;
}

.terminalSessionStatusDisplay--working {
  border-color: #00d4ff;
}

.terminalSessionStatusDisplay--working .terminalSessionStatusLabel {
  color: #00d4ff;
}

.terminalSessionStatusDisplay--blocked {
  border-color: #ff6b9d;
}

.terminalSessionStatusDisplay--blocked .terminalSessionStatusLabel {
  color: #ff6b9d;
}

.terminalSessionStatusDisplay--needs_input {
  border-color: #ffaa00;
}

.terminalSessionStatusDisplay--needs_input .terminalSessionStatusLabel {
  color: #ffaa00;
}

.terminalSessionStatusDisplay--completed {
  border-color: #00e5a0;
}

.terminalSessionStatusDisplay--completed .terminalSessionStatusLabel {
  color: #00e5a0;
}

.terminalSessionStatusDisplay--failed {
  border-color: #ff4d6a;
}

.terminalSessionStatusDisplay--failed .terminalSessionStatusLabel {
  color: #ff4d6a;
}

.terminalSessionStatusDisplay--skipped {
  border-color: #999;
}

.terminalSessionStatusDisplay--skipped .terminalSessionStatusLabel {
  color: #999;
}

.terminalSessionStatusDisplay--none {
  border-color: var(--terminal-border);
}

.terminalSessionStatusDisplay--none .terminalSessionStatusLabel {
  color: var(--terminal-text-dim);
  opacity: 0.5;
}

/* Screen reader only */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

/* Timeline Section */
.terminalTimelineSection {
  padding: 8px 12px 8px 40px;
  border-bottom: 1px solid var(--terminal-border);
}

.terminalTimelineList {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding-top: 8px;
}

.terminalTimelineEvent {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 10px;
  padding: 4px 8px;
  background: rgba(0, 0, 0, 0.3);
  border-left: 2px solid var(--terminal-border);
  transition: all 0.2s ease;
}

.terminalTimelineEvent:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border-left-color: var(--terminal-green);
}

.terminalTimelineType {
  padding: 2px 6px;
  border: 1px solid;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  flex-shrink: 0;
}

.terminalTimelineType--created {
  color: var(--terminal-text-dim);
  border-color: var(--terminal-border);
}

.terminalTimelineType--session_started {
  color: var(--terminal-cyan);
  border-color: var(--terminal-cyan);
}

.terminalTimelineType--session_ended {
  color: var(--terminal-text-dim);
  border-color: var(--terminal-border);
}

.terminalTimelineType--update {
  color: var(--terminal-amber);
  border-color: var(--terminal-amber);
}

.terminalTimelineType--milestone {
  color: var(--terminal-green);
  border-color: var(--terminal-green);
}

.terminalTimelineType--blocker {
  color: var(--terminal-red);
  border-color: var(--terminal-red);
}

.terminalTimelineTime {
  color: var(--terminal-text-dim);
  flex-shrink: 0;
  min-width: 60px;
}

.terminalTimelineMessage {
  color: var(--terminal-text);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Responsive behavior for narrow screens */
@media (max-width: 900px) {
  .terminalTaskContent {
    flex-wrap: wrap;
    gap: 8px;
  }

  .terminalTaskMeta {
    order: 3;
    margin-left: 0;
  }

  .terminalTaskStatus {
    order: 2;
  }
}

@media (max-width: 768px) {
  .terminalTaskContent {
    gap: 8px;
  }

  .terminalTaskTitle {
    max-width: 100%;
  }

  .terminalDescriptionPreview {
    font-size: 10px;
  }
}

@media (max-width: 480px) {
  .terminalTaskMain {
    padding: 8px 10px;
  }

  .terminalTaskTitle {
    font-size: 12px;
  }

  .terminalDescriptionPreview {
    font-size: 10px;
  }

  .terminalMetaBadge,
  .terminalTimeAgo {
    font-size: 9px;
  }

  .terminalStatusPill {
    font-size: 9px;
    padding: 3px 6px;
  }

  .terminalExecBtn {
    font-size: 14px;
    padding: 4px 8px;
  }

  .maestroAgentSelector {
    font-size: 9px;
    padding: 4px 7px;
  }
}

/* Container query support for narrow right panels */
.rightPanel {
  container-type: inline-size;
  container-name: right-panel;
}

.maestroPanel {
  container-type: inline-size;
  container-name: maestro-panel;
}

/* Responsive styles for narrow right panel using container queries */
@container maestro-panel (max-width: 400px) {
  .terminalMetaBadge {
    font-size: 9px;
    padding: 2px 5px;
  }

  .terminalTreeCollapseBtn {
    width: 18px;
    height: 18px;
    font-size: 12px;
    margin-right: 6px;
  }

  .terminalTreeCollapseSpacer {
    width: 18px;
    margin-right: 6px;
  }
}

@container maestro-panel (max-width: 320px) {
  .terminalTaskTitle {
    font-size: 12px;
  }

  .terminalTaskMeta {
    gap: 3px;
  }

  .terminalMetaBadge {
    font-size: 8px;
    padding: 1px 4px;
  }

  .terminalSessionStatuses {
    display: none;
  }

  .terminalPlayBtn {
    width: 26px;
    height: 26px;
    font-size: 12px;
  }

  .terminalPinBtn {
    width: 26px;
    height: 26px;
  }
}

@container maestro-panel (max-width: 280px) {
  .terminalTaskMain {
    padding: 8px;
    gap: 6px;
  }

  .terminalTaskTitle {
    font-size: 11px;
  }

  .terminalMetaBadgeCaret {
    display: none;
  }

  /* Hide priority badge on very narrow panels */
  .terminalInlinePriorityPicker {
    display: none;
  }

  /* Compact tab system for narrow panels */
  .maestroPanelUtilityBar {
    padding: 4px 8px;
  }

  .maestroPanelPrimaryTabs {
    padding: 0 8px;
  }

  .maestroPanelPrimaryTab {
    padding: 8px 10px;
    font-size: 10px;
    gap: 4px;
  }

  .maestroPanelTabIcon {
    width: 12px;
    height: 12px;
  }

  .maestroPanelSubTabs {
    padding: 0 8px;
  }

  .maestroPanelSubTab {
    padding: 5px 8px;
    font-size: 9px;
  }

  .terminalCommandBar {
    flex-direction: column;
    gap: 8px;
  }

  .terminalCommands {
    flex-wrap: wrap;
  }

  .terminalStats {
    justify-content: flex-start;
  }
}

/* Connection status */
.maestroConnectionStatus {
  color: var(--terminal-amber);
  font-size: 10px;
  padding: 2px 6px;
  border: 1px solid var(--terminal-amber);
  background: rgba(255, 176, 0, 0.1);
  border-radius: 3px;
  animation: blinkAlert 1s infinite;
}

/* ========== Task Search Bar ========== */

.taskSearchBar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 16px;
  border-bottom: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.15);
}

.taskSearchBar__icon {
  color: var(--terminal-text-dim);
  font-size: 14px;
  flex-shrink: 0;
}

.taskSearchBar__input {
  flex: 1;
  background: rgba(255, 255, 255, 0.04);
  border: 1px solid var(--terminal-border);
  border-radius: 4px;
  padding: 5px 10px;
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 12px;
  outline: none;
  transition: border-color 0.15s ease, background 0.15s ease;
}

.taskSearchBar__input::placeholder {
  color: var(--terminal-text-dim);
  opacity: 0.6;
}

.taskSearchBar__input:focus {
  border-color: var(--terminal-accent, #58a6ff);
  background: rgba(255, 255, 255, 0.06);
}

.taskSearchBar__clear {
  background: none;
  border: none;
  color: var(--terminal-text-dim);
  font-size: 16px;
  cursor: pointer;
  padding: 0 4px;
  line-height: 1;
  transition: color 0.15s ease;
  flex-shrink: 0;
}

.taskSearchBar__clear:hover {
  color: var(--terminal-text);
}

/* ========== Filter Bar (Redesigned) ========== */

.filterBar {
  padding: 0 16px;
  border-bottom: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.2);
  position: relative;
  z-index: 1001;
}

.filterBar--expanded {
  padding-bottom: 12px;
}

/* Header row: toggle + active chips on the same line */
.filterBar__header {
  display: flex;
  align-items: center;
  gap: 8px;
  min-height: 0;
}

/* Toggle button */
.filterBar__toggle {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 8px 0;
  background: none;
  border: none;
  color: var(--terminal-text-dim);
  font-size: 11px;
  font-family: var(--style-font-ui);
  cursor: pointer;
  transition: color 0.15s ease;
  flex-shrink: 0;
}

.filterBar__toggle:hover {
  color: var(--terminal-text);
}

.filterBar__toggleIcon {
  font-size: 12px;
  opacity: 0.6;
}

.filterBar__toggleLabel {
  font-weight: 600;
  letter-spacing: 0.03em;
  text-transform: uppercase;
  font-size: 10px;
}

.filterBar__badge {
  background: var(--terminal-green);
  color: #000;
  font-size: 9px;
  font-weight: 700;
  min-width: 16px;
  height: 16px;
  border-radius: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
}

.filterBar__arrow {
  font-size: 10px;
  transition: transform 0.2s ease;
}

.filterBar__arrow--open {
  transform: rotate(180deg);
}

/* Active filter summary (collapsed state) — inline with toggle */
.filterBar__activeSummary {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: nowrap;
  overflow: hidden;
  min-width: 0;
  flex: 1;
}

/* Expanded panel */
.filterBar__panel {
  display: flex;
  flex-direction: column;
  gap: 10px;
  padding-top: 4px;
}

/* Filter groups */
.filterGroup {
  display: flex;
  align-items: center;
  gap: 10px;
}

.filterGroup__label {
  font-size: 10px;
  font-family: var(--style-font-ui);
  font-weight: 600;
  color: var(--terminal-text-dim);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  min-width: 56px;
  flex-shrink: 0;
}

.filterGroup__chips {
  display: flex;
  gap: 5px;
  flex-wrap: wrap;
}

/* Filter chips (pill buttons) */
.filterChip {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 10px;
  border-radius: 12px;
  border: 1px solid var(--terminal-border);
  background: transparent;
  color: var(--terminal-text-dim);
  font-size: 10px;
  font-family: var(--style-font-ui);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
  flex-shrink: 0;
}

.filterChip:hover {
  border-color: var(--terminal-text-dim);
  color: var(--terminal-text);
}

.filterChip__icon {
  font-size: 10px;
  line-height: 1;
}

.filterChip__dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: currentColor;
  flex-shrink: 0;
}

.filterChip__remove {
  background: none;
  border: none;
  color: inherit;
  font-size: 11px;
  cursor: pointer;
  padding: 0 0 0 2px;
  line-height: 1;
  opacity: 0.6;
  transition: opacity 0.15s ease;
}

.filterChip__remove:hover {
  opacity: 1;
}

/* Status semantic colors */
.filterChip--todo:hover,
.filterChip--todo.filterChip--active {
  border-color: var(--terminal-amber);
  color: var(--terminal-amber);
}
.filterChip--todo.filterChip--active {
  background: rgba(255, 176, 0, 0.15);
}

.filterChip--inProgress:hover,
.filterChip--inProgress.filterChip--active {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
}
.filterChip--inProgress.filterChip--active {
  background: rgba(var(--theme-primary-rgb), 0.15);
}

.filterChip--inReview:hover,
.filterChip--inReview.filterChip--active {
  border-color: #a855f7;
  color: #a855f7;
}
.filterChip--inReview.filterChip--active {
  background: rgba(168, 85, 247, 0.12);
}

.filterChip--completed:hover,
.filterChip--completed.filterChip--active {
  border-color: var(--terminal-cyan);
  color: var(--terminal-cyan);
}
.filterChip--completed.filterChip--active {
  background: rgba(0, 217, 255, 0.12);
}

.filterChip--blocked:hover,
.filterChip--blocked.filterChip--active {
  border-color: var(--terminal-red);
  color: var(--terminal-red);
}
.filterChip--blocked.filterChip--active {
  background: rgba(255, 59, 59, 0.12);
}

.filterChip--cancelled:hover,
.filterChip--cancelled.filterChip--active {
  border-color: var(--terminal-text-dim);
  color: var(--terminal-text-dim);
}
.filterChip--cancelled.filterChip--active {
  background: rgba(255, 255, 255, 0.06);
}

/* Priority semantic colors */
.filterChip--high:hover,
.filterChip--high.filterChip--active {
  border-color: var(--terminal-red);
  color: var(--terminal-red);
}
.filterChip--high.filterChip--active {
  background: rgba(255, 59, 59, 0.12);
}

.filterChip--medium:hover,
.filterChip--medium.filterChip--active {
  border-color: var(--terminal-amber);
  color: var(--terminal-amber);
}
.filterChip--medium.filterChip--active {
  background: rgba(255, 176, 0, 0.12);
}

.filterChip--low:hover,
.filterChip--low.filterChip--active {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
}
.filterChip--low.filterChip--active {
  background: rgba(var(--theme-primary-rgb), 0.12);
}

/* Sort chip */
.filterChip--sort:hover,
.filterChip--sort.filterChip--active {
  border-color: var(--terminal-blue);
  color: var(--terminal-blue);
}
.filterChip--sort.filterChip--active {
  background: rgba(107, 138, 253, 0.12);
}

/* Segmented control for sort */
.filterGroup__segmented {
  display: flex;
  border: 1px solid var(--terminal-border);
  border-radius: 6px;
  overflow: hidden;
}

.filterSegment {
  padding: 4px 12px;
  background: transparent;
  border: none;
  border-right: 1px solid var(--terminal-border);
  color: var(--terminal-text-dim);
  font-size: 10px;
  font-family: var(--style-font-ui);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
}

.filterSegment:last-child {
  border-right: none;
}

.filterSegment:hover {
  color: var(--terminal-text);
  background: rgba(255, 255, 255, 0.04);
}

.filterSegment--active {
  background: rgba(var(--theme-primary-rgb), 0.15);
  color: var(--terminal-green);
  font-weight: 600;
}

/* Clear all button */
.filterBar__clearAll {
  background: none;
  border: none;
  color: var(--terminal-text-dim);
  font-size: 10px;
  font-family: var(--style-font-ui);
  cursor: pointer;
  padding: 2px 6px;
  transition: color 0.15s ease;
  opacity: 0.7;
  flex-shrink: 0;
  white-space: nowrap;
}

.filterBar__clearAll:hover {
  color: var(--terminal-red);
  opacity: 1;
}

/* Terminal Modal Styles */
.maestroModal.terminalModal {
  background: rgba(0, 0, 0, 0.95);
  backdrop-filter: blur(8px);
}

.maestroModal.terminalModal .maestroModalContainer {
  background: #000000;
  border: 2px solid var(--terminal-green);
  box-shadow:
    0 0 40px rgba(var(--theme-primary-rgb), 0.4),
    0 20px 60px rgba(0, 0, 0, 0.9);
  max-width: 600px;
  position: relative;
}

/* Scanline effect for modals */
.maestroModal.terminalModal .maestroModalContainer::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(0deg,
      rgba(0, 0, 0, 0.15) 0px,
      rgba(0, 0, 0, 0.15) 1px,
      transparent 1px,
      transparent 2px);
  pointer-events: none;
  z-index: 10;
  opacity: 0.3;
}

.maestroModal.terminalModal .maestroModalHeader {
  background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
  border-bottom: 1px solid var(--terminal-border);
}

.maestroModal.terminalModal .maestroModalTitle {
  color: var(--terminal-green);
  font-family: var(--style-font-ui);
  font-weight: 700;
  text-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.5);
}

.maestroModal.terminalModal .maestroModalTitle::before {
  content: '$ ';
  color: var(--terminal-amber);
}

.maestroModal.terminalModal .maestroModalContent {
  background: rgba(var(--theme-primary-rgb), 0.02);
}

.maestroModal.terminalModal .maestroFormLabel {
  color: var(--terminal-amber);
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  text-transform: lowercase;
  letter-spacing: 0.03em;
}

.maestroModal.terminalModal .maestroFormLabel::before {
  content: '--';
  margin-right: 4px;
}

.maestroModal.terminalModal .maestroFormInput,
.maestroModal.terminalModal .maestroFormTextarea,
.maestroModal.terminalModal .maestroFormSelect {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 12px;
}

.maestroModal.terminalModal .maestroFormInput:focus,
.maestroModal.terminalModal .maestroFormTextarea:focus,
.maestroModal.terminalModal .maestroFormSelect:focus {
  outline: none;
  border-color: var(--terminal-green);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.3);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.maestroModal.terminalModal .maestroButton {
  font-family: var(--style-font-ui);
  font-weight: 600;
  text-transform: lowercase;
  letter-spacing: 0.03em;
}

.maestroModal.terminalModal .maestroButtonPrimary {
  background: transparent;
  border: 1px solid var(--terminal-green);
  color: var(--terminal-green);
}

.maestroModal.terminalModal .maestroButtonPrimary::before {
  content: '$ ';
  color: var(--terminal-amber);
  margin-right: 4px;
}

.maestroModal.terminalModal .maestroButtonPrimary:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.5);
}

.maestroModal.terminalModal .maestroButtonSecondary {
  background: transparent;
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text-dim);
}

.maestroModal.terminalModal .maestroButtonSecondary:hover {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

/* Terminal checkbox styling */
.maestroModal.terminalModal input[type="checkbox"] {
  appearance: none;
  width: 16px;
  height: 16px;
  border: 1px solid var(--terminal-border);
  background: transparent;
  cursor: pointer;
  position: relative;
  transition: all 0.2s ease;
}

.maestroModal.terminalModal input[type="checkbox"]:checked {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.maestroModal.terminalModal input[type="checkbox"]:checked::before {
  content: '✓';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  color: var(--terminal-green);
  font-size: 12px;
  font-weight: 700;
}

.maestroModal.terminalModal input[type="checkbox"]:hover {
  border-color: var(--terminal-green);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

/* Terminal-themed CreateTaskModal */
.createTaskModal.terminalTheme {
  background: #000000;
  border: 2px solid var(--terminal-green);
  box-shadow:
    0 0 40px rgba(var(--theme-primary-rgb), 0.5),
    0 20px 80px rgba(0, 0, 0, 0.9);
}

.createTaskModal.terminalTheme::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(0deg,
      rgba(0, 0, 0, 0.15) 0px,
      rgba(0, 0, 0, 0.15) 1px,
      transparent 1px,
      transparent 2px);
  pointer-events: none;
  z-index: 1;
  opacity: 0.3;
}

.createTaskModal.terminalTheme .createTaskModalHeader {
  background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
  border-bottom: 1px solid var(--terminal-border);
  position: relative;
  z-index: 2;
}

.createTaskModal.terminalTheme .createTaskModalIcon {
  color: var(--terminal-green);
  text-shadow: 0 0 10px var(--terminal-green);
}

.createTaskModal.terminalTheme .createTaskModalTitle {
  color: var(--terminal-green);
  font-family: var(--style-font-ui);
  font-weight: 700;
  text-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.4);
}

.createTaskModal.terminalTheme .createTaskModalTitle::before {
  content: '$ ';
  color: var(--terminal-amber);
  margin-right: 6px;
}

.createTaskModal.terminalTheme .createTaskModalSubtitle {
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
  font-size: 11px;
}

.createTaskModal.terminalTheme .createTaskModalBody {
  background: rgba(var(--theme-primary-rgb), 0.02);
  position: relative;
  z-index: 2;
}

.createTaskModal.terminalTheme .createTaskLabel {
  color: var(--terminal-amber);
  font-family: var(--style-font-ui);
  font-weight: 600;
  font-size: 11px;
  text-transform: lowercase;
  letter-spacing: 0.03em;
}

.createTaskModal.terminalTheme .createTaskLabel::before {
  content: '--';
  margin-right: 4px;
  color: var(--terminal-text-dim);
}

.createTaskModal.terminalTheme .createTaskTitleInput {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 14px;
  font-weight: 500;
}

.createTaskModal.terminalTheme .createTaskTitleInput:focus {
  outline: none;
  border-color: var(--terminal-green);
  box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.4);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.createTaskModal.terminalTheme .createTaskTitleInput::placeholder {
  color: var(--terminal-text-dim);
  opacity: 0.5;
}

.createTaskModal.terminalTheme .createTaskPromptArea {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 12px;
  line-height: 1.6;
}

.createTaskModal.terminalTheme .createTaskPromptArea:focus {
  outline: none;
  border-color: var(--terminal-green);
  box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.4);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.createTaskModal.terminalTheme .createTaskPromptArea::placeholder {
  color: var(--terminal-text-dim);
  opacity: 0.5;
}

.createTaskModal.terminalTheme .createTaskPromptHint {
  color: var(--terminal-cyan);
  font-family: var(--style-font-ui);
  font-size: 10px;
}

.createTaskModal.terminalTheme .createTaskOptionLabel {
  color: var(--terminal-amber);
  font-family: var(--style-font-ui);
  font-weight: 600;
  font-size: 11px;
}

.createTaskModal.terminalTheme .createTaskPriorityBtn {
  background: transparent;
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
  font-weight: 500;
  font-size: 11px;
  text-transform: lowercase;
}

.createTaskModal.terminalTheme .createTaskPriorityBtn:hover {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.createTaskModal.terminalTheme .createTaskPriorityBtn.active {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.12);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.3);
  font-weight: 700;
}

.createTaskModal.terminalTheme .createTaskAdvancedToggle {
  color: var(--terminal-cyan);
  font-family: var(--style-font-ui);
  font-size: 11px;
}

.createTaskModal.terminalTheme .createTaskAdvancedToggle:hover {
  color: var(--terminal-green);
}

.createTaskModal.terminalTheme .createTaskModalFooter {
  background: linear-gradient(180deg, #0d0d0d 0%, #000000 100%);
  border-top: 1px solid var(--terminal-border);
  position: relative;
  z-index: 2;
}

.createTaskModal.terminalTheme .createTaskModalKeyboardHint {
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
  font-size: 10px;
  padding: 4px 8px;
  border: 1px solid var(--terminal-border);
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.createTaskModal.terminalTheme .createTaskBtn {
  font-family: var(--style-font-ui);
  font-weight: 600;
  text-transform: lowercase;
  letter-spacing: 0.03em;
  font-size: 12px;
}

.createTaskModal.terminalTheme .createTaskBtnSecondary {
  background: transparent;
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text-dim);
}

.createTaskModal.terminalTheme .createTaskBtnSecondary:hover:not(:disabled) {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.createTaskModal.terminalTheme .createTaskBtnPrimary {
  background: transparent;
  border: 1px solid var(--terminal-green);
  color: var(--terminal-green);
}

.createTaskModal.terminalTheme .createTaskBtnPrimary::before {
  content: '$ ';
  color: var(--terminal-amber);
  margin-right: 4px;
}

.createTaskModal.terminalTheme .createTaskBtnPrimary:hover:not(:disabled) {
  background: rgba(var(--theme-primary-rgb), 0.15);
  box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.5);
}

.createTaskModal.terminalTheme .createTaskBtnSuccess {
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid var(--terminal-green);
  color: var(--terminal-green);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.3);
}

.createTaskModal.terminalTheme .createTaskBtnSuccess::before {
  content: '▶ ';
  margin-right: 4px;
}

.createTaskModal.terminalTheme .createTaskBtnSuccess:hover:not(:disabled) {
  background: rgba(var(--theme-primary-rgb), 0.2);
  box-shadow: 0 0 24px rgba(var(--theme-primary-rgb), 0.6);
  transform: scale(1.02);
}

.createTaskModal.terminalTheme .createTaskBtn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
  border-color: var(--terminal-border);
}

.createTaskModal.terminalTheme .createTaskBtnDanger {
  background: rgba(255, 80, 80, 0.1);
  border: 1px solid rgba(255, 80, 80, 0.6);
  color: #ff5050;
}

.createTaskModal.terminalTheme .createTaskBtnDanger:hover:not(:disabled) {
  background: rgba(255, 80, 80, 0.2);
  box-shadow: 0 0 20px rgba(255, 80, 80, 0.4);
}

/* Confirmation Dialog */
.confirmDialogOverlay {
  z-index: 10001;
  background: rgba(0, 0, 0, 0.8);
}

.confirmDialog {
  width: 90%;
  max-width: 400px;
  border-radius: 8px;
  overflow: hidden;
}

.confirmDialog.terminalTheme {
  background: #000000;
  border: 2px solid var(--terminal-amber);
  box-shadow: 0 0 30px rgba(255, 191, 0, 0.3);
}

.confirmDialogHeader {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 16px 20px;
  background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
  border-bottom: 1px solid var(--terminal-border);
  color: var(--terminal-amber);
  font-family: var(--style-font-ui);
  font-weight: 600;
  font-size: 14px;
}

.confirmDialogIcon {
  font-size: 18px;
  text-shadow: 0 0 8px rgba(255, 191, 0, 0.5);
}

.confirmDialogBody {
  padding: 20px;
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 13px;
  line-height: 1.5;
}

.confirmDialogFooter {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 16px 20px;
  background: linear-gradient(180deg, #0d0d0d 0%, #000000 100%);
  border-top: 1px solid var(--terminal-border);
}

/* Terminal input cursor animation */
.terminalTheme input:focus,
.terminalTheme textarea:focus {
  caret-color: var(--terminal-green);
}

/* Glowing text selection */
.terminalTheme ::selection {
  background: rgba(var(--theme-primary-rgb), 0.3);
  color: var(--terminal-text);
}

/* Additional terminal effects */
@keyframes terminalFlicker {

  0%,
  100% {
    opacity: 1;
  }

  50% {
    opacity: 0.97;
  }
}

.terminalTheme {
  animation: terminalFlicker 0.15s infinite;
}

/* Phosphor glow on hover for interactive elements */
.terminalTheme button:not(:disabled):hover,
.terminalTheme select:hover,
.terminalTheme input:hover {
  position: relative;
}

.terminalTheme button:not(:disabled):hover::after,
.terminalTheme select:hover::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at center,
      rgba(var(--theme-primary-rgb), 0.1) 0%,
      transparent 70%);
  pointer-events: none;
}
/* ===================================
   SIDEBAR REDESIGN - CYBERPUNK TERMINAL
   Matching the Maestro Panel Aesthetic
   =================================== */

.sidebar {
  /* Terminal Theme Variables - aliased to dynamic theme vars */
  --terminal-green: var(--theme-primary);
  --terminal-green-dim: var(--theme-primary-dim);
  --terminal-amber: #ffb000;
  --terminal-cyan: #00d9ff;
  --terminal-blue: #6b8afd;
  --terminal-red: #ff3b3b;
  --terminal-gray: #888888;
  --terminal-bg: #000000;
  --terminal-bg-alt: #0a0a0a;
  --terminal-border: var(--theme-border);
  --terminal-text: var(--theme-text);
  --terminal-text-dim: var(--theme-text-dim);
  
  /* Overrides */
  --text: var(--terminal-text);
  --muted: var(--terminal-text-dim);
  --border: var(--terminal-border);
  --panel: var(--terminal-bg);
  --panel-2: var(--terminal-bg-alt);
  --accent: var(--terminal-green);
  --accent-2: var(--terminal-cyan);
  
  /* Base Sidebar Styles */
  background: var(--terminal-bg) !important;
  border-right: 1px solid var(--terminal-border) !important;
  font-family: var(--style-font-ui);
  position: relative;
  overflow: hidden; /* For scanlines */
}

/* Scanline Overlay for Sidebar */
.sidebar::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.15) 0px,
      rgba(0, 0, 0, 0.15) 1px,
      transparent 1px,
      transparent 2px
  );
  pointer-events: none;
  z-index: 1;
  opacity: 0.2;
}

/* CRT Glow for Sidebar */
.sidebar::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(
      ellipse at top left,
      rgba(var(--theme-primary-rgb), 0.05) 0%,
      transparent 60%
  );
  pointer-events: none;
  z-index: 2;
}

/* Ensure content is above effects */
.sidebar > * {
  position: relative;
  z-index: 3;
}

.sidebarHeader {
  border-bottom: 1px solid var(--terminal-border) !important;
  padding-bottom: 8px;
  margin-bottom: 4px;
}

.sidebarHeader .title {
  font-family: var(--style-font-ui);
  color: var(--terminal-green) !important;
  text-transform: uppercase;
  font-size: 11px;
  letter-spacing: 0.1em;
  text-shadow: 0 0 4px rgba(var(--theme-primary-rgb), 0.4);
}

/* Sidebar Buttons */
.sidebar .btnSmall {
  border: 1px solid var(--terminal-border);
  background: rgba(var(--theme-primary-rgb), 0.05);
  color: var(--terminal-green-dim);
  border-radius: 2px;
  transition: all 0.2s ease;
}

.sidebar .btnSmall:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.2);
}

.sidebar .btnSmall.btnIconActive {
  background: rgba(var(--theme-primary-rgb), 0.2);
  border-color: var(--terminal-green);
  color: var(--terminal-text);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

/* Project Items */
.projectList {
  gap: 4px; /* Tighter spacing */
}

.projectItem {
  border: 1px solid transparent;
  background: transparent;
  color: var(--terminal-text-dim);
  border-radius: 2px;
  font-family: var(--style-font-ui);
  font-size: 12px;
}

.projectItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  color: var(--terminal-text);
}

.projectItemActive {
  background: rgba(var(--theme-primary-rgb), 0.1) !important;
  border-color: var(--terminal-green) !important;
  color: var(--terminal-text) !important;
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.15), inset 0 0 12px rgba(var(--theme-primary-rgb), 0.05);
}

.projectTitle {
  font-weight: 500;
  letter-spacing: 0.02em;
}

.projectCount {
  color: var(--terminal-text-dim);
  border: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.3);
  padding: 1px 6px;
  border-radius: 2px;
}

.projectAgentsBadge {
  border: 1px solid var(--terminal-border);
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-green);
  border-radius: 2px;
}

.projectAgentsDot {
  background: var(--terminal-green);
  box-shadow: 0 0 4px var(--terminal-green);
  animation: pulseGlow 2s infinite;
}

/* Session Items (Left Panel) */
.sessionList {
  gap: 4px;
}

.sessionItem {
  border-radius: 2px;
  border: 1px solid transparent;
  background: transparent;
  font-family: var(--style-font-ui);
  color: var(--terminal-text-dim);
}

.sessionItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  color: var(--terminal-text);
}

.sessionItemActive {
  background: rgba(var(--theme-primary-rgb), 0.1) !important;
  border-color: var(--terminal-green) !important;
  color: var(--terminal-text) !important;
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.15);
}

.sessionNameText {
  font-weight: 500;
  letter-spacing: 0.02em;
}

.sessionCmd {
  color: #008f11; /* Darker green for dim text */
  font-family: var(--style-font-ui);
  opacity: 0.8;
}

.sessionStatus {
  color: var(--terminal-amber);
}

/* Dots */
.dot {
  background: rgba(var(--theme-primary-rgb), 0.2);
  border: 1px solid var(--terminal-border);
}

.dotActive {
  background: var(--terminal-green);
  box-shadow: 0 0 4px var(--terminal-green);
}

/* Agent Shortcuts */
.agentShortcutRow {
  padding-bottom: 8px;
  border-bottom: 1px dashed var(--terminal-border);
  margin-bottom: 8px;
}

.agentShortcutBtn {
  border: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.3);
  color: var(--terminal-text-dim);
  border-radius: 2px;
  font-family: var(--style-font-ui);
}

.agentShortcutBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  border-color: var(--terminal-green);
  color: var(--terminal-text);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.15);
}

/* Resize Handle */
.sidebarResizeHandle::before {
  background: var(--terminal-border);
}

.sidebarResizeHandle:hover::before {
  background: var(--terminal-green);
  box-shadow: 0 0 4px var(--terminal-green);
}

/* Dropdowns in Sidebar */
.sidebarActionMenuDropdown {
  background: var(--terminal-bg, var(--panel, #10151e));
  border: 1px solid var(--terminal-green, var(--theme-primary, #6b8afd));
  border-radius: 2px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6), 0 4px 20px rgba(var(--theme-primary-rgb, 107, 138, 253), 0.15);
}

.sidebarActionMenuDropdown--fixed {
  position: fixed;
  z-index: 10000;
}

.sidebarActionMenuItem {
  color: var(--terminal-text, var(--text, #f0f4f8));
  font-family: var(--style-font-ui);
  border-radius: 2px;
}

.sidebarActionMenuItem:hover {
  background: rgba(var(--theme-primary-rgb, 107, 138, 253), 0.1);
  border-color: var(--terminal-green-dim, var(--theme-primary-dim, #4a6afd));
}

/* Scrollbars */
.projectList::-webkit-scrollbar,
.sessionList::-webkit-scrollbar {
  width: 4px;
}

.projectList::-webkit-scrollbar-thumb,
.sessionList::-webkit-scrollbar-thumb {
  background: var(--terminal-border);
  border-radius: 2px;
}

.projectList::-webkit-scrollbar-thumb:hover,
.sessionList::-webkit-scrollbar-thumb:hover {
  background: var(--terminal-green-dim);
}

/* Skills Selector Styles */
.createTaskAdvancedSection {
  padding: 12px 0;
  border-top: 1px solid var(--terminal-border);
}

.createTaskAdvancedLabel {
  display: block;
  font-size: 12px;
  font-weight: 500;
  color: var(--terminal-text-dim);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-bottom: 12px;
  font-family: var(--style-font-ui);
}

.createTaskSkillsLoading,
.createTaskSkillsError,
.createTaskSkillsEmpty {
  padding: 12px;
  border-radius: 2px;
  font-family: var(--style-font-ui);
  font-size: 13px;
  line-height: 1.5;
}

.createTaskSkillsLoading {
  color: var(--terminal-amber);
  background: rgba(180, 83, 9, 0.1);
  border: 1px solid rgba(180, 83, 9, 0.3);
  display: flex;
  align-items: center;
  gap: 8px;
}

.createTaskSkillsSpinner {
  display: inline-block;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

.createTaskSkillsError {
  color: #ff4444;
  background: rgba(255, 68, 68, 0.1);
  border: 1px solid rgba(255, 68, 68, 0.3);
}

.createTaskSkillsEmpty {
  color: var(--terminal-text-dim);
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid var(--terminal-border);
}

.createTaskSkillsEmpty code {
  background: rgba(0, 255, 0, 0.1);
  color: var(--terminal-green);
  padding: 2px 6px;
  border-radius: 2px;
  font-family: var(--style-font-ui);
}

.createTaskSkillsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 10px;
}

.createTaskSkillCheckbox {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  padding: 12px;
  border: 1px solid var(--terminal-border);
  border-radius: 2px;
  background: rgba(var(--theme-primary-rgb), 0.02);
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: var(--style-font-ui);
}

.createTaskSkillCheckbox:hover {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-color: var(--terminal-green-dim);
  box-shadow: 0 0 4px rgba(var(--theme-primary-rgb), 0.1);
}

.createTaskSkillCheckbox input[type="checkbox"] {
  flex-shrink: 0;
  width: 16px;
  height: 16px;
  margin-top: 2px;
  cursor: pointer;
  accent-color: var(--terminal-green);
}

.createTaskSkillInfo {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.createTaskSkillName {
  font-weight: 500;
  color: var(--terminal-text);
  font-size: 13px;
}

.createTaskSkillDescription {
  font-size: 12px;
  color: var(--terminal-text-dim);
  line-height: 1.4;
  word-break: break-word;
}

.createTaskSkillType {
  font-size: 11px;
  color: var(--terminal-amber);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  margin-top: 2px;
}

/* ------------------------------------------------------------------ */
/*  Template Management                                                */
/* ------------------------------------------------------------------ */

.templateList {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  height: 100%;
  overflow: auto;
}

.templateListHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.templateListTitle {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 16px;
  font-weight: 600;
  color: var(--terminal-green);
}

.templateListDescription {
  font-size: 13px;
  color: var(--terminal-text-dim);
  margin: 0;
  line-height: 1.5;
}

.templateListError,
.templateEditorError {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 14px;
  background: rgba(255, 100, 100, 0.1);
  border: 1px solid rgba(255, 100, 100, 0.3);
  border-radius: 6px;
  color: #ff6b6b;
  font-size: 13px;
}

.templateListLoading,
.templateListEmpty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 12px;
  padding: 40px 20px;
  color: var(--terminal-text-dim);
  font-size: 13px;
  text-align: center;
}

.templateListItems {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.templateListItem {
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px 16px;
  background: var(--terminal-surface);
  border: 1px solid var(--terminal-border);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.15s ease;
}

.templateListItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border-color: var(--terminal-green-dim);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.1);
}

.templateListItemIcon {
  flex-shrink: 0;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-radius: 8px;
}

.templateListItemContent {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.templateListItemHeader {
  display: flex;
  align-items: center;
  gap: 10px;
}

.templateListItemName {
  font-weight: 500;
  color: var(--terminal-text);
  font-size: 14px;
}

.templateListItemRole {
  font-size: 11px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 2px 8px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border-radius: 4px;
}

.templateListItemMeta {
  display: flex;
  align-items: center;
  gap: 14px;
  font-size: 12px;
  color: var(--terminal-text-dim);
}

.templateListItemId,
.templateListItemDate {
  display: flex;
  align-items: center;
  gap: 4px;
}

.templateListItemBadge {
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 2px 6px;
  background: rgba(255, 200, 100, 0.15);
  color: var(--terminal-amber);
  border-radius: 3px;
}

.templateListItemAction {
  flex-shrink: 0;
  color: var(--terminal-text-dim);
  opacity: 0;
  transition: opacity 0.15s ease;
}

.templateListItem:hover .templateListItemAction {
  opacity: 1;
}

/* Template Editor */

.templateEditor {
  display: flex;
  flex-direction: column;
  height: 100%;
  background: var(--terminal-bg);
}

.templateEditorHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 14px 16px;
  border-bottom: 1px solid var(--terminal-border);
  flex-shrink: 0;
}

.templateEditorTitle {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 15px;
  font-weight: 600;
  color: var(--terminal-green);
}

.templateEditorActions {
  display: flex;
  align-items: center;
  gap: 8px;
}

.templateEditorBody {
  flex: 1;
  display: flex;
  min-height: 0;
  overflow: hidden;
}

.templateEditorMain {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: 16px;
  overflow: auto;
}

.templateEditorMain.withSidebar {
  width: 65%;
}

.templateEditorField {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.templateEditorFieldContent {
  flex: 1;
  min-height: 200px;
  display: flex;
  flex-direction: column;
}

.templateEditorLabel {
  display: flex;
  align-items: center;
  justify-content: space-between;
  font-size: 12px;
  font-weight: 600;
  color: var(--terminal-text-dim);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.templateEditorLabelHint {
  font-weight: 400;
  text-transform: none;
  letter-spacing: normal;
  font-size: 11px;
  color: var(--terminal-text-dim);
  opacity: 0.7;
}

.templateEditorInput {
  padding: 10px 12px;
  background: var(--terminal-surface);
  border: 1px solid var(--terminal-border);
  border-radius: 6px;
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 13px;
  outline: none;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

.templateEditorInput:focus {
  border-color: var(--terminal-green-dim);
  box-shadow: 0 0 0 2px rgba(var(--theme-primary-rgb), 0.1);
}

.templateEditorTextarea {
  flex: 1;
  min-height: 300px;
  padding: 12px;
  background: var(--terminal-surface);
  border: 1px solid var(--terminal-border);
  border-radius: 6px;
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 13px;
  line-height: 1.6;
  outline: none;
  resize: none;
  transition: border-color 0.15s ease, box-shadow 0.15s ease;
}

.templateEditorTextarea:focus {
  border-color: var(--terminal-green-dim);
  box-shadow: 0 0 0 2px rgba(var(--theme-primary-rgb), 0.1);
}

.templateEditorSidebar {
  width: 35%;
  border-left: 1px solid var(--terminal-border);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.templateVariablesHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 12px 14px;
  font-size: 12px;
  font-weight: 600;
  color: var(--terminal-text-dim);
  text-transform: uppercase;
  letter-spacing: 0.05em;
  border-bottom: 1px solid var(--terminal-border);
  flex-shrink: 0;
}

.templateVariablesList {
  flex: 1;
  overflow: auto;
  padding: 8px;
}

.templateVariableItem {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 10px 12px;
  background: transparent;
  border: 1px solid transparent;
  border-radius: 6px;
  text-align: left;
  cursor: pointer;
  width: 100%;
  transition: all 0.15s ease;
}

.templateVariableItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border-color: var(--terminal-border);
}

.templateVariableName {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: var(--terminal-cyan);
}

.templateVariableDesc {
  font-size: 11px;
  color: var(--terminal-text-dim);
  line-height: 1.4;
}

.templateEditorFooter {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
  padding: 14px 16px;
  border-top: 1px solid var(--terminal-border);
  flex-shrink: 0;
}

.templateEditorFooterLeft,
.templateEditorFooterRight {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Danger button variant */
.terminalBtnDanger {
  background: rgba(255, 100, 100, 0.1);
  border-color: rgba(255, 100, 100, 0.3);
  color: #ff6b6b;
}

.terminalBtnDanger:hover:not(:disabled) {
  background: rgba(255, 100, 100, 0.2);
  border-color: rgba(255, 100, 100, 0.5);
}

/* Spin animation */
.spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ------------------------------------------------------------------ */
/*  Maestro Panel Icon Bar                                             */
/* ------------------------------------------------------------------ */

/* ------------------------------------------------------------------ */
/*  Panel Tab System (two-tier: primary + sub-tabs)                    */
/* ------------------------------------------------------------------ */

.maestroPanelTabSystem {
  display: flex;
  flex-direction: column;
  background:
    linear-gradient(180deg,
      rgba(0, 0, 0, 0.25),
      rgba(0, 0, 0, 0.15));
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.06);
}

/* Utility bar - refresh & board at the top */
.maestroPanelUtilityBar {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  padding: 6px 12px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.06);
}

.maestroPanelUtilityActions {
  display: flex;
  gap: 6px;
}

.terminalCmdSmall {
  padding: 4px 10px !important;
  font-size: 10px !important;
}

/* Primary tabs - Tasks / Skills / Team */
.maestroPanelPrimaryTabs {
  display: flex;
  align-items: center;
  gap: 0;
  padding: 0 12px;
}

.maestroPanelPrimaryTab {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 10px 16px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.15s ease;
  letter-spacing: 0.03em;
  text-transform: lowercase;
}

.maestroPanelPrimaryTab:hover {
  color: var(--terminal-text);
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.maestroPanelPrimaryTabActive {
  color: var(--terminal-green);
  border-bottom-color: var(--terminal-green);
}

.maestroPanelPrimaryTabActive:hover {
  color: var(--terminal-green);
}

.maestroPanelTabIcon {
  width: 14px;
  height: 14px;
}

.maestroPanelTabBadge {
  font-family: var(--style-font-ui);
  font-size: 9px;
  line-height: 1;
  padding: 2px 5px;
  border-radius: 8px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--terminal-text-dim);
}

.maestroPanelPrimaryTabActive .maestroPanelTabBadge {
  background: rgba(var(--theme-primary-rgb), 0.15);
  color: var(--terminal-green);
}

/* Secondary sub-tabs */
.maestroPanelSubTabs {
  display: flex;
  align-items: center;
  gap: 0;
  padding: 0 12px;
  border-top: 1px solid rgba(var(--theme-primary-rgb), 0.06);
}

.maestroPanelSubTab {
  display: flex;
  align-items: center;
  gap: 5px;
  padding: 7px 12px;
  background: transparent;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
  font-size: 10px;
  font-weight: 400;
  cursor: pointer;
  transition: all 0.15s ease;
  letter-spacing: 0.02em;
  text-transform: lowercase;
}

.maestroPanelSubTab:hover {
  color: var(--terminal-text);
  background: rgba(var(--theme-primary-rgb), 0.04);
}

.maestroPanelSubTabActive {
  color: var(--terminal-green);
  border-bottom-color: var(--terminal-green);
}

.maestroPanelSubTabActive:hover {
  color: var(--terminal-green);
}

.maestroPanelSubTabCount {
  font-size: 9px;
  padding: 1px 4px;
  border-radius: 6px;
  background: rgba(var(--theme-primary-rgb), 0.08);
  color: var(--terminal-text-dim);
}

.maestroPanelSubTabActive .maestroPanelSubTabCount {
  background: rgba(var(--theme-primary-rgb), 0.12);
  color: var(--terminal-green);
}

/* Action button styled as a sub-tab (e.g., "+ New Task") */
.maestroPanelSubTab--action {
  color: var(--terminal-green);
  border-bottom-color: transparent;
  font-weight: 500;
}

.maestroPanelSubTab--action:hover {
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.maestroPanelSubTab--stat {
  cursor: default;
  opacity: 0.7;
  pointer-events: none;
}

.maestroPanelSubTabPlus {
  font-size: 13px;
  font-weight: 700;
  line-height: 1;
  margin-right: 2px;
}

/* Legacy compat - keep old class names working for responsive */
.maestroPanelIconBar {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 8px 12px;
  background: rgba(0, 0, 0, 0.15);
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.06);
}

.maestroPanelIconSvg {
  width: 16px;
  height: 16px;
}

.maestroPanelIconCount {
  font-family: var(--style-font-ui);
  font-size: 9px;
  line-height: 1;
  color: var(--terminal-text-dim);
}

/* ------------------------------------------------------------------ */
/*  Task Slide Animations                                              */
/* ------------------------------------------------------------------ */

@keyframes taskSlideOut {
  0% {
    opacity: 1;
    transform: translateX(0);
    max-height: 200px;
  }
  50% {
    opacity: 0.5;
    transform: translateX(100%);
    max-height: 200px;
  }
  100% {
    opacity: 0;
    transform: translateX(100%);
    max-height: 0;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }
}

.terminalTaskSlideOut {
  animation: taskSlideOut 0.5s ease-out forwards;
  pointer-events: none;
}

/* Completed task list styling */
.terminalTaskListCompleted .terminalTaskRow {
  opacity: 0.85;
}

.terminalTaskListCompleted .terminalTaskRow:hover {
  opacity: 1;
}

/* ==================== Strategy Selector ==================== */

.strategySelector {
  margin: 16px 0;
}

.strategySelectorTitle {
  color: var(--text-muted);
  font-size: 12px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 10px;
}

.strategySelectorOptions {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.strategySelectorOption {
  display: flex;
  align-items: flex-start;
  padding: 12px 14px;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 8px;
  background: rgba(255, 255, 255, 0.02);
  cursor: pointer;
  transition: all 0.2s ease;
}

.strategySelectorOption:hover {
  border-color: rgba(255, 255, 255, 0.2);
  background: rgba(255, 255, 255, 0.04);
}

.strategySelectorOption--selected {
  border-color: rgba(34, 197, 94, 0.5);
  background: rgba(34, 197, 94, 0.08);
}

.strategySelectorOption input[type="radio"] {
  margin-right: 12px;
  margin-top: 3px;
  accent-color: #22c55e;
}

.strategySelectorOptionContent {
  flex: 1;
}

.strategySelectorOptionTitle {
  font-size: 14px;
  font-weight: 500;
  color: var(--text);
  display: flex;
  align-items: center;
  gap: 8px;
}

.strategySelectorOptionIcon {
  font-size: 14px;
  opacity: 0.7;
}

.strategySelectorOptionDefault {
  font-size: 11px;
  color: var(--text-muted);
  font-weight: normal;
}

.strategySelectorOptionDesc {
  font-size: 12px;
  color: var(--text-muted);
  margin-top: 4px;
  line-height: 1.4;
}

/* ==================== Work On Modal ==================== */

.workOnModal {
  width: 90%;
  max-width: 480px;
  background: #000000;
  border: 2px solid var(--terminal-green);
  border-radius: 12px;
  box-shadow:
    0 0 40px rgba(var(--theme-primary-rgb), 0.4),
    0 20px 60px rgba(0, 0, 0, 0.9);
  position: relative;
  overflow: hidden;
  animation: slideUp 0.3s ease-out;
}

.workOnModal::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: repeating-linear-gradient(0deg,
      rgba(0, 0, 0, 0.15) 0px,
      rgba(0, 0, 0, 0.15) 1px,
      transparent 1px,
      transparent 2px);
  pointer-events: none;
  z-index: 1;
  opacity: 0.3;
}

.workOnModalHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 20px;
  background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
  border-bottom: 1px solid var(--terminal-border);
  position: relative;
  z-index: 2;
}

.workOnModalHeaderContent {
  display: flex;
  align-items: center;
  gap: 12px;
}

.workOnModalIcon {
  width: 36px;
  height: 36px;
  border-radius: 8px;
  background: rgba(var(--theme-primary-rgb), 0.15);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--terminal-green);
}

.workOnModalIcon svg {
  width: 18px;
  height: 18px;
}

.workOnModalTitle {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: var(--terminal-green);
  font-family: var(--style-font-ui);
  text-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.5);
}

.workOnModalSubtitle {
  margin: 2px 0 0 0;
  font-size: 12px;
  color: var(--terminal-text-dim);
}

.workOnModalClose {
  width: 32px;
  height: 32px;
  border: 1px solid var(--terminal-border);
  background: transparent;
  border-radius: 6px;
  color: var(--terminal-text-dim);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.workOnModalClose:hover {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.workOnModalClose svg {
  width: 16px;
  height: 16px;
}

.workOnModalBody {
  padding: 20px;
  position: relative;
  z-index: 2;
  background: rgba(var(--theme-primary-rgb), 0.02);
}

.workOnModalTask {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid var(--terminal-border);
  border-radius: 8px;
  padding: 14px;
  margin-bottom: 16px;
}

.workOnModalTaskLabel {
  font-size: 10px;
  color: var(--terminal-amber);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 6px;
  font-family: var(--style-font-ui);
}

.workOnModalTaskLabel::before {
  content: '//';
  margin-right: 4px;
  opacity: 0.5;
}

.workOnModalTaskTitle {
  font-size: 14px;
  font-weight: 500;
  color: var(--terminal-text);
  margin-bottom: 4px;
}

.workOnModalTaskId {
  font-size: 11px;
  color: var(--terminal-text-dim);
  font-family: var(--style-font-ui);
}

.workOnModalHint {
  display: flex;
  gap: 10px;
  padding: 12px;
  background: rgba(59, 130, 246, 0.08);
  border: 1px solid rgba(59, 130, 246, 0.25);
  border-radius: 8px;
  margin-top: 16px;
}

.workOnModalHintIcon {
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: rgba(59, 130, 246, 0.25);
  color: #60a5fa;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 700;
  flex-shrink: 0;
  font-family: var(--style-font-ui);
}

.workOnModalHintText {
  font-size: 12px;
  color: var(--terminal-text-dim);
  line-height: 1.5;
}

.workOnModalHintText code {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border: 1px solid var(--terminal-border);
  padding: 2px 6px;
  border-radius: 4px;
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: var(--terminal-green);
}

.workOnModalActions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 16px 20px;
  border-top: 1px solid var(--terminal-border);
  background: linear-gradient(180deg, #0d0d0d 0%, #000000 100%);
  position: relative;
  z-index: 2;
}

.workOnModalBtn {
  padding: 10px 20px;
  border-radius: 6px;
  font-size: 13px;
  font-weight: 600;
  font-family: var(--style-font-ui);
  text-transform: lowercase;
  letter-spacing: 0.03em;
  cursor: pointer;
  transition: all 0.2s ease;
}

.workOnModalBtn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.workOnModalBtnSecondary {
  background: transparent;
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text-dim);
}

.workOnModalBtnSecondary:hover:not(:disabled) {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.workOnModalBtnPrimary {
  background: transparent;
  border: 1px solid var(--terminal-green);
  color: var(--terminal-green);
}

.workOnModalBtnPrimary:hover:not(:disabled) {
  background: rgba(var(--theme-primary-rgb), 0.15);
  box-shadow: 0 0 16px rgba(var(--theme-primary-rgb), 0.5);
}

/* Terminal-themed Strategy Selector */
.workOnModal .strategySelector {
  margin: 0;
}

.workOnModal .strategySelectorTitle {
  color: var(--terminal-amber);
  font-family: var(--style-font-ui);
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.workOnModal .strategySelectorTitle::before {
  content: '//';
  margin-right: 4px;
  opacity: 0.5;
}

.workOnModal .strategySelectorOption {
  background: rgba(var(--theme-primary-rgb), 0.03);
  border-color: var(--terminal-border);
}

.workOnModal .strategySelectorOption:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.4);
  background: rgba(var(--theme-primary-rgb), 0.06);
}

.workOnModal .strategySelectorOption--selected {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.2);
}

.workOnModal .strategySelectorOptionTitle {
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
}

.workOnModal .strategySelectorOptionIcon {
  color: var(--terminal-green);
}

.workOnModal .strategySelectorOptionDefault {
  color: var(--terminal-text-dim);
}

.workOnModal .strategySelectorOptionDesc {
  color: var(--terminal-text-dim);
  font-size: 11px;
}

/* ==================== Timeline Components ==================== */

.timelineEvent {
  display: flex;
  align-items: flex-start;
  gap: 8px;
  padding: 4px 0;
  font-family: var(--style-font-ui);
  font-size: 11px;
}

.timelineEvent--compact {
  padding: 2px 0;
  font-size: 10px;
}

.timelineEvent--highlighted {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-radius: 2px;
  padding: 4px 6px;
  margin: -4px -6px;
}

.timelineEventDot {
  flex-shrink: 0;
  width: 16px;
  text-align: center;
  font-size: 12px;
}

.timelineEvent--session .timelineEventDot { color: #6B8AFD; }
.timelineEvent--started .timelineEventDot { color: #22D3EE; }
.timelineEvent--completed .timelineEventDot { color: #10B981; }
.timelineEvent--failed .timelineEventDot { color: #EF4444; }
.timelineEvent--skipped .timelineEventDot { color: #94A3B8; }
.timelineEvent--blocked .timelineEventDot { color: #F59E0B; }
.timelineEvent--warning .timelineEventDot { color: #F59E0B; }
.timelineEvent--progress .timelineEventDot { color: #8B5CF6; }
.timelineEvent--error .timelineEventDot { color: #EF4444; }
.timelineEvent--milestone .timelineEventDot { color: #F59E0B; }

.timelineEventTime {
  flex-shrink: 0;
  width: 50px;
  color: var(--muted);
  font-size: 10px;
}

.timelineEventContent {
  flex: 1;
  display: flex;
  flex-wrap: wrap;
  gap: 4px 8px;
  min-width: 0;
}

.timelineEventType {
  color: var(--text);
  font-weight: 500;
  text-transform: capitalize;
}

.timelineEventMessage {
  color: var(--muted);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.timelineEventTaskId {
  color: var(--accent);
  font-size: 9px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  padding: 1px 4px;
  border-radius: 2px;
}

/* Session Timeline */
.sessionTimeline {
  margin: 8px 0;
}

.sessionTimeline--empty {
  opacity: 0.6;
}

.sessionTimeline--compact .timelineEvent {
  font-size: 10px;
  padding: 2px 0;
}

.sessionTimelineHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  background: none;
  border: none;
  color: var(--text);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  width: 100%;
  text-align: left;
}

.sessionTimelineHeader:hover {
  color: var(--theme-primary);
}

.sessionTimelineToggle {
  color: var(--muted);
}

.sessionTimelineTitle {
  font-weight: 500;
}

.sessionTimelineCount {
  color: var(--muted);
  font-size: 10px;
}

.sessionTimelineContent {
  padding-left: 16px;
}

.sessionTimelineFilters {
  display: flex;
  gap: 4px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.sessionTimelineFilterBtn {
  padding: 2px 8px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  color: var(--muted);
  cursor: pointer;
  transition: all 0.15s ease;
}

.sessionTimelineFilterBtn:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text);
}

.sessionTimelineFilterBtn.active {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: var(--theme-primary);
  color: var(--theme-primary);
}

.sessionTimelineEvents {
  display: flex;
  flex-direction: column;
}

.sessionTimelineEmpty {
  color: var(--muted);
  font-size: 11px;
  font-style: italic;
  padding: 8px 0;
}

.sessionTimelineShowMore {
  margin-top: 8px;
  padding: 4px 8px;
  font-family: var(--style-font-ui);
  font-size: 10px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  border-radius: 2px;
  color: var(--theme-primary);
  cursor: pointer;
}

.sessionTimelineShowMore:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
}

/* Aggregated Timeline */
.aggregatedTimeline {
  margin: 8px 0;
}

.aggregatedTimelineHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  background: none;
  border: none;
  color: var(--text);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  width: 100%;
  text-align: left;
}

.aggregatedTimelineHeader:hover {
  color: var(--theme-primary);
}

.aggregatedTimelineToggle {
  color: var(--muted);
}

.aggregatedTimelineTitle {
  font-weight: 500;
}

.aggregatedTimelineCount {
  color: var(--muted);
  font-size: 10px;
}

.aggregatedTimelineContent {
  padding-left: 16px;
}

.aggregatedTimelineFilters {
  display: flex;
  gap: 4px;
  margin-bottom: 8px;
  flex-wrap: wrap;
}

.aggregatedTimelineFilterBtn {
  padding: 2px 8px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  color: var(--muted);
  cursor: pointer;
  transition: all 0.15s ease;
}

.aggregatedTimelineFilterBtn:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text);
}

.aggregatedTimelineFilterBtn.active {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: var(--theme-primary);
  color: var(--theme-primary);
}

.aggregatedTimelineEvents {
  display: flex;
  flex-direction: column;
}

.aggregatedTimelineEventRow {
  display: flex;
  align-items: flex-start;
  gap: 8px;
}

.aggregatedTimelineEventSession {
  flex-shrink: 0;
  width: 80px;
  font-size: 9px;
  color: var(--accent);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-top: 4px;
}

.aggregatedTimelineEmpty {
  color: var(--muted);
  font-size: 11px;
  font-style: italic;
  padding: 8px 0;
}

/* ==================== Strategy Badge ==================== */

.strategyBadge {
  display: inline-flex;
  align-items: center;
  padding: 2px 6px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  font-weight: 500;
  border-radius: 2px;
  text-transform: uppercase;
}

.strategyBadge--compact {
  padding: 1px 4px;
  font-size: 8px;
}

.strategyBadge--simple {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
  border: 1px solid rgba(148, 163, 184, 0.3);
}

.strategyBadge--queue {
  background: rgba(34, 211, 238, 0.15);
  color: #22D3EE;
  border: 1px solid rgba(34, 211, 238, 0.3);
}

/* Queue Item Status Badge */
.queueItemStatusBadge {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  font-weight: 500;
  border-radius: 2px;
}

.queueItemStatusBadge--compact {
  padding: 1px 4px;
  font-size: 8px;
}

.queueItemStatusSymbol {
  font-size: 10px;
}

.queueItemStatusBadge--queued {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.queueItemStatusBadge--processing {
  background: rgba(34, 211, 238, 0.15);
  color: #22D3EE;
}

.queueItemStatusBadge--completed {
  background: rgba(16, 185, 129, 0.15);
  color: #10B981;
}

.queueItemStatusBadge--failed {
  background: rgba(239, 68, 68, 0.15);
  color: #EF4444;
}

.queueItemStatusBadge--skipped {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

/* Priority Badge */
.priorityBadge {
  display: inline-flex;
  align-items: center;
  padding: 2px 6px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  font-weight: 500;
  border-radius: 2px;
}

.priorityBadge--compact {
  padding: 1px 4px;
  font-size: 8px;
}

.priorityBadge--low {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.priorityBadge--medium {
  background: rgba(245, 158, 11, 0.15);
  color: #F59E0B;
}

.priorityBadge--high {
  background: rgba(239, 68, 68, 0.15);
  color: #EF4444;
}

/* ==================== Session Details Section ==================== */

.sessionDetailsSection {
  margin: 8px 0;
}

.sessionDetailsSection--compact {
  font-size: 10px;
}

.sessionDetailsSectionHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  background: none;
  border: none;
  color: var(--text);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  width: 100%;
  text-align: left;
}

.sessionDetailsSectionHeader:hover {
  color: var(--theme-primary);
}

.sessionDetailsSectionToggle {
  color: var(--muted);
}

.sessionDetailsSectionTitle {
  font-weight: 500;
}

.sessionDetailsSectionContent {
  padding-left: 16px;
}

.sessionDetailsGrid {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 4px 12px;
  font-size: 11px;
}

.sessionDetailsRow {
  display: contents;
}

.sessionDetailsLabel {
  color: var(--muted);
  white-space: nowrap;
}

.sessionDetailsValue {
  color: var(--text);
  word-break: break-word;
}

.sessionDetailsValue--mono {
  font-family: var(--style-font-ui);
}

.sessionDetailsValue--strategy-simple {
  color: #94A3B8;
}

.sessionDetailsValue--strategy-queue {
  color: #22D3EE;
}

.sessionDetailsValue--status-spawning { color: #6B8AFD; }
.sessionDetailsValue--status-idle { color: #94A3B8; }
.sessionDetailsValue--status-working { color: #22D3EE; }
.sessionDetailsValue--status-completed { color: #10B981; }
.sessionDetailsValue--status-failed { color: #EF4444; }
.sessionDetailsValue--status-stopped { color: #94A3B8; }

.sessionDetailsValue--mode-execute { color: #22D3EE; }
.sessionDetailsValue--mode-coordinate { color: #F59E0B; }

.sessionDetailsGroup {
  margin-top: 12px;
  padding-top: 8px;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
}

.sessionDetailsGroupHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 8px;
}

.sessionDetailsGroupTitle {
  font-size: 10px;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 8px;
}

.sessionDetailsShowBtn {
  padding: 2px 6px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  color: var(--muted);
  cursor: pointer;
}

.sessionDetailsShowBtn:hover {
  background: rgba(255, 255, 255, 0.08);
  color: var(--text);
}

.sessionDetailsEnvList {
  display: flex;
  flex-direction: column;
  gap: 4px;
  font-size: 10px;
  font-family: var(--style-font-ui);
}

.sessionDetailsEnvRow {
  display: flex;
  gap: 8px;
}

.sessionDetailsEnvKey {
  color: var(--accent);
}

.sessionDetailsEnvValue {
  color: var(--muted);
  word-break: break-all;
}

/* Session Details Summary */
.sessionDetailsSummary {
  display: flex;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  color: var(--muted);
  font-family: var(--style-font-ui);
}

.sessionDetailsSummarySep {
  opacity: 0.5;
}

/* ==================== Queue Status Display ==================== */

.queueStatusDisplay {
  margin: 8px 0;
}

.queueStatusDisplay--compact {
  font-size: 10px;
}

.queueStatusHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  background: none;
  border: none;
  color: var(--text);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  width: 100%;
  text-align: left;
}

.queueStatusHeader:hover {
  color: var(--theme-primary);
}

.queueStatusToggle {
  color: var(--muted);
}

.queueStatusTitle {
  font-weight: 500;
}

.queueStatusCount {
  color: var(--muted);
  font-size: 10px;
}

.queueStatusProgress {
  margin-left: auto;
  font-size: 9px;
  color: var(--theme-primary);
}

.queueStatusContent {
  padding-left: 16px;
}

.queueStatusStats {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-bottom: 8px;
  font-size: 10px;
}

.queueStatusStat {
  padding: 2px 6px;
  border-radius: 2px;
}

.queueStatusStat--queued {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.queueStatusStat--processing {
  background: rgba(34, 211, 238, 0.15);
  color: #22D3EE;
}

.queueStatusStat--completed {
  background: rgba(16, 185, 129, 0.15);
  color: #10B981;
}

.queueStatusStat--failed {
  background: rgba(239, 68, 68, 0.15);
  color: #EF4444;
}

.queueStatusStat--skipped {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.queueStatusItems {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.queueStatusItem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  font-size: 11px;
  transition: all 0.15s ease;
}

.queueStatusItem:hover {
  background: rgba(255, 255, 255, 0.04);
  border-color: rgba(255, 255, 255, 0.08);
}

.queueStatusItem--current {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-color: rgba(var(--theme-primary-rgb), 0.2);
}

.queueStatusItemPosition {
  flex-shrink: 0;
  width: 24px;
  color: var(--muted);
  font-size: 10px;
  font-weight: 500;
}

.queueStatusItemTitle {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text);
}

.queueStatusItemMeta {
  flex-shrink: 0;
  font-size: 9px;
  color: var(--muted);
}

.queueStatusItemError {
  color: #EF4444;
}

.queueStatusItemAction {
  flex-shrink: 0;
  padding: 2px 6px;
  background: none;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  color: var(--muted);
  cursor: pointer;
  font-size: 10px;
}

.queueStatusItemAction:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
}

/* Queue Indicator (compact) */
.queueIndicator {
  padding: 1px 4px;
  font-family: var(--style-font-ui);
  font-size: 8px;
  font-weight: 500;
  background: rgba(34, 211, 238, 0.15);
  color: #22D3EE;
  border-radius: 2px;
}

/* ==================== Session In Task View ==================== */

.sessionInTaskView {
  margin: 4px 0;
  border: 1px solid rgba(255, 255, 255, 0.05);
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.02);
  transition: all 0.15s ease;
}

.sessionInTaskView:hover {
  border-color: rgba(255, 255, 255, 0.08);
}

.sessionInTaskView--expanded {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.1);
}

.sessionInTaskViewHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 10px;
  cursor: pointer;
}

.sessionInTaskViewHeader:hover {
  background: rgba(255, 255, 255, 0.02);
}

.sessionInTaskViewToggle {
  background: none;
  border: none;
  color: var(--muted);
  font-size: 10px;
  padding: 0;
  cursor: pointer;
}

.sessionInTaskViewStatus {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 6px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  font-weight: 500;
  border-radius: 2px;
}

.sessionInTaskViewStatus--spawning {
  background: rgba(107, 138, 253, 0.15);
  color: #6B8AFD;
}

.sessionInTaskViewStatus--idle {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.sessionInTaskViewStatus--working {
  background: rgba(34, 211, 238, 0.15);
  color: #22D3EE;
}

.sessionInTaskViewStatus--completed {
  background: rgba(16, 185, 129, 0.15);
  color: #10B981;
}

.sessionInTaskViewStatus--failed {
  background: rgba(239, 68, 68, 0.15);
  color: #EF4444;
}

.sessionInTaskViewStatus--stopped {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.sessionInTaskViewName {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 500;
  color: var(--text);
}

.sessionInTaskViewActivity {
  font-size: 10px;
  color: var(--muted);
}

.sessionInTaskViewActions {
  display: flex;
  gap: 4px;
}

.sessionInTaskViewJumpBtn {
  padding: 2px 8px;
  font-family: var(--style-font-ui);
  font-size: 9px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  border-radius: 2px;
  color: var(--theme-primary);
  cursor: pointer;
}

.sessionInTaskViewJumpBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
}

.sessionInTaskViewRemoveBtn {
  padding: 2px 6px;
  font-family: var(--style-font-ui);
  font-size: 12px;
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.2);
  border-radius: 2px;
  color: #EF4444;
  cursor: pointer;
}

.sessionInTaskViewRemoveBtn:hover {
  background: rgba(239, 68, 68, 0.15);
}

.sessionInTaskViewMeta {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 10px 8px 34px;
  font-size: 10px;
  color: var(--muted);
}

.sessionInTaskViewOtherTasks {
  opacity: 0.8;
}

.sessionInTaskViewQueueStatus {
  padding: 1px 4px;
  border-radius: 2px;
  font-size: 9px;
}

.sessionInTaskViewQueueStatus--queued {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.sessionInTaskViewQueueStatus--processing {
  background: rgba(34, 211, 238, 0.15);
  color: #22D3EE;
}

.sessionInTaskViewQueueStatus--completed {
  background: rgba(16, 185, 129, 0.15);
  color: #10B981;
}

.sessionInTaskViewQueueStatus--failed {
  background: rgba(239, 68, 68, 0.15);
  color: #EF4444;
}

.sessionInTaskViewQueueStatus--skipped {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.sessionInTaskViewExpanded {
  padding: 0 10px 10px 10px;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
}

/* ==================== Maestro Session Content ==================== */

.maestroSessionContent {
  width: 100%;
  margin-top: 8px;
  padding: 8px 16px;
  font-family: var(--style-font-ui);
}

.maestroSessionContent--loading {
  opacity: 0.6;
}

.maestroSessionContentLoading {
  font-size: 11px;
  color: var(--muted);
  font-style: italic;
  padding: 8px 0;
}

.maestroSessionContentHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.maestroSessionContentActivity {
  font-size: 10px;
  color: var(--muted);
}

.maestroSessionContentEventCount {
  font-size: 9px;
  color: var(--accent);
  margin-left: auto;
}

/* Session Tabs */
.maestroSessionTabs {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 6px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  margin-bottom: 8px;
}

.maestroSessionTab {
  background: transparent;
  border: none;
  color: var(--muted);
  padding: 4px 8px;
  font-size: 10px;
  font-family: var(--style-font-ui);
  cursor: pointer;
  transition: all 0.15s ease;
}

.maestroSessionTab:hover {
  color: var(--text);
}

.maestroSessionTab--active {
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  border-radius: 3px;
}

.maestroSessionTabContent {
  min-height: 60px;
}

.maestroSessionTabPane {
  animation: tabFadeIn 0.15s ease;
}

/* Queue Section in Tasks Tab */
.maestroSessionQueueSection {
  margin-bottom: 12px;
  padding-bottom: 8px;
  border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
}

.maestroSessionQueueHeader {
  font-size: 10px;
  font-weight: 600;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 6px;
}

.maestroSessionContentSection {
  margin: 8px 0;
}

.maestroSessionContentSectionHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 0;
  background: none;
  border: none;
  color: var(--text);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  width: 100%;
  text-align: left;
}

.maestroSessionContentSectionHeader:hover {
  color: var(--theme-primary);
}

.maestroSessionContentSectionBody {
  padding-left: 16px;
}

.maestroSessionContentEmpty {
  font-size: 11px;
  color: var(--muted);
  font-style: italic;
  padding: 8px 0;
}

.maestroSessionContentTaskList {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.maestroSessionContentTaskGroup {
  display: flex;
  flex-direction: column;
}

.maestroSessionContentTask {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 6px;
  border-radius: 2px;
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.maestroSessionContentTask:hover {
  background: rgba(255, 255, 255, 0.05);
}

.maestroSessionContentTask--subtask {
  padding-left: 18px;
  font-size: 10px;
  color: var(--muted);
}

.maestroSessionContentSubtaskPrefix {
  color: var(--muted);
  opacity: 0.5;
}

.maestroSessionContentTaskStatus {
  font-size: 9px;
  padding: 1px 4px;
  border-radius: 2px;
  font-weight: 500;
}

.maestroSessionContentTaskStatus--todo {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.maestroSessionContentTaskStatus--in_progress {
  background: rgba(34, 211, 238, 0.15);
  color: #22D3EE;
}

.maestroSessionContentTaskStatus--in_review {
  background: rgba(168, 85, 247, 0.15);
  color: #A855F7;
}

.maestroSessionContentTaskStatus--completed {
  background: rgba(16, 185, 129, 0.15);
  color: #10B981;
}

.maestroSessionContentTaskStatus--cancelled {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.maestroSessionContentTaskStatus--blocked {
  background: rgba(239, 68, 68, 0.15);
  color: #EF4444;
}

.maestroSessionContentTaskSessionStatus {
  font-size: 8px;
  padding: 1px 3px;
  border-radius: 2px;
  text-transform: uppercase;
}

.maestroSessionContentTaskSessionStatus--queued {
  background: rgba(148, 163, 184, 0.1);
  color: #94A3B8;
}

.maestroSessionContentTaskSessionStatus--working {
  background: rgba(16, 185, 129, 0.1);
  color: #10B981;
}

.maestroSessionContentTaskSessionStatus--needs_input {
  background: rgba(245, 158, 11, 0.1);
  color: #F59E0B;
}

.maestroSessionContentTaskSessionStatus--blocked {
  background: rgba(239, 68, 68, 0.1);
  color: #EF4444;
}

.maestroSessionContentTaskSessionStatus--completed {
  background: rgba(16, 185, 129, 0.1);
  color: #10B981;
}

.maestroSessionContentTaskSessionStatus--failed {
  background: rgba(239, 68, 68, 0.1);
  color: #EF4444;
}

.maestroSessionContentTaskSessionStatus--skipped {
  background: rgba(148, 163, 184, 0.1);
  color: #94A3B8;
}

.maestroSessionContentTaskTitle {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  font-size: 11px;
  font-weight: 500;
  color: var(--text);
}

.maestroSessionContentTask--subtask .maestroSessionContentTaskTitle {
  font-weight: 400;
  color: var(--muted);
}

.maestroSessionContentTaskPriority {
  font-size: 9px;
  padding: 1px 4px;
  border-radius: 2px;
}

.maestroSessionContentTaskPriority--low {
  background: rgba(148, 163, 184, 0.15);
  color: #94A3B8;
}

.maestroSessionContentTaskPriority--medium {
  background: rgba(245, 158, 11, 0.15);
  color: #F59E0B;
}

.maestroSessionContentTaskPriority--high {
  background: rgba(239, 68, 68, 0.15);
  color: #EF4444;
}

.maestroSessionContentTaskJump {
  padding: 2px 6px;
  background: none;
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  color: var(--muted);
  cursor: pointer;
  font-size: 10px;
  opacity: 0;
  transition: opacity 0.15s ease;
}

.maestroSessionContentTask:hover .maestroSessionContentTaskJump {
  opacity: 1;
}

.maestroSessionContentTaskJump:hover {
  background: rgba(255, 255, 255, 0.05);
  color: var(--text);
}

.maestroSessionContentSubtasks {
  display: flex;
  flex-direction: column;
}

/* ==================== Terminal Session Strategy Indicator ==================== */

/* Legacy - replaced by terminalSessionStrategyTag */

/* ==================== Terminal Loading Spinner ==================== */

.terminalLoadingSpinner {
  display: inline-block;
  margin-left: 6px;
  animation: terminalSpin 1s linear infinite;
}

@keyframes terminalSpin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

/* ==================== Terminal Sessions List ==================== */

.terminalSessionsList {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* ==================== Terminal Timeline Section ==================== */

.terminalTimelineSection {
  margin-top: 8px;
}

.terminalSessionsSection {
  margin-top: 8px;
}

/* ==================== Execution Bar ==================== */

.executionBar {
  display: flex;
  align-items: center;
  padding: 8px 12px;
  border-bottom: 1px solid var(--terminal-border);
  background: rgba(var(--theme-primary-rgb), 0.02);
  gap: 10px;
  position: relative;
  z-index: 2;
  transition: all 0.2s ease;
}

.executionBar--inactive {
  justify-content: flex-start;
  gap: 8px;
  background: rgba(var(--theme-primary-rgb), 0.03);
}

.executionBar--inactive .terminalCmd {
  flex: 1;
  text-align: center;
  justify-content: center;
  border-radius: 4px;
}

.executionBar--inactive .terminalCmdPrimary .executionBarBtnIcon {
  color: var(--terminal-green);
}

.executionBar--inactive .terminalCmdOrchestrate .executionBarBtnIcon {
  color: var(--terminal-amber, #ffab00);
}

.executionBar--active {
  background: rgba(var(--theme-primary-rgb), 0.06);
  border-bottom-color: var(--terminal-green);
}

.executionBarStrategy {
  display: flex;
  align-items: center;
  gap: 6px;
}

.executionBarStrategyChip {
  background: transparent;
  border: 1px solid var(--terminal-border);
  color: var(--terminal-dim);
  padding: 4px 12px;
  font-size: 11px;
  font-family: var(--style-font-ui);
  cursor: pointer;
  transition: all 0.15s ease;
  letter-spacing: 0.03em;
}

.executionBarStrategyChip:hover {
  border-color: var(--terminal-green);
  color: var(--terminal-text);
}

.executionBarStrategyChip--selected {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.15);
  color: var(--terminal-green);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.2);
}

.executionBarActions {
  display: flex;
  align-items: center;
  gap: 10px;
  flex-shrink: 0;
  margin-left: auto;
}

/* Ghost-style cancel button */
.executionBarCancelBtn {
  border: none !important;
  background: none !important;
  box-shadow: none !important;
  opacity: 0.6;
  padding: 6px 8px !important;
  font-size: 11px !important;
}

.executionBarCancelBtn:hover {
  opacity: 1;
  background: rgba(255, 255, 255, 0.05) !important;
}

/* Prominent primary action button */
.terminalCmdPrimary--prominent {
  padding: 8px 18px !important;
  font-size: 12px !important;
  font-weight: 600;
}

.executionBarActions .terminalCmd:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  pointer-events: none;
}

/* Orchestrate button */
.terminalCmdOrchestrate {
  border-color: var(--terminal-amber, #ffab00);
  background: rgba(255, 171, 0, 0.08);
  box-shadow: 0 0 8px rgba(255, 171, 0, 0.2);
}

.terminalCmdOrchestrate:hover {
  background: rgba(255, 171, 0, 0.15);
  box-shadow: 0 0 16px rgba(255, 171, 0, 0.4);
}

/* Orchestrate active mode */
.executionBar--orchestrate {
  border-bottom-color: var(--terminal-amber, #ffab00);
  background: rgba(255, 171, 0, 0.06);
}

.executionBar--orchestrate .executionBarStrategyChip:hover {
  border-color: var(--terminal-amber, #ffab00);
  color: var(--terminal-text);
}

.executionBar--orchestrate .executionBarStrategyChip--selected {
  border-color: var(--terminal-amber, #ffab00);
  background: rgba(255, 171, 0, 0.15);
  color: var(--terminal-amber, #ffab00);
  box-shadow: 0 0 8px rgba(255, 171, 0, 0.2);
}

/* Column layout for execution bar with dropdowns */
.executionBar--column {
  flex-direction: column;
  align-items: stretch;
  gap: 6px;
  padding: 8px 12px;
}

.executionBarRow {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
}

.executionBarDropdowns {
  display: flex;
  align-items: stretch;
  gap: 6px;
  flex-wrap: wrap;
}

/* Dropdown trigger and menu */
.executionBarDropdown {
  position: relative;
  flex: 1;
  min-width: 120px;
}

.executionBarDropdownTrigger {
  display: flex;
  align-items: center;
  gap: 6px;
  width: 100%;
  padding: 7px 12px;
  background: rgba(255, 255, 255, 0.03);
  border: 1px solid var(--terminal-border);
  border-radius: 4px;
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 12px;
  cursor: pointer;
  transition: border-color 0.15s ease, background 0.15s ease, box-shadow 0.15s ease;
  text-align: left;
}

.executionBarDropdownTrigger:hover {
  border-color: var(--terminal-green);
  background: rgba(255, 255, 255, 0.05);
}

.executionBarDropdownTrigger:active {
  background: rgba(255, 255, 255, 0.07);
}

.executionBarDropdownLabel {
  color: var(--terminal-dim);
  font-size: 10px;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  flex-shrink: 0;
}

.executionBarDropdownValue {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.executionBarDropdownPlaceholder {
  color: var(--terminal-dim);
  opacity: 0.5;
}

.executionBarDropdownArrow {
  color: var(--terminal-dim);
  font-size: 9px;
  flex-shrink: 0;
}

/* Backdrop covers entire screen to block pointer events to elements below */
.executionBarDropdownBackdrop {
  position: fixed;
  inset: 0;
  z-index: 99998;
  background: transparent;
}

/* Menu is portaled to document.body with fixed positioning */
.executionBarDropdownMenu--portal {
  position: fixed;
  z-index: 99999;
  background: var(--panel, #10151e);
  border: 1px solid var(--terminal-border);
  border-top: 2px solid var(--terminal-green);
  border-radius: 6px;
  max-height: 220px;
  overflow-y: auto;
  box-shadow: 0 12px 32px rgba(0, 0, 0, 0.7), 0 4px 12px rgba(0, 0, 0, 0.5);
  min-width: 180px;
}

/* Amber accent for orchestrate mode dropdowns */
.executionBar--orchestrate .executionBarDropdownTrigger:hover {
  border-color: var(--terminal-amber, #ffab00);
}

.executionBarDropdownEmpty {
  padding: 12px;
  text-align: center;
  color: var(--terminal-dim);
  font-size: 11px;
  font-family: var(--style-font-ui);
  background: var(--panel, #10151e);
}

.executionBarDropdownActions {
  display: flex;
  gap: 4px;
  padding: 4px 8px;
  border-bottom: 1px solid var(--terminal-border);
  background: var(--panel, #10151e);
}

.executionBarDropdownActionBtn {
  background: none;
  border: none;
  color: var(--terminal-dim);
  font-family: var(--style-font-ui);
  font-size: 10px;
  cursor: pointer;
  padding: 2px 6px;
}

.executionBarDropdownActionBtn:hover {
  color: var(--terminal-text);
}

.executionBarDropdownOption {
  display: flex;
  align-items: center;
  gap: 10px;
  width: 100%;
  padding: 8px 12px;
  background: var(--panel, #10151e);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.03);
  color: var(--terminal-text);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  text-align: left;
  transition: background 0.1s ease;
}

.executionBarDropdownOption:last-child {
  border-bottom: none;
}

.executionBarDropdownOption:hover {
  background: color-mix(in srgb, var(--panel, #10151e) 88%, var(--theme-primary, #00ff41) 12%);
}

.executionBarDropdownOption--selected {
  background: color-mix(in srgb, var(--panel, #10151e) 82%, var(--theme-primary, #00ff41) 18%);
}

.executionBarDropdownOptionAvatar {
  font-size: 15px;
  flex-shrink: 0;
}

.executionBarDropdownOptionName {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.executionBarDropdownOptionMeta {
  color: var(--terminal-dim);
  font-size: 10px;
  flex-shrink: 0;
}

.executionBarDropdownCheck {
  color: var(--terminal-green);
  font-size: 11px;
  flex-shrink: 0;
}

.executionBarDropdownCheckbox {
  width: 14px;
  height: 14px;
  border: 1px solid var(--terminal-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: transparent;
  flex-shrink: 0;
}

.executionBarDropdownCheckbox--checked {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

/* ExecutionBar Model Badge */
.executionBarModelBadge {
  font-family: var(--style-font-ui);
  font-size: 9px;
  font-weight: 600;
  padding: 3px 7px;
  border-radius: 3px;
  border: 1px solid rgba(192, 192, 192, 0.35);
  color: #c0c0c0;
  background: #0a0a0a;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  flex-shrink: 0;
  align-self: center;
}

.executionBarModelBadge--override {
  color: #d4d4d4;
  border-color: rgba(212, 212, 212, 0.5);
}

/* ExecutionBar Split Button */
.executionBarSplitBtn {
  display: flex;
  align-items: stretch;
}

.executionBarSplitBtn__main {
  border-top-right-radius: 0 !important;
  border-bottom-right-radius: 0 !important;
  border-right: none !important;
}

.executionBarSplitBtn__caret {
  border-top-left-radius: 0 !important;
  border-bottom-left-radius: 0 !important;
  padding-left: 6px !important;
  padding-right: 6px !important;
  min-width: 0 !important;
  font-size: 9px !important;
}

.executionBarSplitBtn__caret--open {
  background: rgba(var(--theme-primary-rgb), 0.2);
}

/* ==================== Team Member List ==================== */

.teamMemberList {
  border-bottom: 1px solid var(--terminal-border);
  background: rgba(255, 171, 0, 0.03);
  padding: 6px 12px;
}

.teamMemberList--empty {
  padding: 8px 12px;
}

.teamMemberListHint {
  font-size: 11px;
  color: var(--terminal-dim);
  font-family: var(--style-font-ui);
}

.teamMemberListHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 4px;
}

.teamMemberListLabel {
  font-size: 10px;
  font-family: var(--style-font-ui);
  color: var(--terminal-amber, #ffab00);
  letter-spacing: 0.05em;
  font-weight: 600;
}

.teamMemberListItems {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.teamMemberItem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  cursor: pointer;
  border: 1px solid transparent;
  transition: all 0.15s ease;
  font-family: var(--style-font-ui);
  font-size: 11px;
}

.teamMemberItem:hover {
  background: rgba(255, 171, 0, 0.06);
  border-color: rgba(255, 171, 0, 0.2);
}

.teamMemberItem--selected {
  background: rgba(255, 171, 0, 0.08);
  border-color: rgba(255, 171, 0, 0.3);
}

.teamMemberCheckbox {
  color: var(--terminal-dim);
  font-size: 11px;
  flex-shrink: 0;
}

.teamMemberItem--selected .teamMemberCheckbox {
  color: var(--terminal-amber, #ffab00);
}

.teamMemberAvatar {
  font-size: 14px;
  flex-shrink: 0;
  width: 20px;
  text-align: center;
}

.teamMemberName {
  color: var(--terminal-text);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.teamMemberRole {
  color: var(--terminal-dim);
  font-size: 10px;
  flex-shrink: 0;
}

/* ==================== Whoami Preview ==================== */

.whoamiPreview {
  border: 1px solid var(--terminal-border);
  border-top: none;
  background: rgba(var(--theme-primary-rgb), 0.03);
  transition: all 0.2s ease;
}

.whoamiPreviewToggle {
  width: 100%;
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  background: transparent;
  border: none;
  color: var(--terminal-text);
  font-size: 11px;
  font-family: var(--font-family-mono);
  cursor: pointer;
  text-align: left;
  transition: all 0.2s ease;
  border-bottom: 1px solid transparent;
}

.whoamiPreviewToggle:hover {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-bottom-color: var(--terminal-green);
}

.whoamiPreviewToggleIcon {
  color: var(--terminal-green);
  font-size: 10px;
  transition: transform 0.2s ease;
}

.whoamiPreviewToggleLabel {
  color: var(--terminal-green);
  font-weight: 600;
  text-transform: lowercase;
  letter-spacing: 0.5px;
}

.whoamiPreviewToggleMeta {
  color: var(--terminal-text-dim, var(--terminal-dim, #808080));
  font-size: 10px;
  margin-left: auto;
}

.whoamiPreviewContent {
  border-top: 1px solid var(--terminal-border);
  background: rgba(0, 0, 0, 0.2);
  padding: 0;
  max-height: 400px;
  overflow-y: auto;
  animation: whoamiPreviewSlideDown 0.2s ease;
}

@keyframes whoamiPreviewSlideDown {
  from {
    opacity: 0;
    max-height: 0;
  }
  to {
    opacity: 1;
    max-height: 400px;
  }
}

.whoamiPreviewText {
  margin: 0;
  padding: 16px;
  font-size: 11px;
  font-family: var(--font-family-mono);
  color: var(--terminal-text);
  line-height: 1.6;
  white-space: pre-wrap;
  word-wrap: break-word;
  overflow-x: auto;
  background: transparent;
}

.whoamiPreviewText code {
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
  padding: 2px 6px;
  border-radius: 3px;
  font-size: 10px;
}

/* Orchestrate mode variant */
.whoamiPreview--orchestrate {
  background: rgba(255, 171, 0, 0.03);
}

.whoamiPreview--orchestrate .whoamiPreviewToggle:hover {
  background: rgba(255, 171, 0, 0.08);
  border-bottom-color: var(--terminal-amber, #ffab00);
}

.whoamiPreview--orchestrate .whoamiPreviewToggleIcon,
.whoamiPreview--orchestrate .whoamiPreviewToggleLabel {
  color: var(--terminal-amber, #ffab00);
}

.whoamiPreview--orchestrate .whoamiPreviewText code {
  color: var(--terminal-amber, #ffab00);
  background: rgba(255, 171, 0, 0.1);
}

/* Custom scrollbar for preview content */
.whoamiPreviewContent::-webkit-scrollbar {
  width: 8px;
}

.whoamiPreviewContent::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

.whoamiPreviewContent::-webkit-scrollbar-thumb {
  background: var(--terminal-border);
  border-radius: 4px;
}

.whoamiPreviewContent::-webkit-scrollbar-thumb:hover {
  background: var(--terminal-green);
}

/* ==================== Execution Mode Panel Glow ==================== */

.maestroPanel--executionMode {
  border-left-color: var(--terminal-cyan, #00e5ff) !important;
  box-shadow:
    -8px 0 32px rgba(0, 229, 255, 0.2),
    inset 0 0 60px rgba(0, 229, 255, 0.03) !important;
}

/* ==================== Task Checkbox (Selection Mode) ==================== */

.terminalTaskRow--selectable {
  cursor: pointer;
}

.terminalTaskCheckbox {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  margin-right: 8px;
  cursor: pointer;
}

.terminalTaskCheckbox input[type="checkbox"] {
  display: none;
}

.terminalTaskCheckmark {
  width: 16px;
  height: 16px;
  border: 1px solid var(--terminal-border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px;
  color: var(--terminal-green);
  transition: all 0.15s ease;
  font-family: var(--style-font-ui);
}

.terminalTaskCheckmark--checked {
  border-color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.15);
  box-shadow: 0 0 6px rgba(var(--theme-primary-rgb), 0.3);
}

.terminalTaskCheckbox:hover .terminalTaskCheckmark {
  border-color: var(--terminal-green);
}

/* ------------------------------------------------------------------ */
/*  Themed Modal (matches projectSettingsDialog design system)         */
/* ------------------------------------------------------------------ */

.themedModalBackdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.themedModal {
  background: #000000;
  border: 2px solid var(--theme-primary);
  min-width: 360px;
  max-width: 500px;
  width: 100%;
  box-shadow: 0 0 30px rgba(var(--theme-primary-rgb), 0.3),
    inset 0 0 60px rgba(var(--theme-primary-rgb), 0.03);
  font-family: var(--style-font-ui);
}

.themedModalHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 16px;
  border-bottom: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.themedModalTitle {
  font-size: 13px;
  font-weight: 600;
  color: var(--theme-primary);
  letter-spacing: 1px;
}

.themedModalClose {
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 1px solid var(--theme-border);
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-size: 16px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.themedModalClose:hover {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.themedModalContent {
  padding: 16px;
}

.themedFormRow {
  display: flex;
  flex-direction: column;
  gap: 6px;
  margin-bottom: 14px;
}

.themedFormLabel {
  font-size: 11px;
  font-weight: 600;
  color: var(--theme-primary);
  letter-spacing: 0.5px;
  text-transform: uppercase;
}

.themedFormInput {
  border: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.03);
  color: var(--theme-primary);
  padding: 8px 10px;
  font-family: var(--style-font-ui);
  font-size: 12px;
  outline: none;
  transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.themedFormInput:focus {
  border-color: var(--theme-primary);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.2);
}

.themedFormInput::placeholder {
  color: rgba(var(--theme-primary-rgb), 0.3);
}

.themedFormSelect {
  border: 1px solid var(--theme-border);
  background: #000000;
  color: var(--theme-primary);
  padding: 8px 10px;
  font-family: var(--style-font-ui);
  font-size: 12px;
  outline: none;
  cursor: pointer;
  transition: border-color 0.2s ease;
}

.themedFormSelect:focus {
  border-color: var(--theme-primary);
}

.themedFormHint {
  font-size: 10px;
  color: rgba(var(--theme-primary-rgb), 0.4);
  margin-top: 2px;
}

.themedFormActions {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  padding: 12px 16px;
  border-top: 1px solid var(--theme-border);
}

.themedBtn {
  border: 1px solid var(--theme-border);
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.7);
  padding: 6px 14px;
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.themedBtn:hover {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.themedBtnPrimary {
  border-color: var(--theme-primary);
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.themedBtnPrimary:hover {
  background: rgba(var(--theme-primary-rgb), 0.2);
  box-shadow: 0 0 10px rgba(var(--theme-primary-rgb), 0.3);
}

.themedBtnDanger {
  border-color: rgba(255, 80, 80, 0.5);
  color: #ff5050;
  background: rgba(255, 80, 80, 0.08);
}

.themedBtnDanger:hover {
  background: rgba(255, 80, 80, 0.15);
  border-color: #ff5050;
  box-shadow: 0 0 10px rgba(255, 80, 80, 0.3);
}

.themedBtnSuccess {
  border-color: rgba(16, 185, 129, 0.5);
  color: #10b981;
  background: rgba(16, 185, 129, 0.08);
}

.themedBtnSuccess:hover {
  background: rgba(16, 185, 129, 0.15);
  border-color: #10b981;
  box-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
}

.themedBtn:disabled {
  opacity: 0.35;
  cursor: not-allowed;
  pointer-events: none;
}

/* ------------------------------------------------------------------ */
/*  Themed Segmented Control (priority / model selectors)              */
/* ------------------------------------------------------------------ */

.themedSegmentedControl {
  display: flex;
  gap: 0;
  border: 1px solid var(--theme-border);
}

.themedSegmentedBtn {
  border: none;
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.5);
  padding: 5px 14px;
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-right: 1px solid var(--theme-border);
}

.themedSegmentedBtn:last-child {
  border-right: none;
}

.themedSegmentedBtn:hover {
  color: rgba(var(--theme-primary-rgb), 0.8);
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.themedSegmentedBtn.active {
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.12);
  box-shadow: inset 0 0 12px rgba(var(--theme-primary-rgb), 0.08);
}

/* ------------------------------------------------------------------ */
/*  Themed Dropdown (for agent tool selector)                           */
/* ------------------------------------------------------------------ */

.themedDropdownPicker {
  position: relative;
  display: inline-flex;
}

.themedDropdownButton {
  border: 1px solid var(--theme-border);
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.7);
  padding: 2px 8px;
  font-family: var(--style-font-ui);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.themedDropdownButton:hover {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.themedDropdownButton--open {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.themedDropdownCaret {
  font-size: 8px;
  transition: transform 0.2s ease;
}

.themedDropdownOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9998;
}

.themedDropdownMenu {
  position: fixed;
  background: #000000;
  border: 1px solid var(--theme-primary);
  box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.3);
  min-width: 160px;
  z-index: 9999;
  font-family: var(--style-font-ui);
}

.themedDropdownOption {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  padding: 8px 12px;
  border: none;
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 11px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s ease;
  border-bottom: 1px solid var(--theme-border);
}

.themedDropdownOption:last-child {
  border-bottom: none;
}

.themedDropdownOption:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
}

.themedDropdownOption--current {
  background: rgba(var(--theme-primary-rgb), 0.15);
  color: var(--theme-primary);
}

.themedDropdownLabel {
  flex: 1;
}

.themedDropdownCheck {
  font-size: 10px;
  color: var(--theme-primary);
}

/* ------------------------------------------------------------------ */
/*  Themed Task Status Badge                                            */
/* ------------------------------------------------------------------ */

.themedTaskStatusBadge {
  font-family: var(--style-font-ui);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  padding: 2px 8px;
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.7);
}

.themedTaskStatusBadge[data-status="in_progress"] {
  border-color: rgba(var(--theme-primary-rgb), 0.4);
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.themedTaskStatusBadge[data-status="in_review"] {
  border-color: rgba(168, 85, 247, 0.4);
  color: #a855f7;
  background: rgba(168, 85, 247, 0.08);
}

.themedTaskStatusBadge[data-status="completed"] {
  border-color: rgba(16, 185, 129, 0.4);
  color: #10b981;
  background: rgba(16, 185, 129, 0.08);
}

.themedTaskStatusBadge[data-status="blocked"] {
  border-color: rgba(255, 80, 80, 0.4);
  color: #ff5050;
  background: rgba(255, 80, 80, 0.08);
}

.themedTaskStatusBadge[data-status="cancelled"] {
  border-color: rgba(var(--theme-primary-rgb), 0.2);
  color: rgba(var(--theme-primary-rgb), 0.4);
  background: rgba(var(--theme-primary-rgb), 0.03);
}

/* ------------------------------------------------------------------ */
/*  Themed Subtask Items                                                */
/* ------------------------------------------------------------------ */

.themedSubtaskItem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 6px;
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.7);
  border: 1px solid transparent;
  transition: all 0.2s ease;
}

.themedSubtaskItem:hover {
  border-color: var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.03);
}

.themedSubtaskItem[data-completed="true"] {
  opacity: 0.5;
}

.themedSubtaskCheckbox {
  cursor: pointer;
  color: var(--theme-primary);
  flex-shrink: 0;
}

.themedSubtaskTitle {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.themedPathRow {
  display: flex;
  gap: 8px;
  align-items: stretch;
}

.themedPathRow .themedFormInput {
  flex: 1;
  min-width: 0;
}

.themedPathActions {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  margin-top: 4px;
}

.themedCheckRow {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.7);
  user-select: none;
  cursor: pointer;
}

.themedCheckRow input[type="checkbox"] {
  width: 14px;
  height: 14px;
  accent-color: var(--theme-primary);
}

/* ------------------------------------------------------------------ */
/*  Themed Modal -- Wide modifier                                      */
/* ------------------------------------------------------------------ */

.themedModal--wide {
  max-width: 720px;
  min-height: 520px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.themedModal--wide form {
  display: flex;
  flex-direction: column;
  min-height: 0;
  flex: 1;
}

.themedModal--wide .themedModalContent {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
}

.themedModal--wide .themedModalContent::-webkit-scrollbar {
  width: 6px;
}

.themedModal--wide .themedModalContent::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3);
}

.themedModal--wide .themedModalContent::-webkit-scrollbar-thumb {
  background: rgba(var(--theme-primary-rgb), 0.25);
  border-radius: 3px;
}

.themedModal--wide .themedModalContent::-webkit-scrollbar-thumb:hover {
  background: rgba(var(--theme-primary-rgb), 0.45);
}

/* ------------------------------------------------------------------ */
/*  Inline Folder Browser (themed)                                     */
/* ------------------------------------------------------------------ */

.themedFolderBrowser {
  border: 1px solid var(--theme-border);
  display: flex;
  flex-direction: column;
  max-height: 300px;
  font-family: var(--style-font-ui);
}

.themedBreadcrumb {
  display: flex;
  align-items: center;
  padding: 6px 10px;
  border-bottom: 1px solid var(--theme-border);
  overflow-x: auto;
  white-space: nowrap;
  gap: 2px;
  flex-shrink: 0;
}

.themedBreadcrumbSegment {
  background: none;
  border: none;
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  padding: 2px 4px;
  transition: color 0.15s ease;
}

.themedBreadcrumbSegment:hover {
  color: var(--theme-primary);
  text-decoration: underline;
}

.themedBreadcrumbSeparator {
  color: rgba(var(--theme-primary-rgb), 0.3);
  font-size: 11px;
  user-select: none;
}

.themedFolderToolbar {
  display: flex;
  padding: 6px 10px;
  border-bottom: 1px solid var(--theme-border);
  flex-shrink: 0;
}

.themedFolderList {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
}

.themedFolderList::-webkit-scrollbar {
  width: 6px;
}

.themedFolderList::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3);
}

.themedFolderList::-webkit-scrollbar-thumb {
  background: rgba(var(--theme-primary-rgb), 0.25);
  border-radius: 3px;
}

.themedFolderList::-webkit-scrollbar-thumb:hover {
  background: rgba(var(--theme-primary-rgb), 0.45);
}

.themedFolderItem {
  display: block;
  width: 100%;
  text-align: left;
  background: none;
  border: none;
  border-bottom: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 11px;
  padding: 6px 12px;
  cursor: pointer;
  transition: background 0.15s ease, color 0.15s ease;
}

.themedFolderItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
}

.themedFolderItem:last-child {
  border-bottom: none;
}

.themedFolderEmpty {
  padding: 16px;
  text-align: center;
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.4);
}

.themedFolderError {
  padding: 8px 12px;
  font-size: 11px;
  color: rgba(255, 100, 100, 0.9);
  background: rgba(255, 50, 50, 0.08);
  border-bottom: 1px solid var(--theme-border);
  flex-shrink: 0;
}

.themedBrowseToggle {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-family: var(--style-font-ui);
  font-size: 11px;
  padding: 4px 10px;
  cursor: pointer;
  transition: color 0.15s ease, border-color 0.15s ease;
}

.themedBrowseToggle:hover {
  color: var(--theme-primary);
  border-color: var(--theme-primary);
}

.themedBrowseToggleArrow {
  display: inline-block;
  font-size: 8px;
  transition: transform 0.15s ease;
}

.themedBrowseToggleArrow--open {
  transform: rotate(90deg);
}

/* ------------------------------------------------------------------ */
/*  Themed Modal Tab Bar                                                */
/* ------------------------------------------------------------------ */

.themedModalTabBar {
  display: flex;
  gap: 0;
  border: 1px solid var(--theme-border);
  border-radius: 0;
  margin-top: 4px;
}

.themedModalTab {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  border: none;
  border-right: 1px solid var(--theme-border);
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.4);
  padding: 5px 12px;
  font-family: var(--style-font-ui);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.5px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-transform: uppercase;
}

.themedModalTab:last-child {
  border-right: none;
}

.themedModalTab:hover {
  color: rgba(var(--theme-primary-rgb), 0.8);
  background: rgba(var(--theme-primary-rgb), 0.03);
}

.themedModalTab--active {
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
  box-shadow: inset 0 -2px 0 var(--theme-primary);
}

.themedModalTabClose {
  margin-left: auto;
  border-right: none !important;
  border-left: 1px solid var(--theme-border);
  font-size: 14px;
  padding: 3px 10px;
  color: rgba(var(--theme-primary-rgb), 0.3);
}

.themedModalTabClose:hover {
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.themedModalTabBadge {
  font-size: 9px;
  font-weight: 400;
  opacity: 0.6;
  padding: 0 4px;
  border: 1px solid var(--theme-border);
  border-radius: 2px;
  line-height: 1.4;
}

.themedModalTabContent {
  border: 1px solid var(--theme-border);
  border-top: none;
  padding: 12px;
  animation: themedTabSlideDown 0.15s ease;
}

@keyframes themedTabSlideDown {
  from {
    opacity: 0;
    max-height: 0;
    padding-top: 0;
    padding-bottom: 0;
  }
  to {
    opacity: 1;
    max-height: 500px;
    padding-top: 12px;
    padding-bottom: 12px;
  }
}

/* ------------------------------------------------------------------ */
/*  Empty State (no projects)                                          */
/* ------------------------------------------------------------------ */

.emptyState {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  gap: 16px;
  font-family: var(--style-font-ui);
}

.emptyStateTitle {
  font-size: 18px;
  font-weight: 700;
  color: var(--theme-primary);
  letter-spacing: 2px;
}

.emptyStateHint {
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.5);
}

.emptyStateBtn {
  margin-top: 8px;
  border: 2px solid var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
  color: var(--theme-primary);
  padding: 10px 24px;
  font-family: var(--style-font-ui);
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.emptyStateBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.18);
  box-shadow: 0 0 20px rgba(var(--theme-primary-rgb), 0.3);
}

/* ------------------------------------------------------------------ */
/*  Tab Drag Reorder                                                   */
/* ------------------------------------------------------------------ */

.projectTabDragging {
  opacity: 0.4;
}

.projectTabDropBefore {
  box-shadow: inset 2px 0 0 var(--theme-primary);
}

.projectTabDropAfter {
  box-shadow: inset -2px 0 0 var(--theme-primary);
}

/* ------------------------------------------------------------------ */
/*  Themed Warning (for delete error)                                  */
/* ------------------------------------------------------------------ */

.themedWarning {
  padding: 12px 16px;
  border: 1px solid rgba(255, 180, 0, 0.4);
  background: rgba(255, 180, 0, 0.06);
  color: rgba(255, 200, 60, 0.9);
  font-family: var(--style-font-ui);
  font-size: 11px;
  line-height: 1.5;
  margin: 0 16px 12px;
}

/* ------------------------------------------------------------------ */
/*  Session Detail Modal                                               */
/* ------------------------------------------------------------------ */

/* Status badges */
.sessionDetailStatusBadge {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 3px 7px;
  border-radius: 3px;
  border: 1px solid;
  line-height: 1;
}

.sessionDetailStatusBadge--spawning {
  background: rgba(255, 176, 0, 0.15);
  border-color: rgba(255, 176, 0, 0.35);
  color: var(--terminal-amber);
}

.sessionDetailStatusBadge--idle {
  background: rgba(128, 128, 128, 0.15);
  border-color: rgba(128, 128, 128, 0.3);
  color: var(--terminal-text-dim);
}

.sessionDetailStatusBadge--working {
  background: rgba(0, 217, 255, 0.15);
  border-color: var(--terminal-cyan);
  color: var(--terminal-cyan);
}

.sessionDetailStatusBadge--completed {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: var(--terminal-green);
  color: var(--terminal-green);
}

.sessionDetailStatusBadge--failed {
  background: rgba(255, 59, 59, 0.15);
  border-color: var(--terminal-red);
  color: var(--terminal-red);
}

.sessionDetailStatusBadge--stopped {
  background: rgba(128, 128, 128, 0.15);
  border-color: rgba(128, 128, 128, 0.3);
  color: var(--terminal-gray);
}

/* Model and role badges */
.sessionDetailModelBadge,
.sessionDetailRoleBadge {
  font-size: 9px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  padding: 3px 7px;
  border-radius: 3px;
  line-height: 1;
  border: 1px solid rgba(128, 128, 128, 0.3);
  background: rgba(128, 128, 128, 0.1);
  color: var(--terminal-text-dim);
}

/* Info grid */
.sessionDetailInfoGrid {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.sessionDetailInfoRow {
  display: flex;
  align-items: baseline;
  gap: 8px;
  font-size: 11px;
  line-height: 1.4;
}

.sessionDetailInfoRow .terminalDetailLabel {
  min-width: 100px;
  flex-shrink: 0;
}

/* Linked task items */
.sessionDetailTaskItem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 5px 8px;
  font-size: 11px;
  color: var(--terminal-text-dim);
  border-bottom: 1px solid var(--terminal-border);
}

.sessionDetailTaskItem:last-child {
  border-bottom: none;
}

.sessionDetailTaskTitle {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Timeline scroller */
.sessionDetailTimelineScroller {
  max-height: 400px;
  overflow-y: auto;
}

.sessionDetailTimelineScroller::-webkit-scrollbar {
  width: 6px;
}

.sessionDetailTimelineScroller::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.3);
}

.sessionDetailTimelineScroller::-webkit-scrollbar-thumb {
  background: rgba(var(--theme-primary-rgb), 0.25);
  border-radius: 3px;
}

.sessionDetailTimelineScroller::-webkit-scrollbar-thumb:hover {
  background: rgba(var(--theme-primary-rgb), 0.45);
}

/* Clickable session chips in TaskListItem */
.terminalSessionStatusChip--clickable {
  cursor: pointer;
}

.terminalSessionStatusChip--clickable:hover {
  filter: brightness(1.3);
  box-shadow: 0 0 6px rgba(var(--theme-primary-rgb), 0.3);
}

/* Session status badges */
.sessionStatusBadge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 10px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 3px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  font-family: var(--font-mono);
  white-space: nowrap;
}

.sessionStatusBadge--spawning {
  background: rgba(139, 92, 246, 0.15);
  color: #a78bfa;
}

.sessionStatusBadge--working {
  background: rgba(34, 211, 238, 0.15);
  color: #22d3ee;
}

.sessionStatusBadge--idle {
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.45);
}

.sessionStatusBadge--stopped {
  background: rgba(239, 68, 68, 0.12);
  color: #f87171;
}

.sessionStatusBadge--completed {
  background: rgba(52, 211, 153, 0.15);
  color: #34d399;
}

/* Clickable session badges in SessionsSection sidebar */
.sessionStatusBadge--clickable {
  cursor: pointer;
  transition: filter 0.15s ease, box-shadow 0.15s ease;
}

.sessionStatusBadge--clickable:hover {
  filter: brightness(1.3);
  box-shadow: 0 0 6px rgba(var(--theme-primary-rgb), 0.3);
}

/* needs-user-input session glow */
@keyframes needsInputGlow {
  0%, 100% { box-shadow: 0 0 4px rgba(255, 255, 255, 0.3); border-color: rgba(255, 255, 255, 0.4); }
  50% { box-shadow: 0 0 12px rgba(255, 255, 255, 0.7); border-color: rgba(255, 255, 255, 0.9); }
}
.sessionItemNeedsInput {
  animation: needsInputGlow 2s ease-in-out infinite;
  border: 1px solid rgba(255, 255, 255, 0.4);
}

.sessionStatusBadge--needsInput {
  background: rgba(251, 191, 36, 0.15);
  color: #fbbf24;
  border: 1px solid rgba(251, 191, 36, 0.3);
}

/* ------------------------------------------------------------------ */
/*  Docs List                                                          */
/* ------------------------------------------------------------------ */

.docsListGrid {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.docsListCard {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.06);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  text-align: left;
  width: 100%;
  color: inherit;
  font-family: inherit;
  font-size: inherit;
}

.docsListCard:hover {
  background: rgba(var(--theme-primary-rgb), 0.06);
  border-color: rgba(var(--theme-primary-rgb), 0.2);
}

.docsListCardIcon {
  flex-shrink: 0;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 5px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  color: var(--theme-primary, #00ff41);
  font-size: 9px;
  font-weight: 700;
  font-family: var(--style-font-ui);
  letter-spacing: -0.5px;
}

.docsListCardBody {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.docsListCardTitle {
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.docsListCardFile {
  font-size: 10px;
  color: var(--muted);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  font-family: var(--style-font-ui);
}

.docsListCardExt {
  color: rgba(var(--theme-primary-rgb), 0.6);
  margin-left: 2px;
}

.docsListCardRight {
  flex-shrink: 0;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 3px;
}

.docsListCardSession {
  font-size: 8px;
  font-weight: 600;
  text-transform: uppercase;
  padding: 1px 5px;
  border-radius: 3px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  color: var(--theme-primary, #00ff41);
  letter-spacing: 0.5px;
}

.docsListCardTime {
  font-size: 9px;
  color: var(--muted);
  opacity: 0.6;
  font-family: var(--style-font-ui);
}

/* ------------------------------------------------------------------ */
/*  Doc Viewer Overlay / Modal                                         */
/* ------------------------------------------------------------------ */

.docViewerOverlay {
  position: fixed;
  inset: 0;
  z-index: 10000;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.8);
  animation: docViewerFadeIn 0.15s ease;
}

@keyframes docViewerFadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.docViewerPanel {
  width: 92%;
  max-width: 800px;
  max-height: 85vh;
  display: flex;
  flex-direction: column;
  background: #0a0a0a;
  border: 2px solid var(--terminal-green);
  border-radius: 0;
  box-shadow:
    0 0 40px rgba(var(--theme-primary-rgb), 0.3),
    0 24px 80px rgba(0, 0, 0, 0.9),
    inset 0 1px 0 rgba(var(--theme-primary-rgb), 0.1);
  overflow: hidden;
  animation: docViewerSlideUp 0.2s ease;
  font-family: var(--style-font-ui);
}

@keyframes docViewerSlideUp {
  from { transform: translateY(10px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* Header */
.docViewerHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 16px;
  background: rgba(var(--theme-primary-rgb), 0.04);
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.15);
}

.docViewerHeaderLeft {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 0;
}

.docViewerIcon {
  flex-shrink: 0;
  width: 34px;
  height: 34px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 7px;
  background: rgba(var(--theme-primary-rgb), 0.12);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.2);
  color: var(--theme-primary, #00ff41);
  font-size: 11px;
  font-weight: 700;
  font-family: var(--style-font-ui);
}

.docViewerHeaderInfo {
  display: flex;
  flex-direction: column;
  gap: 3px;
  min-width: 0;
}

.docViewerTitle {
  margin: 0;
  font-size: 14px;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.docViewerPathRow {
  display: flex;
  align-items: center;
  gap: 6px;
}

.docViewerFileName {
  font-size: 11px;
  color: var(--muted);
  font-family: var(--style-font-ui);
}

.docViewerExtBadge {
  font-size: 9px;
  font-weight: 600;
  padding: 1px 5px;
  border-radius: 3px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  color: var(--theme-primary, #00ff41);
  font-family: var(--style-font-ui);
  text-transform: uppercase;
}

.docViewerCloseBtn {
  flex-shrink: 0;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: var(--muted);
  cursor: pointer;
  font-size: 12px;
  transition: all 0.15s ease;
}

.docViewerCloseBtn:hover {
  background: rgba(255, 80, 80, 0.15);
  border-color: rgba(255, 80, 80, 0.3);
  color: #ff6b6b;
}

/* Metadata bar */
.docViewerMeta {
  display: flex;
  flex-wrap: wrap;
  gap: 16px;
  padding: 8px 16px;
  background: rgba(var(--theme-primary-rgb), 0.02);
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.08);
}

.docViewerMetaItem {
  display: flex;
  align-items: center;
  gap: 6px;
}

.docViewerMetaLabel {
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--muted);
  opacity: 0.5;
}

.docViewerMetaValue {
  font-size: 11px;
  color: var(--muted);
  font-family: var(--style-font-ui);
  max-width: 300px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.docViewerMetaSessionBadge {
  font-size: 9px;
  font-weight: 600;
  text-transform: uppercase;
  padding: 1px 6px;
  border-radius: 3px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  color: var(--theme-primary, #00ff41);
  letter-spacing: 0.3px;
}

/* Body */
.docViewerBody {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.docViewerBody::-webkit-scrollbar {
  width: 6px;
}

.docViewerBody::-webkit-scrollbar-track {
  background: transparent;
}

.docViewerBody::-webkit-scrollbar-thumb {
  background: rgba(var(--theme-primary-rgb), 0.2);
  border-radius: 3px;
}

.docViewerBody::-webkit-scrollbar-thumb:hover {
  background: rgba(var(--theme-primary-rgb), 0.35);
}

/* Code (non-markdown) view */
.docViewerCode {
  margin: 0;
  padding: 16px;
  background: rgba(var(--theme-primary-rgb), 0.03);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.1);
  border-radius: 0;
  font-family: var(--style-font-ui);
  font-size: 12px;
  line-height: 1.6;
  color: var(--text);
  white-space: pre-wrap;
  word-break: break-word;
  overflow-x: auto;
}

/* Empty state */
.docViewerEmpty {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 48px 24px;
  color: var(--muted);
  opacity: 0.5;
  font-size: 13px;
}

.docViewerEmptyIcon {
  font-size: 24px;
  opacity: 0.4;
}

.docViewerEmptyPath {
  font-size: 10px;
  font-family: var(--style-font-ui);
  opacity: 0.6;
}

/* ------------------------------------------------------------------ */
/*  Doc Viewer Markdown Renderer                                       */
/* ------------------------------------------------------------------ */

.docViewerMarkdown {
  font-size: 13px;
  line-height: 1.7;
  color: var(--text);
}

.docViewerMarkdown h1,
.docViewerMarkdown h2,
.docViewerMarkdown h3,
.docViewerMarkdown h4,
.docViewerMarkdown h5,
.docViewerMarkdown h6 {
  color: var(--text);
  font-weight: 600;
  margin-top: 1.5em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

.docViewerMarkdown h1 {
  font-size: 1.5em;
  padding-bottom: 0.3em;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.15);
}

.docViewerMarkdown h2 {
  font-size: 1.3em;
  padding-bottom: 0.2em;
  border-bottom: 1px solid rgba(255, 255, 255, 0.06);
}

.docViewerMarkdown h3 { font-size: 1.1em; }
.docViewerMarkdown h4 { font-size: 1em; }
.docViewerMarkdown h5 { font-size: 0.95em; }
.docViewerMarkdown h6 { font-size: 0.9em; color: var(--muted); }

.docViewerMarkdown h1:first-child,
.docViewerMarkdown h2:first-child,
.docViewerMarkdown h3:first-child {
  margin-top: 0;
}

.docViewerMarkdown p {
  margin: 0.8em 0;
}

.docViewerMarkdown a {
  color: var(--theme-primary, #00ff41);
  text-decoration: none;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  transition: border-color 0.15s ease;
}

.docViewerMarkdown a:hover {
  border-bottom-color: var(--theme-primary, #00ff41);
}

.docViewerMarkdown strong {
  font-weight: 600;
  color: var(--text);
}

.docViewerMarkdown em {
  font-style: italic;
  color: var(--muted);
}

/* Inline code */
.docViewerMarkdown code {
  font-family: var(--style-font-ui);
  font-size: 0.88em;
  padding: 2px 6px;
  background: rgba(var(--theme-primary-rgb), 0.08);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  border-radius: 4px;
  color: var(--theme-primary, #00ff41);
}

/* Code blocks */
.docViewerMarkdown pre {
  margin: 1em 0;
  padding: 14px 16px;
  background: rgba(var(--theme-primary-rgb), 0.03);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.1);
  border-radius: 0;
  overflow-x: auto;
}

.docViewerMarkdown pre code {
  background: none;
  border: none;
  padding: 0;
  font-size: 12px;
  line-height: 1.6;
  color: var(--text);
}

/* Blockquotes */
.docViewerMarkdown blockquote {
  margin: 1em 0;
  padding: 8px 16px;
  border-left: 3px solid rgba(var(--theme-primary-rgb), 0.3);
  background: rgba(var(--theme-primary-rgb), 0.03);
  color: var(--muted);
}

.docViewerMarkdown blockquote p {
  margin: 0.3em 0;
}

/* Lists */
.docViewerMarkdown ul,
.docViewerMarkdown ol {
  margin: 0.6em 0;
  padding-left: 1.5em;
}

.docViewerMarkdown li {
  margin: 0.3em 0;
}

.docViewerMarkdown li > p {
  margin: 0.2em 0;
}

/* Tables */
.docViewerMarkdown table {
  width: 100%;
  border-collapse: collapse;
  margin: 1em 0;
  font-size: 12px;
}

.docViewerMarkdown th,
.docViewerMarkdown td {
  padding: 8px 12px;
  text-align: left;
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.docViewerMarkdown th {
  font-weight: 600;
  background: rgba(var(--theme-primary-rgb), 0.06);
  color: var(--text);
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
}

.docViewerMarkdown td {
  color: var(--muted);
}

.docViewerMarkdown tr:hover td {
  background: rgba(255, 255, 255, 0.02);
}

/* Horizontal rules */
.docViewerMarkdown hr {
  border: none;
  height: 1px;
  background: rgba(255, 255, 255, 0.08);
  margin: 1.5em 0;
}

/* Images */
.docViewerMarkdown img {
  max-width: 100%;
  border-radius: 6px;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Task lists (GFM) */
.docViewerMarkdown input[type="checkbox"] {
  margin-right: 6px;
  accent-color: var(--theme-primary, #00ff41);
}

/* ------------------------------------------------------------------ */
/*  Mermaid Diagram Renderer                                            */
/* ------------------------------------------------------------------ */

.mermaidDiagram {
  margin: 1.2em 0;
  padding: 20px;
  background: rgba(var(--theme-primary-rgb), 0.02);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  border-radius: 6px;
  overflow-x: auto;
  cursor: zoom-in;
  transition: border-color 0.15s ease, background 0.15s ease;
  text-align: center;
}

.mermaidDiagram:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.25);
  background: rgba(var(--theme-primary-rgb), 0.04);
}

.mermaidDiagram svg {
  max-width: 100%;
  height: auto;
}

.mermaidDiagramOverlay {
  position: fixed;
  inset: 0;
  z-index: 10001;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.9);
  animation: docViewerFadeIn 0.15s ease;
  cursor: zoom-out;
}

.mermaidDiagramOverlayContent {
  position: relative;
  width: 95vw;
  max-height: 95vh;
  overflow: auto;
  padding: 24px;
  cursor: default;
}

.mermaidDiagramOverlayContent::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.mermaidDiagramOverlayContent::-webkit-scrollbar-thumb {
  background: rgba(var(--theme-primary-rgb), 0.2);
  border-radius: 3px;
}

.mermaidDiagramOverlaySvg {
  text-align: center;
}

.mermaidDiagramOverlaySvg svg {
  max-width: 100%;
  height: auto;
}

.mermaidDiagramOverlayClose {
  position: fixed;
  top: 16px;
  right: 16px;
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 8px;
  color: var(--muted);
  cursor: pointer;
  font-size: 16px;
  z-index: 10002;
  transition: all 0.15s ease;
}

.mermaidDiagramOverlayClose:hover {
  background: rgba(255, 80, 80, 0.15);
  border-color: rgba(255, 80, 80, 0.3);
  color: #ff6b6b;
}

.mermaidDiagramLoading {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  margin: 1.2em 0;
  padding: 24px;
  background: rgba(var(--theme-primary-rgb), 0.02);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.08);
  border-radius: 6px;
  color: var(--muted);
  font-size: 12px;
  font-family: var(--style-font-ui);
}

.mermaidDiagramSpinner {
  width: 14px;
  height: 14px;
  border: 2px solid rgba(var(--theme-primary-rgb), 0.15);
  border-top-color: var(--theme-primary, #00ff41);
  border-radius: 50%;
  animation: mermaidSpin 0.6s linear infinite;
}

@keyframes mermaidSpin {
  to { transform: rotate(360deg); }
}

.mermaidDiagramError {
  margin: 1.2em 0;
  border: 1px solid rgba(255, 80, 80, 0.25);
  border-radius: 6px;
  overflow: hidden;
}

.mermaidDiagramErrorHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  background: rgba(255, 80, 80, 0.08);
  border-bottom: 1px solid rgba(255, 80, 80, 0.15);
  font-size: 11px;
  font-weight: 600;
  color: #ff6b6b;
  font-family: var(--style-font-ui);
}

.mermaidDiagramErrorIcon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: rgba(255, 80, 80, 0.15);
  border: 1px solid rgba(255, 80, 80, 0.3);
  font-size: 10px;
  font-weight: 700;
}

.mermaidDiagramErrorDetail {
  margin: 0;
  padding: 8px 14px;
  font-size: 10px;
  font-family: var(--style-font-ui);
  color: var(--muted);
  opacity: 0.7;
  border-bottom: 1px solid rgba(255, 255, 255, 0.04);
  white-space: pre-wrap;
  max-height: 60px;
  overflow-y: auto;
}

.mermaidDiagramFallback {
  margin: 0;
  padding: 12px 14px;
  font-size: 11px;
  font-family: var(--style-font-ui);
  line-height: 1.5;
  color: var(--text);
  background: rgba(var(--theme-primary-rgb), 0.02);
  white-space: pre-wrap;
  max-height: 300px;
  overflow-y: auto;
}

.mermaidDiagramFallback code {
  background: none;
  border: none;
  padding: 0;
  color: inherit;
  font-size: inherit;
}

/* ------------------------------------------------------------------ */
/*  Reference Task Chips                                                */
/* ------------------------------------------------------------------ */

.terminalReferenceTaskChips {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.terminalReferenceTaskChip {
  display: inline-flex;
  align-items: center;
  padding: 3px 10px;
  background: rgba(var(--theme-primary-rgb), 0.08);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.2);
  border-radius: 3px;
  font-size: 12px;
  font-weight: 500;
  color: var(--text-secondary);
  max-width: 200px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  cursor: pointer;
}

.terminalReferenceTaskChip:hover {
  background: rgba(var(--theme-primary-rgb), 0.14);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  color: var(--text);
}

/* ------------------------------------------------------------------ */
/*  Inline Task Doc Items (simple title + icon)                         */
/* ------------------------------------------------------------------ */

.terminalTaskDocsInline {
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.terminalTaskDocItem {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 5px 10px;
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.15s ease;
  color: inherit;
  font-family: inherit;
}

.terminalTaskDocItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  border-color: rgba(var(--theme-primary-rgb), 0.25);
}

.terminalTaskDocIcon {
  flex-shrink: 0;
  color: var(--theme-primary, #00ff41);
  opacity: 0.8;
}

.terminalTaskDocTitle {
  font-size: 12px;
  font-weight: 600;
  color: var(--text);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
}

/* ------------------------------------------------------------------ */
/*  Doc Viewer Fullscreen                                               */
/* ------------------------------------------------------------------ */

.docViewerOverlay--fullscreen {
  background: #0a0a0a;
}

.docViewerPanel--fullscreen {
  width: 100vw !important;
  max-width: 100vw !important;
  max-height: 100vh !important;
  height: 100vh;
  border-radius: 0;
  border: none;
  box-shadow: none;
}

.docViewerHeaderActions {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-shrink: 0;
}

.docViewerFullscreenBtn {
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: 6px;
  color: var(--muted);
  cursor: pointer;
  transition: all 0.15s ease;
}

.docViewerFullscreenBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  color: var(--theme-primary, #00ff41);
}

/* ------------------------------------------------------------------ */
/*  Responsive / Mobile Panel Switcher                                  */
/* ------------------------------------------------------------------ */

.mobilePanelSwitcher {
  display: flex;
  flex-shrink: 0;
  border-bottom: 1px solid var(--border);
  background: var(--panel);
}

.mobilePanelTab {
  flex: 1;
  padding: 10px 0;
  border: none;
  background: transparent;
  color: var(--muted);
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  cursor: pointer;
  transition: color 0.15s, background 0.15s;
  border-bottom: 2px solid transparent;
}

.mobilePanelTab:hover {
  color: var(--foreground);
  background: rgba(255, 255, 255, 0.03);
}

.mobilePanelTabActive {
  color: var(--theme-primary, #6b8afd);
  border-bottom-color: var(--theme-primary, #6b8afd);
  background: rgba(var(--theme-primary-rgb, 107, 138, 253), 0.06);
}

.appContentResponsive {
  /* In responsive mode, the active panel fills the entire width */
  flex: 1 1 0;
  min-height: 0;
  overflow: hidden;
}

.appContentResponsive .sidebar {
  border-right: none;
}

.appContentResponsive .rightPanel {
  border-left: none;
}

/* ==================== Task Board Overlay ==================== */

.taskBoardOverlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 10000;
  background: var(--bg, #0a0e16);
  display: flex;
  align-items: stretch;
  justify-content: center;
  animation: taskBoardSlideIn 0.2s ease-out;
}

@keyframes taskBoardSlideIn {
  from { opacity: 0; transform: translateX(12px); }
  to { opacity: 1; transform: translateX(0); }
}

.taskBoardContainer {
  display: flex;
  flex-direction: column;
  width: 100%;
  max-width: 100%;
  height: 100%;
  background: var(--bg, #0a0e16);
  overflow: hidden;
}

.taskBoardBody {
  display: flex;
  flex: 1;
  min-height: 0;
  overflow: hidden;
}

.taskBoardContent {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* ── Header ── */

.taskBoardHeader {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 14px 24px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.06);
  background:
    linear-gradient(135deg,
      rgba(var(--theme-primary-rgb), 0.02),
      transparent 60%),
    var(--style-surface-1, var(--bg, #0a0e16));
  flex-shrink: 0;
}

.taskBoardHeaderLeft {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.taskBoardTitle {
  font-family: var(--style-font-ui);
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 0.1em;
  color: var(--theme-primary);
  text-transform: uppercase;
}

.taskBoardTitleSymbol {
  font-size: 16px;
  margin-right: 4px;
}

.taskBoardProjectName {
  font-family: var(--style-font-ui);
  font-size: 13px;
  color: rgba(var(--theme-primary-rgb), 0.4);
  padding: 3px 10px;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  border-radius: 3px;
}

.taskBoardHeaderStats {
  display: flex;
  gap: 14px;
  font-family: var(--style-font-ui);
  font-size: 13px;
}

.taskBoardStat {
  display: flex;
  align-items: center;
  gap: 4px;
}

.taskBoardStatActive { color: #00d9ff; }
.taskBoardStatPending { color: rgba(var(--theme-primary-rgb), 0.5); }
.taskBoardStatBlocked { color: #ef4444; }
.taskBoardStatReview { color: #a855f7; }
.taskBoardStatDone { color: var(--theme-primary); }

.taskBoardCloseBtn {
  background: rgba(var(--theme-primary-rgb), 0.03);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.08);
  color: rgba(var(--theme-primary-rgb), 0.4);
  width: 36px;
  height: 36px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 16px;
  font-family: var(--style-font-ui);
  transition: all 0.2s ease;
  border-radius: var(--style-radius-sm, 4px);
  flex-shrink: 0;
}

.taskBoardCloseBtn:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.2);
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

/* ==================== Excalidraw Overlay ==================== */

.excalidrawOverlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 10001;
  background: var(--bg, #0a0e16);
  display: flex;
  align-items: stretch;
  justify-content: center;
  animation: taskBoardSlideIn 0.2s ease-out;
}

.excalidrawContainer {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background: var(--bg, #0a0e16);
  overflow: hidden;
}

.excalidrawHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  padding: 12px 20px;
  border-bottom: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  background: rgba(var(--theme-primary-rgb), 0.03);
  flex-shrink: 0;
}

.excalidrawHeaderLeft {
  display: flex;
  align-items: center;
  gap: 14px;
  min-width: 0;
}

.excalidrawShortcutHint {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.45);
  white-space: nowrap;
}

.excalidrawCanvas {
  flex: 1;
  min-height: 0;
  background: var(--bg, #0a0e16);
  /* Neutralize body CSS zoom so Excalidraw mouse coordinates match correctly.
     Without this, getBoundingClientRect() and pointer clientX/Y are in different
     coordinate spaces, causing drawing strokes to appear offset from the cursor. */
  zoom: calc(1 / var(--app-zoom-scale));
}

.excalidrawCanvas .excalidraw {
  width: 100%;
  height: 100%;
}

/* ── Excalidraw Inline (space mode) ── */

.excalidrawInline {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  min-height: 0;
  flex: 1;
  background: var(--bg, #0a0e16);
}

/* ── DocViewer Inline (space mode) ── */

.docViewerInline {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  min-height: 0;
  flex: 1;
  background: var(--bg, #0a0e16);
  overflow: hidden;
}

.docViewerPanel--inline {
  width: 100%;
  height: 100%;
  max-width: 100%;
  max-height: 100%;
  border-radius: 0;
  border: none;
  display: flex;
  flex-direction: column;
}

/* ── Space icons in SpacesRail ── */

.spacesRailSpace {
  color: var(--muted);
}

.spacesRailSpace--whiteboard {
  color: var(--theme-primary, #7aa2f7);
}

.spacesRailSpace--document {
  color: var(--theme-accent, #bb9af7);
}

/* ── Columns Container ── */

.taskBoardColumns {
  display: flex;
  gap: 1px;
  flex: 1;
  min-height: 0;
  overflow-x: auto;
  overflow-y: hidden;
  background: rgba(var(--theme-primary-rgb), 0.015);
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.1) transparent;
}

/* ── Column ── */

.taskBoardColumn {
  flex: 1 0 240px;
  max-width: 360px;
  display: flex;
  flex-direction: column;
  min-height: 0;
  height: 100%;
  background:
    linear-gradient(180deg,
      var(--style-surface-1, var(--bg, #0a0e16)),
      var(--bg, #0a0e16));
  border-right: 1px solid rgba(var(--theme-primary-rgb), 0.04);
  transition: background 0.2s ease;
}

.taskBoardColumn:last-child {
  border-right: none;
}

.taskBoardColumn--dragOver {
  background: rgba(var(--theme-primary-rgb), 0.04);
  box-shadow: inset 0 0 0 1px rgba(var(--theme-primary-rgb), 0.12);
  transition: background 0.15s ease, box-shadow 0.15s ease;
}

.taskBoardColumnCollapsed {
  flex: 0 0 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 16px 0;
  background: var(--bg, #0a0e16);
  border-right: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  cursor: pointer;
  transition: background 0.15s ease;
}

.taskBoardColumnCollapsed:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.taskBoardColumnCollapsedLabel {
  font-family: var(--style-font-ui);
  font-size: 16px;
  color: rgba(var(--theme-primary-rgb), 0.4);
  writing-mode: vertical-rl;
  text-orientation: mixed;
}

.taskBoardColumnCollapsedCount {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.15);
  padding: 2px 6px;
  border-radius: 8px;
  min-width: 20px;
  text-align: center;
}

/* ── Column Header ── */

.taskBoardColumnHeader {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.05);
  cursor: pointer;
  user-select: none;
  transition: background 0.15s ease;
  background: rgba(var(--theme-primary-rgb), 0.015);
}

.taskBoardColumnHeader:hover {
  background: rgba(var(--theme-primary-rgb), 0.03);
}

.taskBoardColumnDot {
  font-size: 14px;
  font-family: var(--style-font-ui);
}

.taskBoardColumnDot--todo { color: rgba(var(--theme-primary-rgb), 0.4); }
.taskBoardColumnDot--blocked { color: #ef4444; }
.taskBoardColumnDot--in_progress {
  color: #00d9ff;
  animation: taskBoardPulse 2s ease-in-out infinite;
}
.taskBoardColumnDot--in_review { color: #a855f7; }
.taskBoardColumnDot--completed { color: var(--theme-primary); }

@keyframes taskBoardPulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

.taskBoardColumnLabel {
  font-family: var(--style-font-ui);
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.1em;
  color: rgba(var(--theme-primary-rgb), 0.6);
  text-transform: uppercase;
  flex: 1;
}

.taskBoardColumnCount {
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 500;
  color: rgba(var(--theme-primary-rgb), 0.7);
  background: rgba(var(--theme-primary-rgb), 0.06);
  padding: 2px 8px;
  border-radius: var(--style-radius-sm, 4px);
  min-width: 22px;
  text-align: center;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.08);
}

/* ── Column Body ── */

.taskBoardColumnBody {
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.1) transparent;
}

.taskBoardColumnEmpty {
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  min-height: 80px;
}

.taskBoardColumnEmptyText {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.2);
  text-transform: lowercase;
}

/* ── Drag-active body cursor override ── */
body.dragging-active,
body.dragging-active * {
  cursor: grabbing !important;
  user-select: none !important;
  -webkit-user-select: none !important;
}

/* ── Task Card ── */

.taskBoardCard {
  display: flex;
  flex-shrink: 0;
  background:
    linear-gradient(145deg,
      var(--style-surface-2, var(--panel, #10151e)),
      var(--style-surface-1, var(--panel, #10151e)));
  border: 1px solid rgba(var(--theme-primary-rgb), 0.06);
  border-radius: var(--style-radius-md, 6px);
  cursor: grab;
  transition: border-color 0.2s ease, box-shadow 0.2s ease, transform 0.2s ease, opacity 0.2s ease;
  overflow: hidden;
  box-shadow:
    0 1px 3px rgba(0, 0, 0, 0.15),
    0 2px 8px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.02);
}

.taskBoardCard:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.15);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.2),
    0 8px 24px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.03);
  transform: translateY(-2px);
}

.taskBoardCard:active {
  cursor: grabbing;
}

.taskBoardCard--dragging {
  opacity: 0.2;
  transform: scale(0.97);
  border-style: dashed;
  border-color: rgba(var(--theme-primary-rgb), 0.2);
}

/* ── Drag Ghost ── */

.dragGhostCard {
  filter: drop-shadow(0 8px 24px rgba(0, 0, 0, 0.5))
          drop-shadow(0 0 12px rgba(var(--theme-primary-rgb), 0.15));
}

.taskBoardCard--ghost {
  border-color: rgba(var(--theme-primary-rgb), 0.2);
  box-shadow:
    0 8px 24px rgba(0, 0, 0, 0.3),
    0 0 1px rgba(var(--theme-primary-rgb), 0.1);
  background:
    linear-gradient(145deg,
      var(--style-surface-3, rgba(22, 27, 38, 0.98)),
      var(--style-surface-2, var(--panel, #10151e)));
}

.taskBoardCard--active {
  border-left: none;
}

.taskBoardCard--blocked {
  border-left: none;
}

.taskBoardCard--done {
  opacity: 0.6;
}

.taskBoardCard--cancelled {
  opacity: 0.4;
}

/* ── Card Stripe ── */

.taskBoardCardStripe {
  width: 3px;
  flex-shrink: 0;
}

.taskBoardCard--active .taskBoardCardStripe {
  background: linear-gradient(180deg, #38bdf8, #0ea5e9) !important;
}

.taskBoardCard--blocked .taskBoardCardStripe {
  background: linear-gradient(180deg, #f87171, #ef4444) !important;
}

/* ── Card Content ── */

.taskBoardCardContent {
  flex: 1;
  padding: 12px 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  min-width: 0;
}

.taskBoardCardTitle {
  font-family: var(--style-font-ui);
  font-size: 13px;
  font-weight: 500;
  color: var(--theme-text, #f0f4f8);
  line-height: 1.45;
  display: -webkit-box;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
  word-break: break-word;
}

.taskBoardCardTitle--cancelled {
  text-decoration: line-through;
  opacity: 0.6;
}

/* ── Card Meta ── */

.taskBoardCardMeta {
  display: flex;
  align-items: center;
  gap: 10px;
  font-family: var(--style-font-ui);
  font-size: 11px;
}

.taskBoardCardPriority {
  text-transform: uppercase;
  font-weight: 600;
  letter-spacing: 0.05em;
}

.taskBoardCardPriority--high { color: #ff6464; }
.taskBoardCardPriority--medium { color: #ffb000; }
.taskBoardCardPriority--low { color: rgba(var(--theme-primary-rgb), 0.4); }

.taskBoardCardSubtasks {
  color: rgba(var(--theme-primary-rgb), 0.4);
}

.taskBoardCardTime {
  color: rgba(var(--theme-primary-rgb), 0.3);
  margin-left: auto;
}

/* ── Card Sessions ── */

.taskBoardCardSessions {
  display: flex;
  align-items: center;
  gap: 6px;
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.4);
}

.taskBoardCardSessionDot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(var(--theme-primary-rgb), 0.3);
}

.taskBoardCardSessionDot--active {
  background: #00d9ff;
  box-shadow: 0 0 4px rgba(0, 217, 255, 0.5);
  animation: taskBoardPulse 2s ease-in-out infinite;
}

.taskBoardCardSessionCount {
  color: rgba(var(--theme-primary-rgb), 0.4);
}

/* ── Card Action ── */

.taskBoardCardAction {
  background: rgba(var(--theme-primary-rgb), 0.04);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.1);
  color: rgba(var(--theme-primary-rgb), 0.5);
  padding: 5px 12px;
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: var(--style-radius-sm, 4px);
  align-self: flex-start;
}

.taskBoardCardAction:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.25);
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
}

.taskBoardCardAction .terminalPrompt {
  color: var(--terminal-amber, #ffb000);
  font-weight: 700;
}

/* ── Task Board Tabs ── */

.taskBoardTabs {
  display: flex;
  gap: 2px;
  background: rgba(var(--theme-primary-rgb), 0.03);
  border-radius: var(--style-radius-sm, 4px);
  padding: 3px;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.06);
}

.taskBoardTab {
  background: transparent;
  border: none;
  color: rgba(var(--theme-primary-rgb), 0.4);
  font-family: var(--style-font-ui);
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.04em;
  padding: 6px 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  border-radius: var(--style-radius-sm, 3px);
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 4px;
}

.taskBoardTab:hover {
  color: rgba(var(--theme-primary-rgb), 0.6);
  background: rgba(var(--theme-primary-rgb), 0.04);
}

.taskBoardTab--active {
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.08);
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.15);
}

.taskBoardTabSymbol {
  font-size: 14px;
}

/* ── Sessions Board ── */

.sessionBoardEmpty {
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  min-height: 200px;
}

.sessionBoardEmptyText {
  font-family: var(--style-font-ui);
  font-size: 13px;
  color: rgba(var(--theme-primary-rgb), 0.2);
  text-transform: lowercase;
}

/* ── Session Column ── */

.sessionBoardColumns .sessionBoardColumn {
  flex: 1 1 0;
  min-width: 200px;
  max-width: none;
}

.sessionBoardColumn {
  flex: 1 0 280px;
  max-width: 380px;
  display: flex;
  flex-direction: column;
  background: var(--bg, #0a0e16);
  border-right: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  transition: opacity 0.2s ease;
}

.sessionBoardColumn:last-child {
  border-right: none;
}

.sessionBoardColumn--inactive {
  opacity: 0.5;
}

.sessionBoardColumn--inactive:hover {
  opacity: 0.75;
}

/* ── Session Column Header ── */

.sessionColumnHeader {
  padding: 12px 14px;
  border-bottom: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex-shrink: 0;
  cursor: pointer;
  transition: background 0.15s ease;
}

.sessionColumnHeader:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.sessionColumnHeaderTop {
  display: flex;
  align-items: center;
  gap: 8px;
}

.sessionColumnStatusDot {
  font-size: 14px;
  font-family: var(--style-font-ui);
  flex-shrink: 0;
}

.sessionColumnStatusDot--working {
  animation: taskBoardPulse 2s ease-in-out infinite;
}

.sessionColumnName {
  font-family: var(--style-font-ui);
  font-size: 13px;
  font-weight: 600;
  color: var(--theme-text, #f0f4f8);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.sessionColumnTaskCount {
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
  padding: 1px 6px;
  border-radius: 8px;
  flex-shrink: 0;
}

.sessionColumnHeaderBottom {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 8px;
}

.sessionColumnMeta {
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.35);
}

.sessionColumnDuration {
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.35);
}

/* ── Session Column Timeline ── */

.sessionColumnTimeline {
  border-bottom: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  max-height: 240px;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.1) transparent;
}

.sessionColumnTimeline--full {
  flex: 1;
  max-height: none;
  overflow-y: auto;
}

/* ── Session Column Toggle ── */

.sessionColumnToggle {
  display: flex;
  gap: 2px;
  flex-shrink: 0;
  margin-left: auto;
}

.sessionColumnToggleBtn {
  font-family: var(--style-font-ui);
  font-size: 11px;
  padding: 3px 8px;
  border: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  border-radius: 3px;
  background: transparent;
  color: rgba(var(--theme-primary-rgb), 0.35);
  cursor: pointer;
  transition: all 0.15s ease;
}

.sessionColumnToggleBtn:hover {
  color: var(--theme-primary);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
}

.sessionColumnToggleBtn--active {
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
  border-color: rgba(var(--theme-primary-rgb), 0.3);
}

/* ── Session Column Terminal Host ── */

.sessionColumnTerminalHost {
  flex: 1;
  overflow: hidden;
  position: relative;
}

.sessionColumnTerminalHost .terminalContainer {
  position: absolute;
  inset: 0;
  visibility: visible;
  pointer-events: auto;
}

.sessionBoardColumn--terminal {
  min-height: 0;
}

.sessionBoardColumn--working {
  border-color: rgba(0, 217, 255, 0.15);
}

/* Terminal reparented into board column */
.terminalInBoard {
  position: absolute !important;
  inset: 0 !important;
  visibility: visible !important;
  pointer-events: auto !important;
}

/* Terminal reparented into TeamView slot host */
.terminalInTeamView {
  position: absolute !important;
  inset: 0 !important;
  visibility: visible !important;
  pointer-events: auto !important;
  border-radius: 0 0 4px 4px;
}

/* ── Session Column Tasks ── */

.sessionColumnTasks {
  flex: 1;
  overflow-y: auto;
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.1) transparent;
}

.sessionColumnSectionLabel {
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.1em;
  color: rgba(var(--theme-primary-rgb), 0.3);
  text-transform: uppercase;
  padding: 4px 4px 2px;
}

.sessionColumnTasksEmpty {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.2);
  padding: 8px 4px;
  text-align: center;
}

/* ── Session Task Card ── */

.sessionTaskCard {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 8px;
  background: var(--panel, #10151e);
  border: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  border-radius: 3px;
  cursor: pointer;
  transition: border-color 0.15s ease, background 0.15s ease;
}

.sessionTaskCard:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.25);
  background: rgba(var(--theme-primary-rgb), 0.04);
}

.sessionTaskCardSymbol {
  font-family: var(--style-font-ui);
  font-size: 13px;
  flex-shrink: 0;
}

.sessionTaskCardTitle {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: var(--theme-text, #f0f4f8);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.sessionTaskCardStatus {
  font-family: var(--style-font-ui);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.05em;
  flex-shrink: 0;
}

/* ============================================================ */
/* ── Multi-Project Board                                     ── */
/* ============================================================ */

.mpbOverlay {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: 10000;
  background: var(--bg, #0a0e16);
  display: flex;
  align-items: stretch;
  justify-content: center;
  animation: taskBoardSlideIn 0.2s ease-out;
}

.mpbContainer {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background: var(--bg, #0a0e16);
  overflow: hidden;
}

/* ── MPB Header ── */

.mpbHeader {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 20px;
  border-bottom: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  background: rgba(var(--theme-primary-rgb), 0.03);
  flex-shrink: 0;
}

.mpbHeaderLeft {
  display: flex;
  align-items: center;
  gap: 12px;
  flex: 1;
}

.mpbProjectCount {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.4);
  padding: 3px 10px;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  border-radius: 3px;
}

.mpbLayoutToggle {
  display: flex;
  gap: 2px;
  background: rgba(var(--theme-primary-rgb), 0.06);
  border-radius: 3px;
  padding: 2px;
}

.mpbLayoutBtn {
  background: transparent;
  border: none;
  color: rgba(var(--theme-primary-rgb), 0.4);
  font-family: var(--style-font-ui);
  font-size: 14px;
  padding: 4px 10px;
  cursor: pointer;
  transition: all 0.15s ease;
  border-radius: 2px;
}

.mpbLayoutBtn:hover {
  color: rgba(var(--theme-primary-rgb), 0.7);
  background: rgba(var(--theme-primary-rgb), 0.06);
}

.mpbLayoutBtn--active {
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.12);
}

/* ── MPB Body ── */

.mpbBody {
  display: flex;
  flex: 1;
  overflow: hidden;
}

.mpbContent {
  flex: 1;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* ── MPB Sidebar ── */

.mpbSidebar {
  width: 220px;
  flex-shrink: 0;
  background: var(--bg, #0a0e16);
  border-right: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.mpbSidebar--collapsed {
  width: 40px;
  align-items: center;
  padding-top: 8px;
}

.mpbSidebarHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 12px;
  border-bottom: 1px solid var(--theme-border, rgba(255,255,255,0.08));
}

.mpbSidebarTitle {
  font-family: var(--style-font-ui);
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.1em;
  text-transform: uppercase;
  color: rgba(var(--theme-primary-rgb), 0.6);
}

.mpbSidebarToggle {
  background: transparent;
  border: none;
  color: rgba(var(--theme-primary-rgb), 0.4);
  cursor: pointer;
  font-size: 12px;
  padding: 4px;
  transition: color 0.15s ease;
}

.mpbSidebarToggle:hover {
  color: var(--theme-primary);
}

.mpbSidebarCollapsedDots {
  display: flex;
  flex-direction: column;
  gap: 6px;
  padding: 8px 0;
}

.mpbSidebarDot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(var(--theme-primary-rgb), 0.15);
  transition: all 0.15s ease;
}

.mpbSidebarDot--selected {
  box-shadow: 0 0 4px rgba(var(--theme-primary-rgb), 0.3);
}

.mpbSidebarSelectAll {
  padding: 8px 12px;
}

.mpbSidebarDivider {
  height: 1px;
  background: var(--theme-border, rgba(255,255,255,0.08));
  margin: 0 12px;
}

.mpbSidebarList {
  flex: 1;
  overflow-y: auto;
  padding: 4px 0;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.1) transparent;
}

/* ── Checkbox & Project Item ── */

.mpbCheckboxLabel {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.5);
}

.mpbCheckbox {
  display: none;
}

.mpbCheckboxCustom {
  width: 12px;
  height: 12px;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  border-radius: 2px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.15s ease;
}

.mpbCheckbox:checked + .mpbCheckboxCustom {
  background: rgba(var(--theme-primary-rgb), 0.2);
  border-color: var(--theme-primary);
}

.mpbCheckbox:checked + .mpbCheckboxCustom::after {
  content: '✓';
  font-size: 10px;
  color: var(--theme-primary);
}

.mpbSelectAllText {
  font-weight: 600;
  letter-spacing: 0.05em;
}

.mpbProjectItem {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 12px;
  cursor: pointer;
  transition: background 0.15s ease;
}

.mpbProjectItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.04);
}

.mpbProjectItem--selected {
  background: rgba(var(--theme-primary-rgb), 0.06);
}

.mpbProjectColor {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}

.mpbProjectName {
  font-family: var(--style-font-ui);
  font-size: 13px;
  color: var(--theme-text, #f0f4f8);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.mpbProjectStats {
  display: flex;
  gap: 6px;
  flex-shrink: 0;
}

.mpbProjectStatItem {
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.35);
}

/* ── Grouped View ── */

.mpbGroupedView {
  flex: 1;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.1) transparent;
}

.mpbProjectRow {
  border-bottom: 1px solid var(--theme-border, rgba(255,255,255,0.08));
}

.mpbProjectRowHeader {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 16px;
  cursor: pointer;
  transition: background 0.15s ease;
  user-select: none;
}

.mpbProjectRowHeader:hover {
  background: rgba(var(--theme-primary-rgb), 0.04);
}

.mpbProjectRowColor {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.mpbProjectRowName {
  font-family: var(--style-font-ui);
  font-size: 14px;
  font-weight: 600;
  color: var(--theme-text, #f0f4f8);
  flex: 1;
}

.mpbProjectRowCount {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.4);
}

.mpbProjectRowChevron {
  font-size: 10px;
  color: rgba(var(--theme-primary-rgb), 0.4);
  transition: transform 0.2s ease;
}

.mpbProjectRowChevron--collapsed {
  transform: rotate(-90deg);
}

/* ── Kanban Columns in Grouped View ── */

.mpbProjectRowColumns {
  display: flex;
  gap: 1px;
  background: rgba(var(--theme-primary-rgb), 0.03);
  min-height: 120px;
}

.mpbKanbanColumn {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: var(--bg, #0a0e16);
  border-right: 1px solid rgba(var(--theme-primary-rgb), 0.05);
  transition: background 0.2s ease;
}

.mpbKanbanColumn:last-child {
  border-right: none;
}

.mpbKanbanColumn--dragOver {
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.mpbKanbanColumnHeader {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.05);
  cursor: pointer;
  user-select: none;
  transition: background 0.15s ease;
}

.mpbKanbanColumnHeader:hover {
  background: rgba(var(--theme-primary-rgb), 0.04);
}

.mpbKanbanColumnLabel {
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  letter-spacing: 0.1em;
  color: rgba(var(--theme-primary-rgb), 0.4);
  text-transform: uppercase;
  flex: 1;
}

.mpbKanbanColumnCount {
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.5);
}

.mpbKanbanColumnBody {
  flex: 1;
  overflow-y: auto;
  padding: 6px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.1) transparent;
}

.mpbKanbanColumnEmpty {
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.15);
  text-align: center;
  padding: 12px 0;
}

/* ── Project Badge ── */

.mpbProjectBadge {
  font-family: var(--style-font-ui);
  font-size: 10px;
  font-weight: 600;
  letter-spacing: 0.05em;
  padding: 2px 8px;
  border: 1px solid;
  border-radius: 2px;
  align-self: flex-start;
  text-transform: uppercase;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  max-width: 100%;
}

/* ── Empty States ── */

.mpbEmptyState {
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  min-height: 200px;
}

.mpbEmptyText {
  font-family: var(--style-font-ui);
  font-size: 13px;
  color: rgba(var(--theme-primary-rgb), 0.2);
  text-transform: lowercase;
}

.mpbSessionsEmpty {
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 1;
  min-height: 200px;
}

/* ── Sessions View ── */

.mpbSessionsView {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.1) transparent;
}

.mpbSessionProjectGroup {
  border-bottom: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  display: flex;
  flex-direction: column;
  flex: 1;
  min-height: 0;
}

.mpbSessionProjectHeader {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 16px;
  background: rgba(var(--theme-primary-rgb), 0.02);
}

.mpbSessionProjectName {
  font-family: var(--style-font-ui);
  font-size: 14px;
  font-weight: 600;
  color: var(--theme-text, #f0f4f8);
  flex: 1;
}

.mpbSessionProjectCount {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.4);
}

.mpbSessionColumns {
  display: flex;
  gap: 1px;
  overflow-x: auto;
  padding: 0;
  flex: 1;
  min-height: 400px;
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--theme-primary-rgb), 0.15) transparent;
}

.mpbSessionColumns .sessionBoardColumn {
  flex: 1 1 0;
  min-width: 80px;
  max-width: none;
  min-height: 100%;
}

/* ── Collapsed Kanban Column (grouped view) ── */

.mpbKanbanColumnCollapsed {
  flex: 0 0 36px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  padding: 10px 0;
  background: var(--bg, #0a0e16);
  border-right: 1px solid rgba(var(--theme-primary-rgb), 0.05);
  cursor: pointer;
  transition: background 0.15s ease;
}

.mpbKanbanColumnCollapsed:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.mpbKanbanColumnCollapsedSymbol {
  font-family: var(--style-font-ui);
  font-size: 14px;
  color: rgba(var(--theme-primary-rgb), 0.4);
}

.mpbKanbanColumnCollapsedCount {
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.15);
  padding: 2px 6px;
  border-radius: 6px;
  min-width: 20px;
  text-align: center;
}

/* ── Session Resize Handle ── */

.mpbSessionResizeHandle {
  flex: 0 0 4px;
  cursor: col-resize;
  background: transparent;
  transition: background 0.15s ease;
  position: relative;
  z-index: 1;
}

.mpbSessionResizeHandle::after {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: 1px;
  width: 2px;
  background: rgba(var(--theme-primary-rgb), 0.08);
  transition: background 0.15s ease;
}

.mpbSessionResizeHandle:hover::after {
  background: rgba(var(--theme-primary-rgb), 0.3);
}

.mpbSessionResizeHandle:active::after {
  background: var(--theme-primary);
}

/* ── Collapsed Session Column ── */

.mpbSessionColumnCollapsed {
  flex: 0 0 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  padding: 12px 0;
  min-height: 100%;
  background: var(--bg, #0a0e16);
  border-right: 1px solid var(--theme-border, rgba(255,255,255,0.08));
  cursor: pointer;
  transition: background 0.15s ease;
}

.mpbSessionColumnCollapsed:hover {
  background: rgba(var(--theme-primary-rgb), 0.05);
}

.mpbSessionColumnCollapsedDot {
  font-size: 12px;
  font-family: var(--style-font-ui);
}

.mpbSessionColumnCollapsedName {
  font-family: var(--style-font-ui);
  font-size: 9px;
  color: rgba(var(--theme-primary-rgb), 0.5);
  writing-mode: vertical-rl;
  text-orientation: mixed;
  max-height: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ── Unified Sessions View ── */

.mpbSessionColumns--unified {
  flex-wrap: nowrap;
  min-height: 100%;
}

.mpbUnifiedSessionWrapper {
  display: flex;
  flex-direction: column;
  flex: 1 1 0;
  min-width: 80px;
  min-height: 100%;
  transition: opacity 0.15s ease, border-color 0.15s ease;
  border: 2px solid transparent;
  border-radius: 6px;
}

.mpbUnifiedSessionWrapper--dragOver {
  border-color: var(--theme-primary, #00d9ff);
  background: rgba(var(--theme-primary-rgb), 0.03);
}

.mpbUnifiedSessionWrapper--dragging {
  opacity: 0.4;
}

.mpbUnifiedSessionBadge {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 10px;
  background: rgba(var(--theme-primary-rgb), 0.03);
  border-bottom: 2px solid rgba(var(--theme-primary-rgb), 0.1);
  cursor: grab;
  user-select: none;
}

.mpbUnifiedSessionBadge:active {
  cursor: grabbing;
}

.mpbUnifiedSessionBadgeDot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  flex-shrink: 0;
}

.mpbUnifiedSessionBadgeName {
  font-family: var(--style-font-ui);
  font-size: 11px;
  font-weight: 600;
  color: var(--theme-text, #f0f4f8);
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.mpbUnifiedSessionDragHandle {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: rgba(var(--theme-primary-rgb), 0.25);
  letter-spacing: -2px;
  cursor: grab;
  transition: color 0.15s ease;
}

.mpbUnifiedSessionDragHandle:hover {
  color: rgba(var(--theme-primary-rgb), 0.6);
}

.mpbUnifiedSessionWrapper .sessionBoardColumn {
  border-top: none;
  border-radius: 0 0 6px 6px;
}

/* ==================== DRAG & DROP REORDERING ==================== */

.sortableItemWrapper {
  touch-action: none;
}

.sortableItemWrapper--dragging {
  z-index: 100;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  border-radius: 4px;
  background: var(--terminal-bg, #1a1a2e);
}

/* ==================== SPLIT PLAY BUTTON ==================== */

.splitPlayButton {
  display: inline-flex;
  align-items: stretch;
  border-radius: var(--radius-control);
  overflow: hidden;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  transition: all 0.2s;
}

.splitPlayButton:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: rgba(var(--theme-primary-rgb), 0.5);
}

.splitPlayButton__play {
  padding: 4px 10px;
  background: transparent;
  border: none;
  color: var(--theme-primary);
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}

.splitPlayButton__play:hover {
  background: rgba(var(--theme-primary-rgb), 0.2);
  box-shadow: 0 0 8px rgba(var(--theme-primary-rgb), 0.3);
}

.splitPlayButton__play:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.splitPlayButton__dropdown {
  padding: 4px 6px;
  background: transparent;
  border: none;
  border-left: 1px solid rgba(var(--theme-primary-rgb), 0.2);
  color: var(--theme-primary);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.2s;
  font-family: inherit;
}

.splitPlayButton__dropdown:hover {
  background: rgba(var(--theme-primary-rgb), 0.2);
}

.splitPlayButton__dropdown:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

/* Split play dropdown */
.splitPlayDropdown__overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
}

.splitPlayDropdown {
  position: fixed;
  z-index: 1000;
  min-width: 260px;
  max-width: 320px;
  max-height: calc(100vh - 40px);
  overflow-y: auto;
  background: #000000;
  border: 1px solid var(--theme-primary);
  border-radius: 4px;
  padding: 4px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5), 0 0 12px rgba(var(--theme-primary-rgb), 0.15);
  isolation: isolate;
  transform-origin: top right;
  animation: dropdownAppearDown 0.15s ease-out;
}

.splitPlayDropdown--openUp {
  transform-origin: bottom right;
  animation: dropdownAppearUp 0.15s ease-out;
}

@keyframes dropdownAppearDown {
  from {
    opacity: 0;
    transform: scaleY(0.92) translateY(-4px);
  }
  to {
    opacity: 1;
    transform: scaleY(1) translateY(0);
  }
}

@keyframes dropdownAppearUp {
  from {
    opacity: 0;
    transform: scaleY(0.92) translateY(4px);
  }
  to {
    opacity: 1;
    transform: scaleY(1) translateY(0);
  }
}

.splitPlayDropdown__header {
  padding: 8px 10px 6px;
  font-family: var(--style-font-ui);
  font-size: 10px;
  font-weight: 600;
  color: var(--theme-primary);
  text-transform: uppercase;
  letter-spacing: 0.8px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  margin-bottom: 4px;
}

.splitPlayDropdown__empty {
  padding: 16px 10px;
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(240, 244, 248, 0.4);
  text-align: center;
}

.splitPlayDropdown__section {
  margin-bottom: 0;
}

.splitPlayDropdown__member {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 8px 10px;
  background: transparent;
  border: none;
  border-radius: 3px;
  color: var(--text);
  font-family: var(--style-font-ui);
  font-size: 12px;
  cursor: pointer;
  transition: all 0.1s ease;
  text-align: left;
  gap: 10px;
}

.splitPlayDropdown__member:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
}

.splitPlayDropdown__avatar {
  font-size: 16px;
  flex-shrink: 0;
  width: 22px;
  text-align: center;
}

.splitPlayDropdown__memberInfo {
  flex: 1;
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.splitPlayDropdown__memberTop {
  display: flex;
  align-items: center;
  gap: 6px;
}

.splitPlayDropdown__name {
  font-weight: 500;
  font-size: 12px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.splitPlayDropdown__memberSub {
  font-size: 10px;
  color: rgba(240, 244, 248, 0.4);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  gap: 4px;
}

.splitPlayDropdown__agentIcon {
  font-size: 10px;
  color: rgba(var(--theme-primary-rgb), 0.5);
}

.splitPlayDropdown__defaultTag {
  font-family: var(--style-font-ui);
  font-size: 9px;
  color: rgba(var(--theme-primary-rgb), 0.6);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.2);
  border-radius: 3px;
  padding: 0 4px;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  flex-shrink: 0;
}

.splitPlayDropdown__separator {
  height: 1px;
  background: rgba(var(--theme-primary-rgb), 0.15);
  margin: 4px 0;
}

.splitPlayDropdown__newMember {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 8px 10px;
  background: transparent;
  border: none;
  border-radius: 3px;
  color: rgba(var(--theme-primary-rgb), 0.7);
  font-family: var(--style-font-ui);
  font-size: 11px;
  cursor: pointer;
  transition: all 0.1s ease;
  text-align: left;
  gap: 8px;
}

.splitPlayDropdown__newMember:hover {
  background: rgba(var(--theme-primary-rgb), 0.1);
  color: var(--theme-primary);
}

.splitPlayDropdown__newIcon {
  font-size: 14px;
  font-weight: 600;
  width: 22px;
  text-align: center;
  flex-shrink: 0;
}

/* Team member avatar on play button */
.splitPlayButton__avatar {
  font-size: 12px;
  line-height: 1;
}

/* Mode badges in dropdown */
.splitPlayDropdown__modeBadge {
  font-family: var(--style-font-ui);
  font-size: 9px;
  padding: 1px 5px;
  border-radius: 3px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.3px;
  flex-shrink: 0;
}

.splitPlayDropdown__modeBadge--execute {
  background: rgba(46, 204, 113, 0.15);
  color: #2ecc71;
}

.splitPlayDropdown__modeBadge--coordinate {
  background: rgba(155, 89, 182, 0.15);
  color: #9b59b6;
}

.splitPlayDropdown__modeBadge--recruit {
  background: rgba(230, 126, 34, 0.15);
  color: #e67e22;
}

/* Assigned member indicator */
.splitPlayDropdown__member--assigned {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-left: 2px solid var(--theme-primary);
  padding-left: 8px;
}

.splitPlayDropdown__member--assigned .splitPlayDropdown__name {
  color: var(--theme-primary);
}

.splitPlayDropdown__assignedCheck {
  color: var(--theme-primary);
  font-size: 11px;
  flex-shrink: 0;
}

/* ==================== TEAM MEMBER LIST ==================== */

.teamMemberList {
  padding: 20px;
}

.teamMemberList__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 24px;
}

.teamMemberList__title {
  font-size: 18px;
  font-weight: 600;
  color: var(--text);
}

.teamMemberList__section {
  margin-bottom: 32px;
}

.teamMemberList__sectionTitle {
  font-size: 12px;
  font-weight: 600;
  color: rgba(240, 244, 248, 0.5);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-bottom: 12px;
}

.teamMemberList__sectionHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 8px 0;
  width: 100%;
  transition: all 0.15s;
}

.teamMemberList__sectionHeader:hover {
  opacity: 0.8;
}

.teamMemberList__sectionCaret {
  color: var(--muted);
  font-size: 12px;
  transition: transform 0.2s;
}

.teamMemberList__cards {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 16px;
}

.teamMemberList__empty {
  text-align: center;
  padding: 60px 20px;
  color: var(--muted);
}

.teamMemberList__empty p {
  margin-bottom: 16px;
  font-size: 14px;
}

/* Team member card */
.teamMemberCard {
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: var(--radius-control);
  padding: 16px;
  transition: all 0.2s;
}

.teamMemberCard:hover {
  border-color: rgba(var(--theme-primary-rgb), 0.3);
  background: rgba(var(--theme-primary-rgb), 0.02);
}

.teamMemberCard--default {
  border-left: 3px solid var(--theme-primary);
}

.teamMemberCard--custom {
  border-left: 3px solid var(--accent-2);
}

.teamMemberCard--archived {
  opacity: 0.6;
}

.teamMemberCard__header {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  margin-bottom: 12px;
  position: relative;
}

.teamMemberCard__avatar {
  font-size: 32px;
  line-height: 1;
  flex-shrink: 0;
}

.teamMemberCard__info {
  flex: 1;
  min-width: 0;
}

.teamMemberCard__name {
  font-size: 15px;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 4px;
}

.teamMemberCard__role {
  font-size: 12px;
  color: var(--muted);
}

.teamMemberCard__menuBtn {
  background: transparent;
  border: none;
  color: var(--muted);
  font-size: 18px;
  cursor: pointer;
  padding: 4px 8px;
  margin: -4px -8px 0 0;
  transition: all 0.15s;
  line-height: 1;
}

.teamMemberCard__menuBtn:hover {
  color: var(--text);
  background: rgba(255, 255, 255, 0.05);
  border-radius: 4px;
}

.teamMemberCard__meta {
  display: flex;
  flex-wrap: wrap;
  gap: 12px;
  margin-bottom: 12px;
  font-size: 11px;
  color: var(--muted);
}

.teamMemberCard__metaItem {
  display: flex;
  align-items: center;
}

.teamMemberCard__actions {
  display: flex;
  gap: 8px;
}

.teamMemberCard__btn {
  flex: 1;
  padding: 6px 12px;
  background: rgba(var(--theme-primary-rgb), 0.1);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  border-radius: 4px;
  color: var(--theme-primary);
  font-family: inherit;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.15s;
}

.teamMemberCard__btn:hover {
  background: rgba(var(--theme-primary-rgb), 0.2);
  border-color: rgba(var(--theme-primary-rgb), 0.5);
}

.teamMemberCard__btn--danger {
  background: rgba(220, 38, 38, 0.1);
  border-color: rgba(220, 38, 38, 0.3);
  color: #f87171;
}

.teamMemberCard__btn--danger:hover {
  background: rgba(220, 38, 38, 0.2);
  border-color: rgba(220, 38, 38, 0.5);
}

/* Team member card menu */
.teamMemberCard__menuOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
}

.teamMemberCard__menu {
  position: fixed;
  z-index: 1000;
  min-width: 180px;
  background: rgba(10, 14, 22, 0.95);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  border-radius: var(--radius-control);
  padding: 6px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
  animation: dropdownAppear 0.15s ease-out;
}

.teamMemberCard__menuItem {
  display: block;
  width: 100%;
  padding: 8px 12px;
  background: transparent;
  border: none;
  border-radius: 4px;
  color: var(--text);
  font-family: inherit;
  font-size: 13px;
  text-align: left;
  cursor: pointer;
  transition: all 0.15s;
}

.teamMemberCard__menuItem:hover {
  background: rgba(255, 255, 255, 0.05);
}

.teamMemberCard__menuItem--danger {
  color: #f87171;
}

.teamMemberCard__menuItem--danger:hover {
  background: rgba(220, 38, 38, 0.1);
}

.teamMemberCard__menuSeparator {
  height: 1px;
  background: rgba(255, 255, 255, 0.06);
  margin: 6px 0;
}

/* ==================== SESSION TEAM MEMBER AVATAR ==================== */

.sessionTeamMemberAvatar {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  margin-right: 6px;
  line-height: 1;
  opacity: 0.9;
}

/* ==================== SESSION TEAM MEMBER BADGE ==================== */

.sessionTeamMemberBadge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  font-size: 9px;
  padding: 1px 5px 1px 3px;
  border-radius: 2px;
  background: rgba(139, 92, 246, 0.15);
  border: 1px solid rgba(139, 92, 246, 0.3);
  color: #c4b5fd;
  line-height: 1.2;
  white-space: nowrap;
  cursor: default;
}

.sessionTeamMemberBadge__avatar {
  font-size: 10px;
  line-height: 1;
}

.sessionTeamMemberBadge__name {
  max-width: 60px;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ==================== TEAM MEMBER MODAL STYLES ==================== */

.modalInfo {
  padding: 12px;
  background: rgba(34, 211, 238, 0.1);
  border: 1px solid rgba(34, 211, 238, 0.3);
  border-radius: 6px;
  color: var(--accent-2);
  font-size: 13px;
  margin-bottom: 20px;
}

.formGroup {
  margin-bottom: 20px;
}

.formLabel {
  display: block;
  margin-bottom: 8px;
  font-size: 13px;
  font-weight: 500;
  color: var(--text);
}

.formInput,
.formTextarea,
.formSelect {
  width: 100%;
  padding: 10px 12px;
  background: var(--panel-2);
  border: 1px solid var(--border);
  border-radius: var(--radius-control);
  color: var(--text);
  font-family: inherit;
  font-size: 14px;
  transition: all 0.2s;
}

.formInput:focus,
.formTextarea:focus,
.formSelect:focus {
  outline: none;
  border-color: var(--theme-primary);
  box-shadow: 0 0 0 3px rgba(var(--theme-primary-rgb), 0.1);
}

.formInput:disabled,
.formTextarea:disabled,
.formSelect:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.formTextarea {
  resize: vertical;
  min-height: 100px;
}

.formHint {
  margin-top: 6px;
  font-size: 12px;
  color: var(--muted);
}

.modalError {
  padding: 12px;
  background: rgba(220, 38, 38, 0.1);
  border: 1px solid rgba(220, 38, 38, 0.3);
  border-radius: 6px;
  color: #f87171;
  font-size: 13px;
  margin-bottom: 20px;
}

.terminalBtn {
  padding: 10px 20px;
  border-radius: var(--radius-control);
  font-family: inherit;
  font-size: 14px;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border: 1px solid;
}

.terminalBtn--primary {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: rgba(var(--theme-primary-rgb), 0.4);
  color: var(--theme-primary);
}

.terminalBtn--primary:hover {
  background: rgba(var(--theme-primary-rgb), 0.25);
  border-color: rgba(var(--theme-primary-rgb), 0.6);
  box-shadow: 0 0 12px rgba(var(--theme-primary-rgb), 0.3);
}

.terminalBtn--primary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.terminalBtn--secondary {
  background: transparent;
  border-color: var(--border);
  color: var(--text);
}

.terminalBtn--secondary:hover {
  background: rgba(255, 255, 255, 0.05);
  border-color: rgba(255, 255, 255, 0.2);
}

.terminalBtn--secondary:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.modalFooter {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  margin-top: 24px;
  padding-top: 20px;
  border-top: 1px solid var(--border);
}

/* ================================================================== */
/*  MATERIAL STYLE — Global Component Overrides                        */
/* ================================================================== */

html[data-style="material"] .terminalTaskModal,
html[data-style="material"] .terminalTaskModal__content {
  border-radius: var(--style-radius-xl);
  box-shadow: var(--style-shadow-modal);
}

html[data-style="material"] .terminalBtn,
html[data-style="material"] .terminalBtn--primary {
  border-radius: var(--style-radius-md);
  text-transform: none;
  letter-spacing: 0;
  font-weight: 500;
  box-shadow: var(--style-shadow-card);
  transition: all var(--style-transition);
}

html[data-style="material"] .terminalBtn:hover,
html[data-style="material"] .terminalBtn--primary:hover {
  box-shadow: var(--style-shadow-hover);
  text-shadow: none;
}

html[data-style="material"] .terminalBtn--secondary {
  border-radius: var(--style-radius-md);
  text-transform: none;
  letter-spacing: 0;
}

html[data-style="material"] .terminalSubsectionHeader {
  text-transform: none;
  letter-spacing: 0;
  font-weight: 600;
}

html[data-style="material"] .terminalSessionItem {
  border-radius: var(--style-radius-md);
  transition: all var(--style-transition);
}

html[data-style="material"] .terminalSessionItem:hover {
  text-shadow: none;
}

html[data-style="material"] .terminalStatusLabel--pending,
html[data-style="material"] .terminalStatusLabel--in_progress,
html[data-style="material"] .terminalStatusLabel--completed,
html[data-style="material"] .terminalStatusLabel--failed {
  border-radius: var(--style-radius-sm);
  text-transform: none;
  letter-spacing: 0;
  font-weight: 500;
}

html[data-style="material"] input,
html[data-style="material"] textarea,
html[data-style="material"] select {
  border-radius: var(--style-radius-md);
  transition: all var(--style-transition);
}

/* Remove neon text-shadow across material */
html[data-style="material"] * {
  text-shadow: none !important;
}

/* ================================================================== */
/*  GLASS STYLE — Global Component Overrides                           */
/* ================================================================== */

html[data-style="glass"] .terminalTaskModal,
html[data-style="glass"] .terminalTaskModal__content {
  border-radius: var(--style-radius-xl);
  background: var(--style-surface-2);
  backdrop-filter: var(--style-backdrop);
  -webkit-backdrop-filter: var(--style-backdrop);
  box-shadow: var(--style-shadow-modal);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

html[data-style="glass"] .terminalBtn,
html[data-style="glass"] .terminalBtn--primary {
  border-radius: var(--style-radius-md);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  text-transform: none;
  letter-spacing: 0;
}

html[data-style="glass"] .terminalSessionItem {
  border-radius: var(--style-radius-md);
  background: var(--style-surface-3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

html[data-style="glass"] .terminalSubsectionHeader {
  text-transform: none;
  letter-spacing: 0.2px;
}

html[data-style="glass"] .terminalStatusLabel--pending,
html[data-style="glass"] .terminalStatusLabel--in_progress,
html[data-style="glass"] .terminalStatusLabel--completed,
html[data-style="glass"] .terminalStatusLabel--failed {
  border-radius: var(--style-radius-sm);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

html[data-style="glass"] input,
html[data-style="glass"] textarea,
html[data-style="glass"] select {
  border-radius: var(--style-radius-md);
  background: var(--style-input-bg);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* ================================================================== */
/*  MINIMAL STYLE — Global Component Overrides                         */
/* ================================================================== */

html[data-style="minimal"] .terminalTaskModal,
html[data-style="minimal"] .terminalTaskModal__content {
  box-shadow: var(--style-shadow-modal);
  border: 1px solid var(--border);
}

html[data-style="minimal"] .terminalBtn,
html[data-style="minimal"] .terminalBtn--primary {
  text-transform: none;
  letter-spacing: 0;
  font-weight: 500;
  box-shadow: none;
  transition: all var(--style-transition);
}

html[data-style="minimal"] .terminalBtn:hover,
html[data-style="minimal"] .terminalBtn--primary:hover {
  box-shadow: none;
  text-shadow: none;
}

html[data-style="minimal"] .terminalSubsectionHeader {
  text-transform: none;
  letter-spacing: 0;
  font-weight: 600;
}

html[data-style="minimal"] .terminalSessionItem:hover {
  text-shadow: none;
  box-shadow: none;
}

html[data-style="minimal"] .terminalStatusLabel--pending,
html[data-style="minimal"] .terminalStatusLabel--in_progress,
html[data-style="minimal"] .terminalStatusLabel--completed,
html[data-style="minimal"] .terminalStatusLabel--failed {
  text-transform: none;
  letter-spacing: 0;
  font-weight: 500;
}

/* Remove all neon text-shadow and box-shadow glow in minimal */
html[data-style="minimal"] * {
  text-shadow: none !important;
}

/* ------------------------------------------------------------------ */
/*  Team Member Modal — Sections & Responsive                          */
/* ------------------------------------------------------------------ */

.tmModal__section {
  margin-bottom: 12px;
  padding-bottom: 12px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.08);
}

.tmModal__section:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.tmModal__sectionLabel {
  font-size: 9px;
  font-weight: 700;
  color: rgba(var(--theme-primary-rgb), 0.35);
  letter-spacing: 1.5px;
  text-transform: uppercase;
  margin-bottom: 8px;
}

.tmModal__row {
  display: flex;
  gap: 10px;
  align-items: flex-start;
}

.tmModal__field {
  flex: 1;
  min-width: 0;
}

.tmModal__fieldSmall {
  width: 72px;
  flex-shrink: 0;
}

/* Memory Card */
.tmModal__memoryCard {
  border: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  background: rgba(var(--theme-primary-rgb), 0.02);
  border-radius: 3px;
  overflow: hidden;
}

.tmModal__memoryHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 6px 10px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.08);
  background: rgba(var(--theme-primary-rgb), 0.04);
}

.tmModal__memoryHeaderLabel {
  font-size: 10px;
  font-weight: 600;
  color: rgba(var(--theme-primary-rgb), 0.6);
  letter-spacing: 0.5px;
  text-transform: uppercase;
  font-family: var(--style-font-ui);
}

.tmModal__memoryCount {
  font-size: 9px;
  color: rgba(var(--theme-primary-rgb), 0.4);
  padding: 1px 6px;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.15);
  border-radius: 2px;
  font-family: var(--style-font-ui);
}

.tmModal__memoryList {
  max-height: 200px;
  overflow-y: auto;
  padding: 0;
}

.tmModal__memoryList::-webkit-scrollbar {
  width: 4px;
}

.tmModal__memoryList::-webkit-scrollbar-track {
  background: transparent;
}

.tmModal__memoryList::-webkit-scrollbar-thumb {
  background: rgba(var(--theme-primary-rgb), 0.2);
  border-radius: 2px;
}

.tmModal__memoryEntry {
  display: flex;
  gap: 8px;
  padding: 6px 10px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.05);
  font-size: 11px;
  font-family: "JetBrains Mono", "Fira Code", monospace;
  line-height: 1.4;
  color: rgba(var(--theme-primary-rgb), 0.7);
}

.tmModal__memoryEntry:last-child {
  border-bottom: none;
}

.tmModal__memoryIndex {
  flex-shrink: 0;
  width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 9px;
  font-weight: 600;
  color: rgba(var(--theme-primary-rgb), 0.4);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  border-radius: 2px;
  background: rgba(var(--theme-primary-rgb), 0.03);
  margin-top: 1px;
}

.tmModal__memoryText {
  flex: 1;
  min-width: 0;
  word-break: break-word;
}

.tmModal__memoryEmpty {
  padding: 16px 10px;
  text-align: center;
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.3);
  font-family: var(--style-font-ui);
}

.tmModal__memoryHint {
  font-size: 9px;
  color: rgba(var(--theme-primary-rgb), 0.3);
  padding: 4px 10px 6px;
  border-top: 1px solid rgba(var(--theme-primary-rgb), 0.05);
  font-family: var(--style-font-ui);
}

/* Permissions Card */
.tmModal__permCard {
  border: 1px solid rgba(var(--theme-primary-rgb), 0.1);
  background: rgba(var(--theme-primary-rgb), 0.02);
  border-radius: 3px;
  padding: 10px;
  margin-bottom: 10px;
}

.tmModal__permCard:last-child {
  margin-bottom: 0;
}

.tmModal__permCardLabel {
  font-size: 9px;
  font-weight: 700;
  color: rgba(var(--theme-primary-rgb), 0.4);
  letter-spacing: 1px;
  text-transform: uppercase;
  margin-bottom: 8px;
}

/* Footer responsive */
.tmModal__footer {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border-top: 1px solid var(--theme-border);
  flex-wrap: wrap;
}

.tmModal__footerLeft {
  display: flex;
  align-items: center;
  gap: 8px;
  flex: 1;
  min-width: 0;
}

.tmModal__footerRight {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-shrink: 0;
}

/* Responsive */
@media (max-width: 640px) {
  .themedModal--wide {
    max-width: 100%;
    min-width: unset;
    min-height: unset;
    max-height: 95vh;
    margin: 8px;
  }

  .tmModal__row {
    flex-direction: column;
    gap: 8px;
  }

  .tmModal__fieldSmall {
    width: 100%;
  }

  .tmModal__footer {
    flex-direction: column;
    gap: 8px;
  }

  .tmModal__footerLeft {
    width: 100%;
    flex-wrap: wrap;
  }

  .tmModal__footerRight {
    width: 100%;
    justify-content: flex-end;
  }

  .themedModalHeader {
    flex-wrap: wrap;
    gap: 6px;
  }
}

/* ─── Team Launch Configuration Modal ──────────────────────────────────────── */

.launchConfigModal {
  max-width: 780px;
  min-height: 400px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
}

.launchConfigMembers {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.launchConfigCard {
  border: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.02);
  border-radius: 3px;
  overflow: hidden;
}

.launchConfigCard--coordinator {
  border-color: rgba(255, 171, 0, 0.3);
  background: rgba(255, 171, 0, 0.03);
}

.launchConfigCardHeader {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  gap: 10px;
  flex-wrap: wrap;
}

.launchConfigCardIdentity {
  display: flex;
  align-items: center;
  gap: 8px;
  min-width: 0;
}

.launchConfigCardAvatar {
  font-size: 18px;
  flex-shrink: 0;
}

.launchConfigCardName {
  font-family: var(--style-font-ui);
  font-size: 12px;
  font-weight: 600;
  color: var(--theme-text);
  margin-right: 6px;
}

.launchConfigCardRole {
  font-family: var(--style-font-ui);
  font-size: 10px;
  color: rgba(var(--theme-primary-rgb), 0.4);
  display: block;
  margin-top: 1px;
}

.launchConfigBadge {
  font-size: 8px;
  font-weight: 700;
  letter-spacing: 0.5px;
  padding: 1px 5px;
  border-radius: 2px;
  text-transform: uppercase;
  vertical-align: middle;
}

.launchConfigBadge--coordinator {
  background: rgba(255, 171, 0, 0.15);
  color: #ffab00;
  border: 1px solid rgba(255, 171, 0, 0.3);
}

.launchConfigCardControls {
  display: flex;
  align-items: center;
  gap: 6px;
  flex-wrap: wrap;
}

.launchConfigSelect {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid var(--theme-border);
  color: var(--theme-text);
  font-family: var(--style-font-ui);
  font-size: 10px;
  padding: 4px 6px;
  cursor: pointer;
  outline: none;
  transition: border-color 0.15s ease;
}

.launchConfigSelect:hover,
.launchConfigSelect:focus {
  border-color: var(--theme-primary);
}

.launchConfigToggle {
  background: rgba(var(--theme-primary-rgb), 0.05);
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.5);
  font-family: var(--style-font-ui);
  font-size: 10px;
  padding: 4px 8px;
  cursor: pointer;
  transition: all 0.15s ease;
  white-space: nowrap;
}

.launchConfigToggle:hover {
  border-color: var(--theme-primary);
  color: var(--theme-primary);
}

.launchConfigToggle--active {
  border-color: var(--theme-primary);
  color: var(--theme-primary);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

.launchConfigToggle--danger {
  border-color: rgba(255, 59, 59, 0.5);
  color: #ff3b3b;
  background: rgba(255, 59, 59, 0.1);
}

.launchConfigToggle--danger:hover {
  border-color: #ff3b3b;
  color: #ff3b3b;
}

.launchConfigExpandBtn {
  background: none;
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.4);
  font-size: 9px;
  width: 24px;
  height: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s ease;
}

.launchConfigExpandBtn:hover {
  border-color: var(--theme-primary);
  color: var(--theme-primary);
}

.launchConfigCardDetails {
  border-top: 1px solid var(--theme-border);
  padding: 10px 12px;
  animation: themedTabSlideDown 0.15s ease;
}

.launchConfigSection {
  margin-bottom: 8px;
}

.launchConfigSection:last-child {
  margin-bottom: 0;
}

/* Configure button in execution bar */
.executionBarConfigBtn {
  background: none;
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.5);
  font-family: var(--style-font-ui);
  font-size: 14px;
  padding: 4px 7px;
  cursor: pointer;
  transition: all 0.15s ease;
  display: flex;
  align-items: center;
  gap: 0;
  border-radius: 4px;
}

.executionBarConfigBtn:hover {
  border-color: var(--terminal-amber, #ffab00);
  color: var(--terminal-amber, #ffab00);
}

.executionBarConfigBtn--orchestrate:hover {
  border-color: var(--terminal-amber, #ffab00);
  color: var(--terminal-amber, #ffab00);
}

/* ─── Inline Launch Config Panel (Task Modal) ──────────────────────────────── */

.launchConfigGearBtn {
  background: none;
  border: 1px solid var(--theme-border);
  color: rgba(var(--theme-primary-rgb), 0.4);
  font-size: 15px;
  width: 28px;
  height: 28px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.launchConfigGearBtn:hover {
  border-color: var(--theme-primary);
  color: var(--theme-primary);
}

.launchConfigGearBtn--active {
  border-color: var(--terminal-amber, #ffab00);
  color: var(--terminal-amber, #ffab00);
  background: rgba(255, 171, 0, 0.08);
}

.launchConfigInline {
  display: flex;
  flex-direction: column;
  height: 100%;
  min-height: 120px;
}

.launchConfigInline__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 12px;
  border-bottom: 1px solid var(--theme-border);
  flex-shrink: 0;
}

.launchConfigInline__title {
  font-size: 11px;
  font-weight: 600;
  color: var(--terminal-amber, #ffab00);
  font-family: var(--style-font-ui);
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.launchConfigInline__headerMember {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 11px;
  font-weight: 400;
  color: var(--theme-text);
  opacity: 0.7;
  text-transform: none;
  letter-spacing: 0;
}

.launchConfigInline__closeBtn {
  background: none;
  border: none;
  color: rgba(var(--theme-primary-rgb), 0.4);
  font-size: 16px;
  cursor: pointer;
  padding: 0 4px;
  line-height: 1;
  transition: color 0.15s ease;
}

.launchConfigInline__closeBtn:hover {
  color: var(--theme-primary);
}

.launchConfigInline__body {
  padding: 10px 12px;
  overflow-y: auto;
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.launchConfigInline__card {
  border: 1px solid var(--theme-border);
  background: rgba(var(--theme-primary-rgb), 0.02);
  padding: 10px 12px;
}

.launchConfigInline__cardIdentity {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
  padding-bottom: 6px;
  border-bottom: 1px solid rgba(var(--theme-primary-rgb), 0.06);
}

.launchConfigInline__avatar {
  font-size: 14px;
  flex-shrink: 0;
}

.launchConfigInline__name {
  font-size: 11px;
  font-weight: 600;
  color: var(--theme-text);
}

.launchConfigInline__role {
  font-size: 10px;
  opacity: 0.5;
  margin-left: 6px;
}

.launchConfigInline__controls {
  display: flex;
  align-items: flex-end;
  gap: 12px;
  flex-wrap: wrap;
}

.launchConfigInline__field {
  display: flex;
  flex-direction: column;
  gap: 3px;
}

.launchConfigInline__label {
  font-size: 9px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  opacity: 0.4;
  font-family: var(--style-font-ui);
}

.launchConfigSelect--compact {
  padding: 4px 6px !important;
  font-size: 11px !important;
  min-width: 100px;
}

.launchConfigToggle--compact {
  padding: 4px 8px !important;
  font-size: 10px !important;
  height: auto !important;
}

.launchConfigInline__advancedToggle {
  background: none;
  border: none;
  color: rgba(var(--theme-primary-rgb), 0.4);
  font-size: 10px;
  cursor: pointer;
  padding: 6px 0 0;
  display: flex;
  align-items: center;
  gap: 5px;
  font-family: var(--style-font-ui);
  transition: color 0.15s ease;
}

.launchConfigInline__advancedToggle:hover {
  color: var(--theme-primary);
}

.launchConfigInline__badge {
  background: rgba(var(--theme-primary-rgb), 0.15);
  color: var(--theme-primary);
  font-size: 9px;
  padding: 1px 5px;
  border-radius: 8px;
  font-weight: 600;
}

.launchConfigInline__advanced {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid rgba(var(--theme-primary-rgb), 0.06);
  animation: themedTabSlideDown 0.15s ease;
}

.launchConfigInline__section {
  margin-bottom: 8px;
}

.launchConfigInline__section:last-child {
  margin-bottom: 0;
}

/* ================================================================== */
/*  Master Project Indicators                                           */
/* ================================================================== */

.projectTabMasterIcon {
  font-size: 11px;
  color: #ffd700;
  margin-right: 3px;
  line-height: 1;
  flex-shrink: 0;
}

.projectTabActive .projectTabMasterIcon {
  color: #ffd700;
  text-shadow: 0 0 6px rgba(255, 215, 0, 0.6);
}

.mpbProjectMasterIcon {
  font-size: 11px;
  color: #ffd700;
  margin-right: 4px;
  flex-shrink: 0;
  line-height: 1;
}

/* Master toggle row in project settings */
.projectSettingsMasterRow {
  flex-direction: column;
  gap: 6px;
}

.projectSettingsMasterToggle {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
  user-select: none;
}

.projectSettingsMasterToggle input[type="checkbox"] {
  display: none;
}

.projectSettingsMasterSwitch {
  position: relative;
  display: inline-block;
  width: 32px;
  height: 16px;
  background: rgba(var(--theme-primary-rgb), 0.15);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.3);
  border-radius: 8px;
  transition: background 0.15s, border-color 0.15s;
  flex-shrink: 0;
}

.projectSettingsMasterSwitch::after {
  content: '';
  position: absolute;
  top: 2px;
  left: 2px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  background: rgba(var(--theme-primary-rgb), 0.4);
  transition: transform 0.15s, background 0.15s;
}

.projectSettingsMasterToggle input:checked ~ .projectSettingsMasterSwitch {
  background: rgba(255, 215, 0, 0.2);
  border-color: #ffd700;
}

.projectSettingsMasterToggle input:checked ~ .projectSettingsMasterSwitch::after {
  transform: translateX(16px);
  background: #ffd700;
}

.projectSettingsMasterLabel {
  font-family: var(--style-font-ui);
  font-size: 12px;
  color: var(--theme-primary);
}

.projectSettingsMasterHint {
  font-family: var(--style-font-ui);
  font-size: 11px;
  color: rgba(var(--theme-primary-rgb), 0.5);
  padding-left: 0;
}

/* ------------------------------------------------------------------ */
/*  Task List Redesign - Minimal single-line tiles                     */
/* ------------------------------------------------------------------ */

/* Subtask arrow (leftmost in task row) */
.terminalTaskSubtaskArrow {
  width: 20px;
  height: 20px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  color: var(--terminal-text-dim);
  cursor: pointer;
  padding: 0;
  transition: all 0.2s ease;
  opacity: 0;
  position: relative;
}

.terminalTaskRow:hover .terminalTaskSubtaskArrow,
.terminalTaskSubtaskArrow--expanded,
.terminalTaskSubtaskArrow--collapsed,
.terminalTaskSubtaskArrow--adding {
  opacity: 1;
}

.terminalTaskSubtaskArrow--expanded {
  color: var(--terminal-green);
}

.terminalTaskSubtaskArrow--expanded svg {
  transform: rotate(90deg);
  transition: transform 0.2s ease;
}

.terminalTaskSubtaskArrow--collapsed svg {
  transition: transform 0.2s ease;
}

.terminalTaskSubtaskArrow:hover {
  color: var(--terminal-cyan);
}

.terminalTaskSubtaskArrow__count {
  position: absolute;
  top: -2px;
  right: -4px;
  font-size: 8px;
  background: var(--terminal-cyan);
  color: var(--terminal-bg);
  border-radius: 50%;
  width: 12px;
  height: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
}

/* Radio status button */
.terminalTaskRadioStatus {
  width: 18px;
  height: 18px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  cursor: pointer;
  padding: 0;
  font-size: 14px;
  transition: all 0.15s ease;
}

.terminalTaskRadioStatus--todo { color: var(--terminal-text-dim); }
.terminalTaskRadioStatus--in_progress { color: var(--terminal-cyan); }
.terminalTaskRadioStatus--in_review { color: #a855f7; }
.terminalTaskRadioStatus--completed { color: var(--terminal-green); }
.terminalTaskRadioStatus--cancelled { color: var(--terminal-gray); }
.terminalTaskRadioStatus--blocked { color: var(--terminal-red); }
.terminalTaskRadioStatus--archived { color: var(--terminal-text-dim); opacity: 0.5; }

.terminalTaskRadioStatus:hover {
  transform: scale(1.2);
  filter: brightness(1.3);
}

/* Clickable title */
.terminalTaskTitle--clickable {
  cursor: pointer;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.terminalTaskTitle--clickable:hover {
  text-decoration: underline;
  text-decoration-color: rgba(var(--theme-primary-rgb), 0.4);
  text-underline-offset: 2px;
}

/* Doc count badge in the collapsed task row */
.terminalTaskDocBadge {
  display: inline-flex;
  align-items: center;
  gap: 3px;
  flex-shrink: 0;
  padding: 1px 5px 1px 4px;
  border-radius: 3px;
  background: rgba(var(--theme-primary-rgb), 0.08);
  border: 1px solid rgba(var(--theme-primary-rgb), 0.12);
  color: rgba(var(--theme-primary-rgb), 0.55);
  font-size: 10px;
  line-height: 1;
  cursor: pointer;
  transition: background 0.1s, color 0.1s;
}

.terminalTaskDocBadge:hover {
  background: rgba(var(--theme-primary-rgb), 0.14);
  color: rgba(var(--theme-primary-rgb), 0.8);
}

/* Docs section in the expanded meta panel */
.terminalTaskDocsRow {
  flex-direction: column;
  align-items: flex-start;
  gap: 2px;
}

.terminalTaskDocsList {
  display: flex;
  flex-direction: column;
  gap: 2px;
  width: 100%;
}

.terminalTaskDocItem {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  padding: 3px 6px;
  border-radius: 3px;
  background: none;
  border: 1px solid rgba(var(--theme-primary-rgb), 0.1);
  color: rgba(var(--theme-primary-rgb), 0.6);
  font-size: 11px;
  font-family: inherit;
  cursor: pointer;
  text-align: left;
  transition: background 0.1s, color 0.1s, border-color 0.1s;
  max-width: 100%;
  overflow: hidden;
}

.terminalTaskDocItem:hover {
  background: rgba(var(--theme-primary-rgb), 0.08);
  border-color: rgba(var(--theme-primary-rgb), 0.2);
  color: rgba(var(--theme-primary-rgb), 0.9);
}

.terminalTaskDocItemIcon {
  flex-shrink: 0;
  font-size: 9px;
  opacity: 0.7;
  font-weight: 600;
}

.terminalTaskDocItemTitle {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Compact session statuses in the main row */
.terminalSessionStatuses--compact {
  flex-shrink: 0;
  gap: 3px;
}

/* Play button */
.terminalTaskPlayBtn {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: 1px solid transparent;
  color: var(--terminal-green);
  cursor: pointer;
  font-size: 10px;
  transition: all 0.15s ease;
  opacity: 0;
  border-radius: 3px;
}

.terminalTaskRow:hover .terminalTaskPlayBtn {
  opacity: 1;
}

.terminalTaskPlayBtn:hover {
  background: rgba(var(--theme-primary-rgb), 0.15);
  border-color: var(--terminal-green);
  box-shadow: 0 0 6px rgba(var(--theme-primary-rgb), 0.3);
}

/* Expand button */
.terminalTaskExpandBtn {
  width: 24px;
  height: 24px;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: 1px solid transparent;
  color: var(--terminal-text-dim);
  cursor: pointer;
  font-size: 11px;
  transition: all 0.2s ease;
  border-radius: 3px;
}

.terminalTaskExpandBtn--open {
  transform: rotate(180deg);
  color: var(--terminal-green);
}

.terminalTaskExpandBtn:hover {
  color: var(--terminal-cyan);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

/* Meta expanded panel (structured rows below single-line) */
.terminalTaskMetaExpanded {
  display: flex;
  flex-direction: column;
  gap: 0;
  padding: 4px 6px 6px 44px; /* align under title */
  border-top: 1px solid rgba(var(--theme-primary-rgb), 0.06);
  animation: slideDownMeta 0.15s ease-out;
  overflow: hidden;
}

@keyframes slideDownMeta {
  from { opacity: 0; transform: translateY(-4px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Each row in the meta panel: label + value pairs */
.terminalTaskMetaRow {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 4px;
  padding: 3px 0;
  min-height: 24px;
}

.terminalTaskMetaRow + .terminalTaskMetaRow {
  border-top: 1px solid rgba(var(--theme-primary-rgb), 0.04);
}

/* Dim label before each control — hidden by default now */
.terminalTaskMetaLabel {
  display: none;
}

/* Dot separator between groups — hidden since labels removed */
.terminalTaskMetaSep {
  display: none;
}

/* Flex filler to push time-ago to the right */
.terminalTaskMetaFill {
  flex: 1;
  min-width: 8px;
}

/* Split play in meta row — inline model badge+caret */
.terminalSplitPlay--meta {
  display: inline-flex;
  align-items: center;
  gap: 0;
  flex-shrink: 0;
}

/* ------------------------------------------------------------------ */
/*  Task Detail Overlay                                                */
/* ------------------------------------------------------------------ */

.taskDetailOverlay {
  position: absolute;
  inset: 0;
  background: var(--terminal-bg, #1a1a2e);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  animation: fadeInOverlay 0.15s ease-out;
  /* Ensure overlay sits above everything in the terminal area */
  isolation: isolate;
  overflow: hidden;
}

@keyframes fadeInOverlay {
  from { opacity: 0; }
  to { opacity: 1; }
}

.taskDetailOverlay__backBtn {
  display: flex;
  align-items: center;
  gap: 4px;
  background: none;
  border: 1px solid var(--terminal-border);
  color: var(--terminal-text-dim);
  cursor: pointer;
  padding: 4px 10px;
  font-size: 12px;
  font-family: var(--terminal-font);
  border-radius: 3px;
  transition: all 0.15s ease;
  flex-shrink: 0;
}

.taskDetailOverlay__backBtn:hover {
  border-color: var(--terminal-green);
  color: var(--terminal-green);
  background: rgba(var(--theme-primary-rgb), 0.1);
}

/* Overlay variant for CreateTaskModal - fills parent instead of portal */
.themedModal--overlay {
  position: relative;
  max-width: none;
  max-height: none;
  min-height: 0;
  height: 100%;
  width: 100%;
  flex: 1 1 0;
  border: none;
  border-radius: 0;
  box-shadow: none;
  margin: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.themedModal--overlay .themedModalContent {
  flex: 1 1 0;
  min-height: 0;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  padding: 8px 16px;
}

.themedModal--overlay .themedFormRow {
  flex: 1 1 0;
  min-height: 0;
  display: flex;
  flex-direction: column;
  margin-bottom: 0;
}

.themedModal--overlay .mentionsWrapper {
  flex: 1 1 0;
  min-height: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.themedModal--overlay .mentionsInput {
  flex: 1 1 0;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.themedModal--overlay .mentionsInput > div {
  flex: 1 1 0;
  min-height: 0;
  position: relative;
}

.themedModal--overlay .mentionsInput > div > div {
  position: absolute !important;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

.themedModal--overlay .mentionsInput textarea {
  position: absolute !important;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  height: 100% !important;
  max-height: none !important;
  min-height: 0 !important;
  overflow-y: auto !important;
}

.themedModal--overlay .themedModalHeader {
  flex-shrink: 0;
}

.themedModal--overlay .themedModalTabBar {
  flex-shrink: 0;
  margin-top: 0 !important;
}

.themedModal--overlay .themedModalTabContent {
  flex-shrink: 0;
  max-height: 200px;
  overflow-y: auto;
}

.themedModal--overlay .themedFormActions {
  flex-shrink: 0;
}

/* ------------------------------------------------------------------ */
/*  PanelIconBar - Icon-only sub-tabs                                  */
/* ------------------------------------------------------------------ */

.maestroPanelSubTab--icon {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px 8px;
}

.maestroPanelSubTabIcon {
  width: 14px;
  height: 14px;
  flex-shrink: 0;
}

/* ------------------------------------------------------------------ */
/*  Team card responsiveness                                           */
/* ------------------------------------------------------------------ */

/* Team card header — two-row layout: title on top, meta + actions below */
.terminalTeamMain {
  display: flex;
  flex-direction: column;
  padding: 6px 8px;
  cursor: pointer;
  min-width: 0;
  max-width: 100%;
  width: 100%;
  box-sizing: border-box;
  height: auto;
  gap: 2px;
  overflow: hidden;
}

/* Row 1: avatar + bold team name */
.terminalTeamMain__titleRow {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
}

.terminalTeamAvatar {
  font-size: 14px;
  flex-shrink: 0;
  line-height: 1;
}

.terminalTeamName {
  font-weight: 700;
  font-size: 13px;
  color: var(--terminal-text);
  letter-spacing: -0.01em;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  min-width: 0;
  flex: 1;
}

/* Row 2: badges + actions */
.terminalTeamMain__metaRow {
  display: flex;
  align-items: center;
  gap: 6px;
  min-width: 0;
  overflow: hidden;
}

.terminalTeamMain__spacer {
  flex: 1;
  min-width: 4px;
}

/* Hide leader badge at narrow widths */
.terminalTeamInlineBadge {
  flex-shrink: 0;
}

.terminalTeamEditBtn {
  padding: 2px 6px;
  font-size: 11px;
  cursor: pointer;
  background: none;
  border: 1px solid var(--theme-border);
  color: var(--theme-text-muted);
  border-radius: 3px;
  flex-shrink: 0;
  white-space: nowrap;
}

.terminalTeamEditBtn:hover {
  border-color: var(--terminal-cyan);
  color: var(--terminal-cyan);
}

/* Team member rows inside expanded TeamListItem */
.terminalTeamMemberRow {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-bottom: 1px solid var(--theme-border);
  font-size: 11px;
  font-family: "JetBrains Mono", monospace;
  min-width: 0;
  overflow: hidden;
}

.terminalTeamMemberRow__avatar {
  font-size: 14px;
  flex-shrink: 0;
  line-height: 1;
}

.terminalTeamMemberRow__name {
  color: var(--theme-text);
  font-weight: 400;
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.terminalTeamMemberRow__name--leader {
  font-weight: 600;
}

.terminalTeamMemberRow__badge {
  font-size: 9px;
  flex-shrink: 0;
}

.terminalTeamMemberRow__badge--dim {
  opacity: 0.7;
}

/* Sub-teams list inside expanded card */
.terminalTeamSubTeamsList {
  margin: 0 -12px;
}

/* Hide less important badges at narrow widths */
@container maestro-panel (max-width: 380px) {
  .terminalTeamMain .terminalMetaBadge--agent {
    display: none;
  }
}

@container maestro-panel (max-width: 320px) {
  .terminalTeamEditBtn {
    display: none;
  }
  .terminalTeamMain .terminalTimeAgo {
    display: none;
  }
}
